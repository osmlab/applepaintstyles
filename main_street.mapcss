
/*
Sample Code License

IMPORTANT:  This Style Sheet (the “Apple Style Sheet”) is supplied to you by Apple Inc.
("Apple") in consideration of your agreement to the following terms, and your use,
modification or redistribution of the Apple Style Sheet constitutes acceptance of these
terms.  If you do not agree with these terms, please do not use, modify or redistribute
the Apple Style Sheet.

In consideration of your agreement to abide by the following terms, and subject to these
terms, Apple grants you a personal, non-exclusive license, under Apple's copyrights in the
Apple Style Sheet to use, reproduce, modify and redistribute the Apple Style Sheet, with
or without modifications, in source and/or binary forms; provided that if you redistribute
the Apple Style Sheet in its entirety and without modifications, you must retain this
notice and the following text and disclaimers in all such redistributions of the Apple
Style Sheet.

Neither the name, trademarks, service marks or logos of Apple Inc. may be used to endorse
or promote products derived from or using the Apple Style Sheet without specific prior
written permission from Apple.  Except as expressly stated in this notice, no other rights
or licenses are granted or to be implied.

The Apple Style Sheet is provided by Apple on an "AS IS" basis.  APPLE MAKES NO
WARRANTIES, EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION THE IMPLIED WARRANTIES OF
NON-INFRINGEMENT, MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE, REGARDING THE
APPLE STYLE SHEET OR ITS USE AND OPERATION ALONE OR IN COMBINATION WITH ANY OTHER
SOFTWARE, HARDWARE, TECHNOLOGY, PRODUCTS OR MATERIALS.

IN NO EVENT SHALL APPLE BE LIABLE FOR ANY SPECIAL, INDIRECT, INCIDENTAL OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS
OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) ARISING IN ANY WAY OUT OF THE USE,
REPRODUCTION, MODIFICATION AND/OR DISTRIBUTION OF THE APPLE STYLE SHEET, HOWEVER CAUSED
AND WHETHER UNDER THEORY OF CONTRACT, TORT (INCLUDING NEGLIGENCE), STRICT LIABILITY OR
OTHERWISE, EVEN IF APPLE HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

Copyright (C) 2020 Apple Inc. All Rights Reserved.

---------------------- 

Table of Contents

1. Settings/Groups
2. Vehicle Restrictions
3. Node Styling
4. Highway Styling
5. General Tags (POI, Natural, Transport)
6. Admin/Places/Territories
7. General Display Properties
8. Quality Checks
9. Sensitive Features
10. Inline Validation
11. Admin Casing

*/

meta { 
    title: "Apple Paint Style";
    icon: "icons/mapicon.svg";
    description: "This map paint style was created to improve the visibility of the streets network for easier editing of ways, nodes, and relations in the JOSM editor.";
    last_update: "08.11.2020";
    version: "1.2.3";
    link: "https://github.com/osmlab/applepaintstyles";
 }

 canvas {
    fill-color: #000000;
}

/*----------------------------------------------------------------------------------------------------------------------*\
                                                    Settings/Groups
\*----------------------------------------------------------------------------------------------------------------------*/

/* Create Display Setting Group */

settings::display_group {
    label: tr("1) Feature/Label Display Settings");
}

/* Display Settings */

setting::hide_icons {
  type: boolean;
  label: tr("Hide icons (at low zoom)");
  default: true;
  group: "display_group";
}
setting::partial_fill {
    type: boolean;
    label: tr("Areas drawn with partial fill");
    default: true;
    group: "display_group";
}
setting::Address_names {
  type: boolean;
  label: tr("Display address labels");
  default: false;
  group: "display_group";
}
setting::ref_labels {
  type: boolean;
  label: tr("Display highway ref labels");
  default: false;
  group: "display_group";
}
setting::remove_names {
  type: boolean;
  label: tr("Remove all street labels");
  default: false;
  group: "display_group";
}
setting::hide_tagged_waynodes {
  type: boolean;
  label: tr("Hide tagged waynodes at low zoom");
  default: true;
  group: "display_group";
}
setting::destination_setting {
  type: boolean;
  label: tr("Display destinations on ways and relations");
  default: false;
  group: "display_group";
}
setting::highway_labels {
  type: boolean;
  label: tr("Display larger highway and place name labels");
  default: false;
  group: "display_group";
}
setting::visible_nodes {
  type: boolean;
  label: tr("Large nodes (all zoom levels)");
  default: false;
  group: "display_group";
}

/* Create Tag Check Setting Group */

settings::tag_check_group {
    label: tr("2) Tag/Geometry Check Settings");
}

/* Tag Check Settings */

setting::val_checks {
  type: boolean;
  label: tr("Inline validation checks");
  default: true;
  group: "tag_check_group";
}
setting::check_ref {
  type: boolean;
  label: tr("Highlight highways by ref tag");
  default: false;
  group: "tag_check_group";
}
setting::check_ref2 {
  type: boolean;
  label: tr("Highlight highways by int_ref Tag");
  default: false;
  group: "tag_check_group";
}
setting::check_dup {
  type: boolean;
  label: tr("Check for missing or mismatching refs");
  default: false;
  group: "tag_check_group";
}
setting::continuous_roads {
  type: boolean;
  label: tr("Highlight continuous roads");
  default: false;
  group: "tag_check_group";
}
setting::Z_Index_Check {
    type: boolean;
    label: tr("Z-Index check");
    default: false;
    group: "tag_check_group";
}
setting::bus_setting {
  type: boolean;
  label: tr("Highlight bus routes");
  default: false;
  group: "tag_check_group";
}
setting::associatedStreet_setting {
  type: boolean;
  label: tr("Highlight associatedStreets");
  default: false;
  group: "tag_check_group";
}
setting::one_2 {
 type: boolean;
 label: tr("Highlight one_way roads");
 default: false;
 group: "tag_check_group";
}
setting::sensitive {
  type: boolean;
  label: tr("Sensitive features");
  default: true;
  group: "tag_check_group";
}
setting::pedestrian {
  type: boolean;
  label: tr("Highlight pedestrian accessibility");
  default: false;
  group: "tag_check_group";
}
/* Create Alternative Setting Group */

settings::alt_group {
    label: tr("3) Alternative Settings");
}

/* Alternative Settings */

setting::Unconnected_Nodes_setting {
  type: boolean;
  label: tr("Show unconnected nodes");
  default: false;
  group: "alt_group";
}
setting::Show_Landuse_Labels_setting {
  type: boolean;
  label: tr("Show landuse labels");
  default: false;
  group: "alt_group";
}
setting::Alt_Highways_setting {
  type: boolean;
  label: tr("Alternative highways");
  default: false;
  group: "alt_group";
}

/*****************************************************/
/* Less Obtrusive Nodes - Size Nodes with Zoom Level */
/*****************************************************/

canvas {
    default-points: false;
}

node|z17- {
    symbol-size:12;
    symbol-shape: square;
    symbol-stroke-color: #ffff00;
    symbol-fill-color:#000000;
}

node:connection {
    symbol-fill-opacity: 1;
    symbol-fill-color: #000000;
}

node|z17 { 
    symbol-size: 1;
}
way > node|z17 { 
    symbol-size: 2; 
}
node|z17:connection {
    symbol-size: 1; 
}

node|z18 { 
    symbol-size: 4; 
}
way > node|z18 { 
    symbol-size: 2;
}
node|z18:connection { 
    symbol-size: 4; 
}

node|z19-20 { 
    symbol-size: 5; 
}
way > node|z19-20 { 
    symbol-size: 3; 
}
node|z19-20:connection { 
    symbol-size: 5; 
}

node|z21-22 { 
    symbol-size: 6; 
}
way > node|z21-22 { 
    symbol-size: 4; 
}
node|z21-22:connection { 
    symbol-size: 6; 
}

node|z23- { 
    symbol-size: 7; 
}
way > node|z23- { 
    symbol-size: 5; 
}
node|z23-:connection { 
    symbol-size: 7; 
}


/*----------------------------------------------------------------------------------------------------------------------*\
                                                    Vehicle Restrictions
\*----------------------------------------------------------------------------------------------------------------------*/

/*********************/
/* Turn Restrictions */
/*********************/

relation[restriction=no_left_turn] {
    icon-image: "presets/vehicle/restriction/turn_restrictions/no_left_turn_red.svg";
    set icon_z17;
}
relation[restriction=no_right_turn] {
    icon-image: "presets/vehicle/restriction/turn_restrictions/no_right_turn_red.svg";
    set icon_z17;
}
relation[restriction=no_straight_on] {
    icon-image: "presets/vehicle/restriction/turn_restrictions/no_straight_on_red.svg";
    set icon_z17;
}
relation[restriction=no_u_turn] {
    icon-image: "presets/vehicle/restriction/turn_restrictions/no_u_turn.svg";
    set icon_z17;
}
relation[restriction=only_left_turn] {
    icon-image: "presets/vehicle/restriction/turn_restrictions/only_left_turn.svg";
    set icon_z17;
}
relation[restriction=only_right_turn] {
    icon-image: "presets/vehicle/restriction/turn_restrictions/only_right_turn.svg";
    set icon_z17;
}
relation[restriction=only_straight_on] {
    icon-image: "presets/vehicle/restriction/turn_restrictions/only_straight_on.svg";
    set icon_z17;
}
node[restriction] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}

/***************************/
/* Access Restriction Tags */
/***************************/

/* Vehicle restrictions on ways */

way["access"=~/^(permissive|private|destination|delivery|customers|designated|discouraged|emergency|delivery|agricultural|forestry)$/],
way["motor_vehicle"=~/^(yes|permissive|private|destination|delivery|customers|designated|discouraged|emergency|delivery|agricultural|forestry)$/],
way["motorcar"=~/^(yes|permissive|private|destination|delivery|customers|designated|discouraged|emergency|delivery|agricultural|forestry)$/],
way["vehicle"=~/^(yes|permissive|private|destination|delivery|customers|designated|discouraged|emergency|delivery|agricultural|forestry)$/] {  
    set .way_possible_access;
}

way|z17-["highway"=~/^(motorway|trunk|primary|secondary|tertiary|motorway_link|trunk_link|primary_link|secondary_link|tertiary_link|unclassified|residential|service|track|living_street|road)$/].way_possible_access {
    repeat-image: "presets/vehicle/restriction/possiblerestrictions.svg";
    repeat-image-spacing: 350;
    repeat-image-width: 23;
    z-index: 1;
}

way|z17-[highway][access=yes] {  
    repeat-image: "presets/vehicle/restriction/vehicles_allowed.svg";
    repeat-image-spacing: 350;
    repeat-image-width: 23;
    z-index: 1;
}

way[motor_vehicle=~/^(yes|permissive|designated)$/],
way[vehicle=~/^(yes|permissive|designated|public)$/],
way[motorcar=~/^(yes|permissive|designated|public)$/] {
    set .way_vehicles_allowed;
}

way[access=no]!.way_vehicles_allowed,
way[oneway=reversible],
way[motor_vehicle=no],
way[motorcar=no],
way[vehicle=no] {  
    set .way_no_access;
}


way|z17-["highway"=~/^(motorway|trunk|primary|secondary|tertiary|motorway_link|trunk_link|primary_link|secondary_link|tertiary_link|unclassified|residential|service|track|living_street|road)$/].way_no_access!.way_vehicles_allowed {
    repeat-image: "presets/vehicle/restriction/restrictions.svg";
    repeat-image-spacing: 350;
    repeat-image-width: 23;
    z-index: 1;
}

/* Vehicle restrictions on nodes */


node["motor_vehicle"=~/^(yes|permissive|designated)$/],
node["motorcar"=~/^(yes|permissive|designated)$/],
node["vehicle"=~/^(yes|permissive|designated)$/] {
    set .node_vehicle_class;
}


node["barrier"=~/^(toll_booth|lift_gate|sally_port|cattle_grid|entrance|border_control)$/],
node["access"=~/^(yes|permissive|public)$/].node_vehicle_class {
    set .node_vehicle_allowed;
}

node|z17-["barrier"=~/^(toll_booth|lift_gate|sally_port|cattle_grid|entrance|border_control)$/]::barrier_restrictions {
    symbol-shape: square;
    symbol-size: 23;
    symbol-stroke-color: orange;
    symbol-stroke-width: 2;
    symbol-fill-color: #457585;
    symbol-fill-opacity: .7;
    z-index: -15;
    }

node|z17-["barrier"=~/^(fence|wall|gate|hedge|bollard|retaining_wall|stile|cycle_barrier|kerb|yes|block|ditch|kissing_gate|city_wall|cable_barrier|guard_rail|hedge_bank|wire_fence|line|swing_gate|chain|turnstile|embankment|field_boundary|door|hampshire_gate|wood_fence|bump_gate|bus_trap)$/]::core_access {
    symbol-shape: square;
    symbol-size: 23;
    symbol-stroke-color: red;
    symbol-stroke-width: 2;
    symbol-fill-color: #F5CB73;
    symbol-fill-opacity: .7;
    z-index: -15;
}

node|z17-[barrier]["access"=~/^(yes|permissive|public)$/]["motor_vehicle"=~/^(yes|permissive|designated)$/]::core_access,
node|z17-[barrier]["access"=~/^(yes|permissive|public)$/]["motorcar"=~/^(yes|permissive|designated)$/]::core_access,
node|z17-[barrier]["access"=~/^(yes|permissive|public)$/]["vehicle"=~/^(yes|permissive|designated)$/]::core_access {
    symbol-shape: square;
    symbol-size: 23;
    symbol-stroke-color: orange;
    symbol-stroke-width: 2;
    symbol-fill-color: #457585;
    symbol-fill-opacity: .7;
    z-index: -15;
}

node|z17-[barrier]["access"=~/^(no|private)$/]::node_no_access,
node|z17-[barrier]["motor_vehicle"=~/^(no|destination)$/]::node_no_access,
node|z17-[barrier]["vehicle"=~/^(no|destination)$/]::node_no_access,
node|z17-[barrier]["motorcar"=~/^(no|destination)$/]::node_no_access {
    symbol-shape: square;
    symbol-size: 23;
    symbol-stroke-color: red;
    symbol-stroke-width: 2;
    symbol-fill-color: #F5CB73;
    symbol-fill-opacity: .7;
    z-index: -15;
}

/****************/
/* Barrier Tags */
/****************/

way[barrier=bollard] {
    width: 2;
    color: barrier#F0F050;
    dashes: 3,9;
}
node[barrier=bollard] {
    icon-image: "presets/barrier/bollard.svg";
    set icon_z17;
}
node[barrier=gate] {
    icon-image: "presets/barrier/gate.svg";
    set icon_z17;
}
way[barrier=yes],
way[barrier=hedge],
way[barrier=fence],
way[barrier=handrail],
way[barrier=wall],
way[barrier=guard_rail],
way[barrier=cable_barrier],
way[barrier=city_wall],
way[barrier=retaining_wall],
way[barrier=block],
way[barrier=chain],
way[barrier=ditch],
way[barrier=jersey_barrier],
way[barrier=kerb] {
    width: 2;
    color: barrier#F0F050;
}
way[barrier=retaining_wall] {
    repeat-image: "presets/misc/cliff_pattern.svg";
    repeat-image-align: top;
}
way[barrier=kerb] {
    repeat-image: "presets/barrier/kerb_pattern.svg";
    repeat-image-align: top;
}
node[barrier=hedge],
node[barrier=wall],
node[barrier=guard_rail],
node[barrier=city_wall],
node[barrier=retaining_wall],
node[barrier=ditch] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}
node[barrier=kerb] {
    icon-image: "presets/barrier/kerb.svg";
    set icon_z17;
}
node[barrier=cable_barrier] {
    icon-image: "presets/barrier/cable_barrier.svg";
    set icon_z17;
}
node[barrier=block] {
    icon-image: "presets/barrier/block1.svg";
    set icon_z17;
}
node[barrier=chain] {
    icon-image: "presets/barrier/chain.svg";
    set icon_z17;
}
node[barrier=stile] {
    icon-image: "presets/barrier/stile.svg";
    set icon_z17;
}
node[barrier=turnstile] {
    icon-image: "presets/barrier/turnstile.svg";
    set icon_z17;
}
node[barrier=cycle_barrier] {
    icon-image: "presets/barrier/cycle_barrier.svg";
    set icon_z17;
}
node[barrier=lift_gate] {
    icon-image: "presets/barrier/lift_gate.svg";
    set icon_z17;
}
node[barrier=swing_gate] {
    icon-image: "presets/barrier/swing_gate.svg";
    set icon_z17;
}
area[barrier=toll_booth]:closed {
    fill-color: barrier#F0F050;
}
node[barrier=toll_booth] {
    icon-image: "presets/barrier/toll_station.svg";
    set icon_z17;
}
node|z12-25[highway=toll_gantry]{
  icon-image: "presets/vehicle/restriction/toll_gantry.svg";
  icon-height: 25;
  icon-width: 20;
}
node[barrier=entrance] {
    icon-image: "presets/barrier/entrance.svg";
    set icon_z17;
}
node[barrier=cattle_grid] {
    icon-image: "presets/barrier/cattle_grid.svg";
    set icon_z17;
}
node[barrier=border_control] {
    icon-image: "presets/barrier/douane.svg";
    set icon_z17;
}
node[barrier=sally_port] {
    icon-image: "presets/barrier/sally_port.svg";
    set icon_z17;
}
node[barrier=spikes] {
    icon-image: "presets/barrier/spikes.svg";
    set icon_z17;
}
node[barrier=jersey_barrier] {
    icon-image: "presets/barrier/jersey_barrier.svg";
    set icon_z17;
}
node[barrier=kissing_gate][!is_prop_set(icon-image)],
node[barrier=bump_gate][!is_prop_set(icon-image)],
node[barrier=bus_trap][!is_prop_set(icon-image)],
node[barrier=hampshire_gate][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}

/*****************************/
/* Building/Entrance/Address */
/*****************************/

way["addr:interpolation"=odd] {
    width: 1;
    color: address#1C86EE;
    dashes: 15,4;
}
way["addr:interpolation"=even] {
    width: 1;
    color: address#1C86EE;
    dashes: 4,4;
}
way["addr:interpolation"=all],
way["addr:interpolation"=alphabetic] {
    width: 1;
    color: address#1C86EE;
    dashes: 2,2;
}
area[building][!building?!] {
    fill-color: building#cb9999;
}
area[building=roof],
area[building][!building?!][wall?!],
area[building:part][!building:part?!] {
    fill-color: buildingpart#dcbbbb;
}
area[building=house] {
    fill-color: building#3D1608;
}
area[building=construction]{
    fill-color: #FFE500;
    width: 2;
    dashes: 9,9;
}
node[building][!building?!] {
    icon-image: "presets/landmark/building.svg";
    set icon_z17;
}
node[building=garage] {
    icon-image: "presets/landuse/garages.svg";
    set icon_z17;
}
node[building=transformer_tower] {
    icon-image: "presets/power/transformer_tower.svg";
    set icon_z17;
}
node[building=garages] {
    icon-image: "presets/landuse/garages.svg";
    set icon_z17;
}
node[entrance=yes],
node[entrance=home],
node[entrance=staircase] {
    icon-image: "presets/misc/entrance_yes.svg";
    set icon_z17;
}
node[entrance=main] {
    icon-image: "presets/misc/entrance_main.svg";
    set icon_z17;
}
node[entrance=service] {
    icon-image: "presets/misc/entrance_service.svg";
    set icon_z17;
}
node[entrance=exit] {
    icon-image: "presets/misc/entrance_exit.svg";
    set icon_z17;
}
node[entrance=emergency] {
    icon-image: "presets/misc/entrance_emergency.svg";
    set icon_z17;
}
node[building=entrance],
node[building:part] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}
area[area=yes] {
    fill-color: #7F0020;
    width: 2;
    dashes: 5,5;
}

/***********************/
/* Building Addr Style */
/***********************/

area[addr:housenumber][building] {
  set .addrBuilding;
}

area.addrBuilding[setting("Address_names")] {
    text: tag("addr:housenumber");
    text-position: inside;
    text-color: white;
    font-weight: bold;
    font-size: 12;
    text-halo-color: black;
    text-halo-radius: .8;
}

area|z12-17.addrBuilding[setting("Address_names")] {
  font-size: 8;
}

area|z18.addrBuilding[setting("Address_names")] {
  font-size: 11;
}


/*----------------------------------------------------------------------------------------------------------------------*\
                                                    Highway Styling
\*----------------------------------------------------------------------------------------------------------------------*/

way|z17-[motorroad=yes]::core_motorroad {
    major-z-index: 8;
    z-index: 8;
    repeat-image: "presets/vehicle/motorroad.svg";
    repeat-image-spacing: 385;
    repeat-image-width: 20;
}
way[highway=motorway] {
    z-index: 8;
    width: 7;
    casing-width: 1.5;
    casing-color: #1e375a;
    color: motorway#E46D31;
}
way[highway=motorway_link] {
    z-index: 8;
    width: 5;
    dashes: 9,9;
    casing-width: 1.5;
    casing-color: #1e375a;
    dashes-background-color: motordashed#E46D31;
    color: street#ffffff;
}
way[highway=trunk] {
    z-index: 7;
    width: 6;
    casing-width: 1.5;
    casing-color: #1e375a;
    color: trunk#809BC0;
    
}
way[highway=trunk_link] {
    z-index: 7;
    width: 5;
    casing-width: 1.5;
    casing-color: #1e375a;
    dashes: 9,9;
    dashes-background-color: trunkdashed#809BC0;
    color: street#ffffff;
}
way[highway=primary] {
    z-index: 6;
    width: 5;
    casing-width: 1;
    casing-color: #b80006;
    color: #CF8C8F;
}
way[highway=primary_link] {
    z-index: 6;
    width: 5;
    casing-width: 1;
    casing-color: #b80006;
    dashes: 9,9;
    dashes-background-color: primarydashed#E46D71;
    color: street#e0e0e0;
}
way[highway=secondary] {
    z-index: 5;
    width: 4.5;
    casing-width: 1.5;
    casing-color: #9B5B00;
    color: #f2bd79;
}
way[highway=secondary_link] {
    z-index: 5;
    width: 4;
    casing-width: 1.5;
    casing-color: #9B5B00;
    dashes: 9,9;
    dashes-background-color: secondarydashed#FDBF6F;
    color: street#ffffff;
}
way[highway=tertiary] {
    z-index: 4;
    width: 4;
    casing-width: 1.4;
    casing-color: #757500;
    color: #FFFDA6;
}
way[highway=tertiary_link] {
    z-index: 4;
    width: 4;
    casing-width: 1.4;
    casing-color: #757500;
    dashes: 9,9;
    dashes-background-color: tertiarydashed#FEFECB;
    color: tertiary#919191;
}
way[highway=unclassified] {
    z-index: 3;
    width: 4;
    casing-width: 1.3;
    casing-color: #443d3e;
    color: #b9b9b9;
}
way[highway=escape] {
    width: 3;
    casing-width: .3;
    casing-color: #443d3e;
    color: street#c0c0c0;
    dashes: 3,3;
}
way[highway=road] {
    z-index: 3;
    width: 4;
    casing-width: .3;
    casing-color: #443d3e;
    color: #770000;
}
way[highway=track][area?], relation[type=multipolygon][highway=track] {
    fill-color: highway_track#6e541c;
}
way[highway=track] {
    z-index: 3;
    width: 3;
    casing-width: .3;
    casing-color: #443d3e;
    color: highway_track#6e541c;
}
way[highway=residential] {
    z-index: 3; 
    width: 4;
    casing-width: .5;
    casing-color: #000000;
    color: street#E8E8E8;
}
way[highway=living_street] {
    z-index: 2;
    width: 5;
    casing-width: .2;
    casing-color: #443d3e;
    dashes: 9,9;
    dashes-background-color: livingdashed#00ff00;
    color: street#c0c0c0;
}
way[highway=service][area?], 
relation[type=multipolygon][highway=service] {
    fill-color: service#847e6b;
}
way[highway=service][!area?] {
    z-index: 3;
    width: 4;
    casing-width: .2;
    casing-color: #443d3e;
    color: service#45588c;
}
way[highway=service][service=alley],
way[highway=service][service=driveway],
way[highway=service][service=parking_aisle]
 {
    z-index: 3;
    width: 4;
    casing-width: .2;
    casing-color: #443d3e;
    dashes: 7, 15;
    dashes-background-color: servicedashed#45588c;
    color: service#5F04B4;
}
way[highway=service][service=drive-through]
 {
    z-index: 3;
    width: 4;
    casing-width: .2;
    casing-color: #443d3e;
    dashes: 7, 15;
    dashes-background-color: servicedashed#45588c;
    color: service#FFFF00;
}
way[highway=bridleway] {
    z-index: 3;
    width: 1;
    casing-width: .2;
    casing-color: #443d3e;
    color: horse#a18559;
}
way[highway=cycleway] {
    z-index: 3;
    width: 2;
    casing-width: .1;
    casing-color: #443d3e;
    color: bicycle#b100ff;
}
way[highway=footway][area?], relation[type=multipolygon][highway=footway] {
    fill-color: foot#aaee55;
}
way[highway=footway][!area?] {
    width: 3;
    color: foot#FF6644;
}
way[highway=footway][area] {
    width: 3;
    color: foot#FF6644;
    fill-color:#FF6644;
}
way[highway=path][bicycle!=designated][bicycle!=official][foot!=designated][foot!=official] {
    width: 3;
    dashes: 9,9;
    color: foot#FF6644;
}
way[highway=footway][footway=crossing] { 
    casing-dashes: 2,2; 
    casing-color: white;
    casing-width: .5;
}
way[highway=footway][footway=sidewalk] { 
    casing-color: gray;
    casing-width: 2;
}
area["area:highway"] {
    fill-color: #b9b9b9;
    color: #770000;
    width: 3;
    dashes: 9,9;
    dashes-background-color: #E8E8E8;
    fill-opacity: .3;
    fill-extent: none;
}

/* Display path with bicycle/foot=designated/official as if it was cycleway/footway */

way[highway=path][bicycle=designated],
way[highway=path][bicycle=official] {
    width: 2;
    color: bicycle#b100ff;
}
way[highway=path][foot=designated],
way[highway=path][foot=official],
way[highway=cycleway][foot=designated] {
    width: 3;
    dashes: 9,9;
    color: foot#FF6644;
}

way[highway=path][foot=no],
way[highway=pedestrian][foot=no] {
    z-index: 3;
    width: 2;
    color: bicycle#b100ff;
}
way[highway=path][bicycle=designated][foot=designated],
way[highway=path][bicycle=official][foot=official] {
    width: 3;
    color: bicycle#b100ff;
    dashes: 14,14;
    dashes-background-color: foot#FF6644;
}
way[highway=footway][bicycle=yes],
way[highway=footway][bicycle=designated],
way[highway=path][bicycle=yes][foot=designated],
way[highway=path][bicycle=yes][foot=official] { 
    z-index: -30; 
    color: walk#FF6644; 
    width: 2;  
}

way[highway=footway][bicycle=yes]::one,
way[highway=footway][bicycle=designated]::one,
way[highway=path][bicycle=yes][foot=designated]::one,
way[highway=path][bicycle=yes][foot=official]::one { 
    z-index: -10;
    color: bike#b100ff; 
    width: 4;  
    dashes: 7, 30 ; 
    linecap: round;
}
way[highway=footway][bicycle=yes]::two,
way[highway=footway][bicycle=designated]::two,
way[highway=path][bicycle=yes][foot=designated]::two,
way[highway=path][bicycle=yes][foot=official]::two { 
    z-index: -20;
    color: white; 
    width: 6;  
    dashes: 7, 30 ; 
    linecap: round;
}
way[highway=cycleway][foot=yes],
way[highway=cycleway][foot=designated],
way[highway=path][bicycle=designated][foot=yes],
way[highway=path][bicycle=official][foot=yes] { 
    z-index: -30; 
    color: bike#b100ff; 
    width: 2;  
}

way[highway=cycleway][foot=yes]::twoo,
way[highway=cycleway][foot=designated]::twoo,
way[highway=path][bicycle=designated][foot=yes]::twoo,
way[highway=path][bicycle=official][foot=yes]::twoo { 
    z-index: -10;
    color: walk#FF6644; 
    width: 4;  
    dashes: 7, 30 ; 
    linecap: round;
}
way[highway=cycleway][foot=yes]::threee,
way[highway=cycleway][foot=designated]::threee,
way[highway=path][bicycle=designated][foot=yes]::threee,
way[highway=path][bicycle=official][foot=yes]::threee { 
    z-index: -20;
    color: white; 
    width: 6;  
    dashes: 7, 30 ; 
    linecap: round;
}
way[highway=pedestrian][area?], relation[type=multipolygon][highway=pedestrian] {
    width: 3;
    color: foot#FF6644;
    fill-color: foot#FF6644;
}
way[highway=pedestrian] {
    width: 3;
    color: foot#FF6644;
}
way[highway=steps] {
    width: 3;
    color: foot#FF6644;
    dashes: 2,2; 
}

way[value] {
    width: 1;
    color: #f73e92;
}
way[highway=bus_guideway] {
    width: 1;
    color: rail#404040;
    dashes: 9,9;
}
way[highway=raceway] {
    width: 1;
    color: raceway#ff80ff;
}
way[highway=raceway][area?], relation[type=multipolygon][highway=raceway] {
    fill-color: raceway#ff80ff;
}

area[junction=yes] {
    fill-color: junction#c0c0c0;
}

/* Node Highway Styles */

node[junction=yes] {
    icon-image: "presets/vehicle/junction.svg";
    set icon_z17;
}
node[highway=traffic_mirror] {
    icon-image: "presets/vehicle/traffic_mirror.svg";
    set icon_z17;
}
node[highway=milestone] {
    icon-image: "presets/vehicle/milestone.svg";
    set icon_z17;
}
node[direction=clockwise] {
    icon-image: "presets/vehicle/restriction/roundabout_left.svg";
    set icon_z17;
}
node[highway=mini_roundabout] {
    icon-image: "presets/vehicle/restriction/mini_roundabout_left.svg";
    set icon_z17;
}
node:righthandtraffic[highway=mini_roundabout] {
    icon-image: "presets/vehicle/restriction/mini_roundabout_right.svg";
    set icon_z17;
}
node[highway=stop] {
    icon-image: "presets/vehicle/restriction/stop.svg";
    set icon_z17;
}
node[highway=give_way] {
    icon-image: "presets/vehicle/restriction/give_way.svg";
    set icon_z17;
}
node[cycleway=asl] {
    icon-image: "presets/vehicle/asl.svg";
    set icon_z17;
}
node[highway=traffic_signals] {
    icon-image: "presets/vehicle/traffic_signals.svg";
    set icon_z17;
}
node[highway=traffic_signals][crossing][crossing!=no] {
    icon-image: "presets/vehicle/traffic_signals_crossing.svg";
    set icon_z17;
}
node[highway=traffic_signals][crossing_ref=zebra] {
    icon-image: "presets/vehicle/traffic_signals_crossing_ref_zebra.svg";
    set icon_z17;
}
node[highway=traffic_signals][crossing:island=yes] {
    icon-image: "presets/vehicle/traffic_signals_crossing_island.svg";
    set icon_z17;
}
node[highway=traffic_signals][crossing=traffic_signals] {
    icon-image: "presets/vehicle/traffic_signals_crossing_traffic_signals.svg";
    set icon_z17;
}
node[highway=street_lamp] {
    icon-image: "presets/misc/streetlamp.svg";
    set icon_z17;
}
node[highway=speed_camera] {
    icon-image: "presets/vehicle/restriction/speed_camera.svg";
    set icon_z17;
}
relation[type=enforcement] >[role="device"] node {
    icon-image: "presets/vehicle/restriction/speed_camera.svg";
    set icon_z17;
}
node[traffic_sign=city_limit] {
    icon-image: "presets/vehicle/restriction/city_limit.svg";
    set icon_z17;
}
node[highway=crossing] {
    icon-image: "presets/vehicle/crossing.svg";
    set icon_z17;
}
node[highway=crossing][crossing!=no] {
    icon-image: "presets/vehicle/crossing.svg";
    set icon_z17;
}
node[highway=crossing][crossing=unmarked] {
    icon-image: "presets/vehicle/crossing_unmarked.svg";
    set icon_z17;
}
node[highway=crossing][crossing:island=yes] {
    icon-image: "presets/vehicle/crossing_island.svg";
    set icon_z17;
}
node[highway=crossing][crossing_ref=zebra] {
    icon-image: "presets/vehicle/crossing_ref_zebra.svg";
    set icon_z17;
}
node[highway=crossing][crossing=traffic_signals] {
    icon-image: "presets/vehicle/crossing_traffic_signals.svg";
    set icon_z17;
}
node[highway=motorway_junction] {
    icon-image: "presets/vehicle/motorway_junction.svg";
    set icon_z17;
    text: eval(cond(has_tag_key(ref), concat(tag(name), " (", tag(ref), ")"), tag(name)));
}
area[highway=services] {
    fill-color: services#c0c0c0;
}
node[highway=services] {
    icon-image: "presets/vehicle/services.svg";
    set icon_z17;
}
area[highway=rest_area] {
    fill-color: services#c0c0c0;
}
node[highway=rest_area] {
    icon-image: "presets/vehicle/rest_area.svg";
    set icon_z17;
}
node[ford=stepping_stone],
node[ford?] {
    icon-image: "presets/vehicle/ford.svg";
    set icon_z17;
}
way[ford=stepping_stone]::core_ford,
way[ford?]::core_ford {
    z-index: 1;
    width: 2;
    color: water#0000ff;
    dashes: 9,9;
    dashes-offset: 9;
}
area[highway=platform]:closed {
    fill-color: highway_platform#c0c0c0;
}
way[highway=platform] {
    width: 2;
    color: highway_platform#c0c0c0;
}
node[highway=turning_circle] {
    icon-image: "presets/vehicle/turning_circle.svg";
    set icon_z17;
}
node[highway=turning_loop] {
    icon-image: "presets/vehicle/turning_loop.svg";
    set icon_z17;
}
node[highway=passing_place] {
    icon-image: "presets/vehicle/passing_place.svg";
    set icon_z17;
}
area[highway=elevator] {
    fill-color: elevator#a6bace;
}
node[highway=elevator] {
    icon-image: "presets/service/elevator.svg";
    set icon_z17;
}
way[highway=construction] {
    width: 2;
    color: construction#ffff00;
    dashes: 9,9;
}
node[highway=construction] {
    icon-image: "presets/misc/construction.svg";
    set icon_z17;
}
area[highway=emergency_access_point] {
    fill-color: emergency_access_point#c0c0c0;
}
node[highway=emergency_access_point] {
    icon-image: "presets/service/emergency_access_point.svg";
    set icon_z17;
}

node[highway=motorway], node[highway=motorway_link],
node[highway=trunk], node[highway=trunk_link],
node[highway=primary], node[highway=primary_link],
node[highway=secondary], node[highway=secondary_link],
node[highway=tertiary], node[highway=tertiary_link],
node[highway=unclassified],
node[highway=road],
node[highway=unsurfaced],
node[highway=track],
node[highway=residential],
node[highway=living_street],
node[highway=service],
node[highway=bridleway],
node[highway=cycleway],
node[highway=footway],
node[highway=path],
node[highway=pedestrian],
node[highway=bus_guideway],
node[highway=platform] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}

/************************/ 
/* Traffic_calming Tags */ 
/************************/

node[traffic_calming] {
    icon-image: "presets/vehicle/traffic_calming.svg";
    set icon_z17;
}
node[traffic_calming=chicane] {
    icon-image: "presets/vehicle/chicane.svg";
    set icon_z17;
}
node[traffic_calming=choker] {
    icon-image: "presets/vehicle/choker.svg";
    set icon_z17;
}
node[traffic_calming=island] {
    icon-image: "presets/vehicle/island.svg";
    set icon_z17;
}
node[traffic_calming=bump] {
    icon-image: "presets/vehicle/bump.svg";
    set icon_z17;
}
node[traffic_calming=hump] {
    icon-image: "presets/vehicle/hump.svg";
    set icon_z17;
}
node[traffic_calming=table] {
    icon-image: "presets/vehicle/table.svg";
    set icon_z17;
}
node[traffic_calming=cushion] {
    icon-image: "presets/vehicle/cushion.svg";
    set icon_z17;
}
node[traffic_calming=rumble_strip] {
    icon-image: "presets/vehicle/rumble_strip.svg";
    set icon_z17;
}
node[traffic_calming=dip] {
  icon-image: "presets/vehicle/dip.svg";
  set icon_z17
}


/****************/
/* Junction Tag */
/****************/

node[junction=roundabout] {
    icon-image: "presets/vehicle/restriction/roundabout_left.svg";
    set icon_z17;
}
node:righthandtraffic[junction=roundabout] {
    icon-image: "presets/vehicle/restriction/roundabout_right.svg";
    set icon_z17;
}

/*****************/
/* Cycleway Tags */
/*****************/

/* Prepare Lane */
way[oneway?][cycleway=lane]:righthandtraffic::core_cycleway,
way[oneway=-1][cycleway=opposite_lane]:righthandtraffic::core_cycleway {
    set laneRight;
    set righthandtr;
}
way[oneway?][cycleway=opposite_lane]:righthandtraffic::core_cycleway,
way[oneway=-1][cycleway=lane]:righthandtraffic::core_cycleway {
    set laneLeft;
    set righthandtr;
}
way[oneway?][cycleway=lane]!.righthandtr::core_cycleway,
way[oneway=-1][cycleway=opposite_lane]!.righthandtr::core_cycleway {
    set laneLeft;
}
way[oneway?][cycleway=opposite_lane]!.righthandtr::core_cycleway,
way[oneway=-1][cycleway=lane]!.righthandtr::core_cycleway {
    set laneRight;
}
way[cycleway:left=lane]::core_cycleway {
    set laneLeft;
}
way[cycleway:right=lane]::core_cycleway {
    set laneRight;
}
way[oneway=no][cycleway=lane]::core_cycleway,
way[!oneway][cycleway=lane]::core_cycleway {
    set laneLeft;
    set laneRight;
}

/* Prepare Shared_lane */
way[oneway?][cycleway=shared_lane]:righthandtraffic::core_cycleway {
    set shared_laneRight;
    set righthandtr;
}
way[oneway=-1][cycleway=shared_lane]:righthandtraffic::core_cycleway {
    set shared_laneLeft;
    set righthandtr;
}
way[oneway?][cycleway=shared_lane]!.righthandtr::core_cycleway {
    set shared_laneLeft;
}
way[oneway=-1][cycleway=shared_lane]!.righthandtr::core_cycleway {
    set shared_laneRight;
}
way[cycleway:left=shared_lane]::core_cycleway {
    set shared_laneLeft;
}
way[cycleway:right=shared_lane]::core_cycleway {
    set shared_laneRight;
}
way[oneway=no][cycleway=shared_lane]::core_cycleway,
way[!oneway][cycleway=shared_lane]::core_cycleway {
    set shared_laneLeft;
    set shared_laneRight;
}

/* Prepare Track */
way[oneway?][cycleway=track]:righthandtraffic::core_cycleway,
way[oneway=-1][cycleway=opposite_track]:righthandtraffic::core_cycleway {
    set trackRight;
    set righthandtr;
}
way[oneway?][cycleway=opposite_track]:righthandtraffic::core_cycleway,
way[oneway=-1][cycleway=track]:righthandtraffic::core_cycleway {
    set trackLeft;
    set righthandtr;
}
way[oneway?][cycleway=track]!.righthandtr::core_cycleway,
way[oneway=-1][cycleway=opposite_track]!.righthandtr::core_cycleway {
    set trackLeft;
}
way[oneway?][cycleway=opposite_track]!.righthandtr::core_cycleway,
way[oneway=-1][cycleway=track]!.righthandtr::core_cycleway {
    set trackRight;
}
way[cycleway:left=track]::core_cycleway {
    set trackLeft;
}
way[cycleway:right=track]::core_cycleway {
    set trackRight;
}
way[oneway=no][cycleway=track]::core_cycleway,
way[!oneway][cycleway=track]::core_cycleway {
    set trackLeft;
    set trackRight;
}

/******************/
/* Tracktype Tags */
/******************/

way[highway=track][tracktype=grade1] {
    dashes: 8,1;
}
way[highway=track][tracktype=grade2] {
    dashes: 6,2;
}
way[highway=track][tracktype=grade3] {
    dashes: 4,3;
}
way[highway=track][tracktype=grade4] {
    dashes: 4,5;
}
way[highway=track][tracktype=grade5] {
    dashes: 4,7;
}

/*****************************/
/* Alternative Highway Style */
/*****************************/


way[highway=motorway][setting("Alt_Highways_setting")] {
    z-index: 8;
    width: 7;
    color: motorway#FA8E05;
}
way[highway=motorway_link][setting("Alt_Highways_setting")] {
    z-index: 8;
    width: 7;
    dashes: 9,9;
    dashes-background-color: motordashed#E46D31;
    color: street#ffffff;
}
way[highway=trunk][setting("Alt_Highways_setting")] {
    z-index: 7;
    width: 5;
    color: trunk#809BC0;
}
way[highway=trunk_link][setting("Alt_Highways_setting")] {
    z-index: 7;
    width: 5;
    dashes: 9,9;
    dashes-background-color: trunkdashed#809BC0;
    color: street#ffffff;
}
way[highway=primary][setting("Alt_Highways_setting")] {
    z-index: 6;
    width: 4;
    casing-width: 0;
    casing-color: #E46D71;
    color: #E46D71;
}
way[highway=primary_link][setting("Alt_Highways_setting")] {
    z-index: 6;
    width: 4;
    dashes: 9,9;
    dashes-background-color: primarydashed#E46D71;
    color: street#e0e0e0;
}
way[highway=secondary][setting("Alt_Highways_setting")] {
    z-index: 5;
    width: 4;
    casing-width: 0;
    casing-color: #FDBF6F;
    color: #FDBF6F;  
}
way[highway=secondary_link][setting("Alt_Highways_setting")] {
    z-index: 5;
    width: 4;
    dashes: 9,9;
    dashes-background-color: secondarydashed#FDBF6F;
    color: street#ffffff;
}
way[highway=tertiary][setting("Alt_Highways_setting")] {
    z-index: 4;
    width: 4;
    casing-width: 0.2;
    casing-color: #FEFECB;
    color: #FEFECB;
}
way[highway=tertiary_link][setting("Alt_Highways_setting")] {
    z-index: 4;
    width: 3; 
    dashes: 9,9;
    dashes-background-color: tertiarydashed#FFFFFF;
    color: tertiary#DEC143;
}
way[highway=unclassified][setting("Alt_Highways_setting")] {
    z-index: 3;
    width: 4;
    color: highway_unclassified#d5a6bd;
    casing-width: 0.1;
    casing-color: #d5a6bd;
}

/******************************/
/* Street Name Labels Default */
/******************************/

way|z14-[highway^=motorway],
way|z15-[highway^=trunk],
way|z15-[highway^=primary],
way|z15-[highway^=secondary],
way|z15-[highway^=tertiary],
way|z16-[highway=unclassified],
way|z16-[highway=residential],
way|z16-[highway=living_street],
way|z16-[highway=pedestrian],
way|z16-[highway=service],
way|z16-[highway=road],
way|z16-[highway=track],
way|z16-[highway=cycleway] {
    text: auto;
    text-color: white;
    font-size: 9;
    font-weight: bold;
    text-position: line;
    text-halo-opacity: 1;
    text-halo-radius: 1.7;
    text-halo-color: black;
}

/************************/
/* Roundabout Rendering */
/************************/

way[highway=motorway][junction=roundabout] {
    z-index: 8;
    width: 7;
    casing-width: 1.5;
    casing-color: #1e375a;
    color: #E46D31;
    dashes: 25, 15;
    dashes-background-color: #191919;
    dashes-background-opacity: 0.9;
}
way[highway=trunk][junction=roundabout] {
    z-index: 7;
    width: 6;
    casing-width: 1.5;
    casing-color: #1e375a; 
    color: #809BC0;
    dashes: 25, 15;
    dashes-background-color: #191919;
    dashes-background-opacity: 0.9;
}
way[highway=primary][junction=roundabout] {
    z-index: 6;
    width: 5;
    casing-width: 1;
    casing-color: #b80006;
    color: #CF8C8F;
    dashes: 25,15;
    dashes-background-color: #191919;
    dashes-background-opacity: 0.9;
}
way[highway=secondary][junction=roundabout] {
    z-index: 5;
    width: 4.5;
    casing-width: 1.5;
    casing-color: #9B5B00;
    color: #f2bd79;
    dashes: 25,15;
    dashes-background-color: #191919;
    dashes-background-opacity: 0.9;
}
way[highway=tertiary][junction=roundabout] {
    z-index: 4;
    width: 4;
    casing-width: 1.4;
    casing-color: #757500;
    color: #FFFDA6;
    dashes: 25,15;
    dashes-background-color: #191919;
    dashes-background-opacity: 0.9;
}
way[highway=residential][junction=roundabout] {
    z-index: 3;
    width: 4;
    casing-width: .5;
    casing-color: #000000;
    color: #E8E8E8;
    dashes: 25,15;
    dashes-background-color: #191919;
    dashes-background-opacity: 0.9;
}
way[highway=service][junction=roundabout] {
    z-index: 3;
    width: 4;
    casing-width: .2;
    casing-color: #443d3e;
    color: #45588c;
    dashes: 25,15;
    dashes-background-color: #191919;
    dashes-background-opacity: 0.9;
}
way[highway=unclassified][junction=roundabout] {
    z-index: 3;
    width: 4;
    casing-width: 1.3;
    casing-color: #443d3e;
    color: #b9b9b9;
    dashes: 25,15;
    dashes-background-color: #191919;
    dashes-background-opacity: 0.9;
}
way[highway=track][junction=roundabout] {
    z-index: 3; 
    width: 3;
    casing-width:.3;
    dashes-background-color: rndtrack#000000;
    color: track#6e541c;
    dashes: 25,15;
    dashes-background-color: #191919;
    dashes-background-opacity: 0.9;
}

area[junction=roundabout][highway=motorway_link][setting("val_checks")],
area[junction=roundabout][highway=trunk_link][setting("val_checks")],
area[junction=roundabout][highway=primary_link][setting("val_checks")],
area[junction=roundabout][highway=secondary_link][setting("val_checks")],
area[junction=roundabout][highway=tertiary_link][setting("val_checks")] {
    color: orange;
    dashes-background-color: red;
    dashes: 4,9;
    opacity: 1;
    width: 16;
    text: tr("Incorrect Value");
    text-color: black;
    font-size: 31;
    text-halo-color: red;
    text-halo-radius: 2;
    casing-width: 1;
    casing-color: yellow;

}

/* Alt Settings For Roundabouts */


way[highway=motorway][junction=roundabout][setting("Alt_Highways_setting")] {
    z-index: 8;
    width: 4;
    casing-width: 2;
    casing-color: motorway#FA8E05;
    color: #443d3e;
    dashes: 15, 15;
}
way[highway=unclassified][junction=roundabout][setting("Alt_Highways_setting")] {
    z-index: 3;
    width: 3;
    casing-width: 2;
    casing-color: highway_unclassified#d5a6bd;
    color: #443d3e;
    dashes: 15, 15;
}


/* Circular Junction */

way[highway=motorway][junction=circular] {
    z-index: 8;
    width: 4;
    casing-width: 2;
    casing-color: #E46D31;
    color: #EA004F;
    dashes: 15, 15;
}
way[highway=trunk][junction=circular] {
    z-index: 7;
    width: 3.7;
    casing-width: 2;
    casing-color: #809BC0; 
    color: #EA004F;
    dashes: 15, 15;
}
way[highway=primary][junction=circular] {
    z-index: 6;
    width: 3.1;
    casing-width: 2;
    casing-color: #E46D71;
    color: #EA004F;
    dashes: 15, 15;
}
way[highway=secondary][junction=circular] {
    z-index: 5;
    width: 3;
    casing-width: 2;
    casing-color: #FDBF6F;
    color: #EA004F;
    dashes: 15, 15;
}
way[highway=tertiary][junction=circular] {
    z-index: 4;
    width: 3;
    casing-width: 2;
    casing-color: #FEFECB;
    color: #EA004F;
    dashes: 15, 15;
}
way[highway=residential][junction=circular] {
    z-index: 3;
    width: 2.8;
    casing-width: 1;
    casing-color: #E8E8E8;
    color: #EA004F;
    dashes: 15, 15;
}
way[highway=service][junction=circular] {
    z-index: 3;
    width: 2.8;
    casing-width: 1.3;
    casing-color: #45588c;
    color: #EA004F;
    dashes: 15, 15;
}
way[highway=unclassified][junction=circular] {
    z-index: 3;
    width: 4;
    casing-width: 2;
    casing-color: #b9b9b9;
    color: #EA004F;
    dashes: 15, 15;
}
way[highway=track][junction=circular] {
    z-index: 3; 
    width: 4;
    dashes-background-color: rndtrack#EA004F;
    color: track#6e541c;
    dashes: 15,15;
}

/* Alt Settings for Junction Circular */

way[highway=motorway][junction=circular][setting("Alt_Highways_setting")] {
    z-index: 8;
    width: 7;
    casing-width: 2;
    casing-color: motorway#FA8E05;
    color: #EA004F;
    dashes: 15, 15;
}
way[highway=unclassified][junction=circular][setting("Alt_Highways_setting")] {
    z-index: 3;
    width: 4;
    casing-width: 2;
    casing-color: #443d3e;
    color: highway_unclassified#d5a6bd;
    dashes: 15, 15;
}

/*******************************/
/* Pedestrian Access Display */
/*******************************/

way|z15-["highway"=~/^(trunk|primary|secondary|trunk_link|primary_link|secondary_link|tertiary|tertiary_link|unclassified|residential|service|living_street|track|road|pedestrian|footway|bridleway|steps|path)$/] {
  set    .pedestrian_access;
}
way[highway][setting("pedestrian")] {
  width: 3;
}
way|z15-["highway"=~/^(motorway|motorway_link)$/][setting("pedestrian")]  {
    casing-color: #cf142b; 
    casing-width: 3;
    casing-opacity: 0.5;
}
way|z15-["highway"=~/^(motorway|motorway_link)$/][setting("pedestrian")]::motorwayaccess  {
    repeat-image: "presets/No-Pedestrians.png";
    repeat-image-spacing: 200;
    repeat-image-width: 20;
    repeat-image-phase: 40;
    major-z-index: 5;
}
way|z15-[highway=cycleway][foot!~/yes|designated|official|permissive|destination/][setting("pedestrian")]  {
    casing-color: #cf142b; 
    casing-width: 3;
    casing-opacity: 0.5;
}
way|z15-[highway=cycleway][foot!~/yes|designated|official|permissive|destination/][setting("pedestrian")]::cyclewayaccess  {
    repeat-image: "presets/No-Pedestrians.png";
    repeat-image-spacing: 200;
    repeat-image-width: 20;
    repeat-image-phase: 40;
    major-z-index: 5;
}
/* Sidewalk Styling */
way.pedestrian_access["sidewalk"=~/^(yes|both|separate)$/][setting("pedestrian")] { 
    casing-color: #00ab66; 
    casing-width: 4;
    casing-dashes: 2,7,2,3 ;
    casing-opacity: 0.6;  
}
way.pedestrian_access[sidewalk=right][setting("pedestrian")] { 
    casing-color: #00ab66; 
    casing-width: 4;
    casing-dashes: 2,7,2,3 ;
    casing-offset: -4;
    casing-opacity: 0.6; 
}
way.pedestrian_access[sidewalk=left][setting("pedestrian")] { 
    casing-color: #00ab66; 
    casing-width: 4;
    casing-dashes: 2,7,2,3 ;
    casing-offset: 4;
    casing-opacity: 0.6;  
}
/* Foot=* Styling */
way|z15-[highway=cycleway]["foot"=~/^(yes|designated|official|permissive|destination)$/][setting("pedestrian")]  {
    casing-color: #00ab66; 
    casing-width: 4;
    casing-opacity: 0.3;
}
way.pedestrian_access["foot"=~/^(no|none|private)$/][setting("pedestrian")] {
    casing-color: #cf142b; 
    casing-width: 4;
    casing-opacity: 0.4;
}
way["foot"=~/^(no|none|private)$/][setting("pedestrian")]::imagelayer {
    repeat-image: "presets/No-Pedestrians.png";
    repeat-image-spacing: 200;
    repeat-image-width: 20;
    repeat-image-phase: 40;
    major-z-index: 5; 
}
way.pedestrian_access["foot"=~/^(yes|designated|official|permissive|destination)$/][setting("pedestrian")] { 
    casing-color: #00ab66; 
    casing-width: 4;
    casing-opacity: 0.3;
}
way["foot"=~/^(yes|designated|official|permissive|destination)$/][setting("pedestrian")]::imagelayer2 { 
    repeat-image: "presets/ped_access_allowed.png";
    repeat-image-spacing: 200;
    repeat-image-width: 20;
    repeat-image-phase: 40;
    major-z-index: 5;
}
way.pedestrian_access["foot"=~/^(yes|designated|official|permissive|destination)$/][sidewalk][setting("pedestrian")] { 
    casing-color: #00ab66; 
    casing-width: 4;
    casing-opacity: 0.6;
}
way.pedestrian_access[setting("pedestrian")][!sidewalk][!foot] { 
    casing-color: #00ab66; 
    casing-width: 4;
    casing-opacity: 0.3;
}

/*----------------------------------------------------------------------------------------------------------------------*\
                                              General Tags (POI, Natural, Transport)
\*----------------------------------------------------------------------------------------------------------------------*/

/*---------------*\
        POI 
\*---------------*/


/*****************/
/* Man_made Tags */
/*****************/

area[man_made=beacon],
area[man_made=bridge],
area[bridge:support],
area[man_made=chimney],
area[man_made=gasometer],
area[man_made=silo],
area[man_made=storage_tank],
area[man_made=bunker_silo],
area[man_made=lighthouse],
area[man_made=monitoring_station],
area[man_made=mineshaft] {
    fill-color: manmade#d8d8d8;
}
node[man_made=beacon] {
    icon-image: "presets/landmark/beacon.svg";
    set icon_z17;
}
node[man_made=bridge] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}
node[bridge:support] {
    icon-image: "presets/transport/bridge/bridge_support.svg";
    set icon_z17;
}
node[man_made=chimney] {
    icon-image: "presets/landmark/chimney.svg";
    set icon_z17;
}
node[man_made=flagpole] {
    icon-image: "presets/misc/flag.svg";
    set icon_z17;
}
node[man_made=cross] {
    icon-image: "presets/landmark/cross.svg";
    set icon_z17;
}
node[man_made=gasometer] {
    icon-image: "presets/landmark/gasometer.svg";
    set icon_z17;
}
node[man_made=silo] {
    icon-image: "presets/landmark/silo.svg";
    set icon_z17;
}
node[man_made=storage_tank] {
    icon-image: "presets/landmark/storage_tank.svg";
    set icon_z17;
}
node[man_made=bunker_silo] {
    icon-image: "presets/landmark/bunker_silo.svg";
    set icon_z17;
}
area[man_made=groyne]:closed {
    fill-color: manmade#d8d8d8;
}
way[man_made=groyne] {
    width: 2;
    color: manmade#d8d8d8;
}
area[man_made=breakwater]:closed {
    fill-color: manmade#d8d8d8;
}
way[man_made=breakwater] {
    width: 2;
    color: manmade#d8d8d8;
}
way[man_made=dyke]::man_made_dyke {
    width: 4;
    color: dyke#0aa846;
    z-index: -2;
    object-z-index: -1;
    modifier: false;
}
node[man_made=dyke] {
    icon-image: "presets/misc/dyke.svg";
    set icon_z17;
}
node[man_made=lighthouse] {
    icon-image: "presets/landmark/lighthouse.svg";
    set icon_z17;
}
node[man_made=monitoring_station] {
    icon-image: "presets/misc/monitoring_station.svg";
    set icon_z17;
}
node[man_made=mineshaft] {
    icon-image: "presets/landmark/mine.svg";
    set icon_z17;
}
area[man_made=crane]:closed {
    fill-color: manmade#d8d8d8;
}
way[man_made=crane] {
    width: 2;
    color: manmade#d8d8d8;
}
node[man_made=crane] {
    icon-image: "presets/landmark/crane.svg";
    set icon_z17;
}
node[man_made=adit] {
    icon-image: "presets/landmark/adit.svg";
    set icon_z17;
}
area[man_made=pier]:closed {
    fill-color: pier#660000;
    text: eval(tag("name"));
    text-offset: -20;
    text-halo-radius: 1.2;
    text-halo-color: black;
    text-color: white;
    font-size: 15;
}
way[man_made=pier] {
    width: 8;
    dashes:2,2;
    color: pier#660000;
    text: eval(tag("name"));
    text-offset: -20;
    text-halo-radius: 1.2;
    text-halo-color: black;
    text-color: white;
    font-size: 15;
}
node[man_made=pier] {
    set icon_z17;
    icon-width: 15;
    text: eval(tag("name"));
    text-offset: -20;
    text-halo-radius: 1.2;
    text-halo-color: black;
    text-color: white;
    font-size: 15;
}
way[embankment?][!highway][!railway][!waterway],
way[man_made=embankment][!highway][!railway][!waterway] {
    repeat-image: "presets/misc/embankment-pattern.png";
    repeat-image-align: top;
    width: 1;
    color: embankment#c14d00;
}
way[embankment?][highway]::embankment_layer,
way[embankment?][railway]::embankment_layer,
way[embankment?][waterway]::embankment_layer {
    repeat-image: "presets/misc/embankment-pattern-centered.png";
}
way[man_made=embankment][highway]::embankment_layer,
way[man_made=embankment][railway]::embankment_layer,
way[man_made=embankment][waterway]::embankment_layer {
    repeat-image: "presets/misc/embankment-pattern.png";
    repeat-image-align: top;
    repeat-image-offset: -1;
}
way[man_made=pipeline][!waterway] {
    width: 2;
    color: pipeline#660000;
}
node[marker] {
    icon-image: "presets/misc/pipeline_marker.svg";
    set icon_z17;   
}
node[pipeline=valve] {
    icon-image: "presets/misc/valve.svg";
    set icon_z17;
}
node[man_made=manhole] {
    icon-image: "presets/misc/manhole.svg";
    set icon_z17;
}
node[man_made=breakwater],
node[man_made=groyne],
node[man_made=embankment],
node[man_made=pipeline] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}
node[man_made=petroleum_well][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
area[man_made=reservoir_covered],
area[man_made=tower],
area[man_made=wastewater_plant],
area[man_made=watermill],
area[man_made=water_tower],
area[man_made=water_well],
area[man_made=windmill],
area[man_made=works],
area[man_made=water_works] {
    fill-color: manmade#d8d8d8;
}
node[man_made=reservoir_covered] {
    icon-image: "presets/landmark/reservoir_covered.svg";
    set icon_z17;
}
node[man_made=surveillance] {
    icon-image: "presets/service/surveillance.svg";
    set icon_z17;
}
node[man_made=survey_point] {
    icon-image: "presets/landmark/survey_point.svg";
    set icon_z17;
}
node[man_made=tower] {
    icon-image: "presets/landmark/tower.svg";
    set icon_z17;
}
node[man_made=wastewater_plant] {
    icon-image: "presets/landmark/wastewater_plant.svg";
    set icon_z17;
}
node[man_made=watermill] {
    icon-image: "presets/landmark/watermill.svg";
    set icon_z17;
}
node[man_made=water_tower] {
    icon-image: "presets/landmark/water_tower.svg";
    set icon_z17;
}
node[man_made=water_well] {
    icon-image: "presets/landmark/water_well.svg";
    set icon_z17;
}
node[man_made=windmill] {
    icon-image: "presets/landmark/windmill.svg";
    set icon_z17;
}
node[man_made=works] {
    icon-image: "presets/landmark/works.svg";
    set icon_z17;
}
node[man_made=water_works] {
    icon-image: "presets/landmark/water_works.svg";
    set icon_z17;
}
way[man_made=cutline] {
    width: 2;
    color: cutline#99ff55;
}
node[man_made=cutline] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}

/****************/
/* telecom tags */
/****************/
 
area[telecom=exchange],
area[telecom=connection_point],
area[telecom=service_device] {
    fill-color: telecom#d8d8d8;
}
node[telecom=exchange] {
    icon-image: "presets/telecom/exchange.svg";
    set icon_z17;
}
node[telecom=connection_point] {
    icon-image: "presets/telecom/connection_point.svg";
    set icon_z17;
}
node[telecom=service_device] {
    icon-image: "presets/telecom/service_device.svg";
    set icon_z17;
}
node[man_made=street_cabinet] {
    icon-image: "presets/telecom/telecom_cabinet.svg";
    set icon_z17;
}
node[man_made=street_cabinet][street_cabinet=telecom] {
    icon-image: "presets/telecom/telecom_cabinet.svg";
    set icon_z17;
}

/***************/
/* Office Tags */
/***************/

area[office=accountant],
area[office=administrative],
area[office=advertising_agency],
area[office=architect],
area[office=association],
area[office=company],
area[office=educational_institution],
area[office=employment_agency],
area[office=estate_agent],
area[office=foundation],
area[office=government],
area[office=insurance],
area[office=it],
area[office=lawyer],
area[office=newspaper],
area[office=ngo],
area[office=notary],
area[office=political_party],
area[office=religion],
area[office=research],
area[office=tax_advisor],
area[office=telecommunication] {
    fill-color: office#de5696;
}

node[office=yes] {
    icon-image: "presets/office/private_company.svg";
    set icon_z17;
}
node[office=accountant] {
    icon-image: "presets/office/accountant.svg";
    set icon_z17;
}
node[office=administrative] {
    icon-image: "presets/office/administrative.svg";
    set icon_z17;
}
node[office=advertising_agency] {
    icon-image: "presets/office/advertising_agency.svg";
    set icon_z17;
}
node[office=architect] {
    icon-image: "presets/office/architect.svg";
    set icon_z17;
}
node[office=association] {
    icon-image: "presets/office/association.svg";
    set icon_z17;
}
node[office=company] {
    icon-image: "presets/office/private_company.svg";
    set icon_z17;
}
node[office=educational_institution] {
    icon-image: "presets/office/educational_institution.svg";
    set icon_z17;
}
node[office=employment_agency] {
    icon-image: "presets/office/employment_agency.svg";
    set icon_z17;
}
node[office=estate_agent] {
    icon-image: "presets/office/real_state.svg";
    set icon_z17;
}
node[office=foundation] {
    icon-image: "presets/office/foundation.svg";
    set icon_z17;
}
node[office=insurance] {
    icon-image: "presets/office/insurance.svg";
    set icon_z17;
}
node[office=it] {
    icon-image: "presets/office/it.svg";
    set icon_z17;
}
node[office=lawyer] {
    icon-image: "presets/office/lawyer.svg";
    set icon_z17;
}
node[office=newspaper] {
    icon-image: "presets/office/newspaper.svg";
    set icon_z17;
}
node[office=ngo] {
    icon-image: "presets/office/ong.svg";
    set icon_z17;
}
node[office=notary] {
    icon-image: "presets/office/notary.svg";
    set icon_z17;
}
node[office=political_party] {
    icon-image: "presets/office/political_party.svg";
    set icon_z17;
}
node[office=religion] {
    icon-image: "presets/office/religion.svg";
    set icon_z17;
}
node[office=research] {
    icon-image: "presets/office/research.svg";
    set icon_z17;
}
node[office=tax_advisor] {
    icon-image: "presets/office/tax_advisor.svg";
    set icon_z17;
}
node[office=telecommunication] {
    icon-image: "presets/office/telecommunication.svg";
    set icon_z17;
}
node[office=government] {
    icon-image: "presets/office/government.svg";
    set icon_z17;
}

/****************/
/* Leisure Tags */
/****************/

area[leisure=sports_centre],
area[leisure=fitness_centre],
area[leisure=stadium],
area[leisure=horse_riding],
area[leisure=beach_resort],
area[leisure=resort],
area[leisure=water_park] {
    fill-color: leisure#c7f1a3;
}
node[leisure=sports_centre] {
    icon-image: "presets/sport/sports_centre.svg";
    set icon_z17;
}
node[leisure=fitness_centre] {
    icon-image: "presets/sport/fitness_centre.svg";
    set icon_z17;
}
node[leisure=stadium] {
    icon-image: "presets/sport/stadium.svg";
    set icon_z17;
}
node[leisure=horse_riding] {
    icon-image: "presets/leisure/horse_riding.svg";
    set icon_z17;
}
node[leisure=resort] {
    icon-image: "presets/leisure/resort.svg";
    set icon_z17;
}
node[leisure=beach_resort] {
    icon-image: "presets/leisure/beach_resort.svg";
    set icon_z17;
}
node[leisure=water_park] {
    icon-image: "presets/leisure/water_park.svg";
    set icon_z17;
}
way[leisure=track][area?],
relation[leisure=track][!area?!]:closed {
    fill-color: leisuretrack#d4f4b9;
}
way[leisure=track] {
    width: 2;
    color: leisuretrack#d4f4b9;
}
node[leisure=track] {
    icon-image: "presets/sport/track.svg";
    set icon_z17;
}
area[leisure=pitch] {
    fill-color: pitch#baee8d;
}
node[leisure=pitch] {
    icon-image: "presets/sport/pitch.svg";
    set icon_z17;
}
area[leisure=marina] {
    fill-color: marina#0070cf;
}
node[leisure=marina] {
    icon-image: "presets/nautical/marina.svg";
    set icon_z17;
}
way[leisure=slipway] {
    width: 2;
    color: leisure#c7f1a3;
}
node[leisure=slipway] {
    icon-image: "presets/nautical/slipway.svg";
    set icon_z17;
}
area[leisure=fishing],
area[leisure=bird_hide],
area[leisure=nature_reserve],
area[leisure=park],
area[leisure=playground],
area[leisure=garden],
area[leisure=firepit] {
    fill-color: leisure#c7f1a3;
}
node[leisure=fishing] {
    icon-image: "presets/sport/fishing.svg";
    set icon_z17;
}
node[leisure=bird_hide] {
    icon-image: "presets/leisure/bird_hide.svg";
    set icon_z17;
}
node[leisure=park] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}
node[leisure=playground] {
    icon-image: "presets/leisure/playground.svg";
    set icon_z17;
}
node[leisure=garden] {
    icon-image: "presets/leisure/garden.svg";
    set icon_z17;
}
node[leisure=common] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}
node[leisure=firepit] { 
    icon-image: "presets/leisure/firepit.svg";
    set icon_z17;
}
node[leisure=picnic_table] {
    icon-image: "presets/leisure/picnic.svg";
    set icon_z17;
}
area[leisure=swimming_pool] {
    fill-color: swimming_pool#51c4ef;
}
node[leisure=swimming_pool] {
    icon-image: "presets/sport/swimming.svg";
    set icon_z17;
}
area[leisure=fitness_center],
area[leisure=miniature_golf],
area[leisure=dog_park],
area[leisure=ice_rink],
area[leisure=sauna],
area[leisure=golf_course] {
    fill-color: leisure#c7f1a3;
}
node[leisure=fitness_center] {
    icon-image: "presets/leisure/fitness_station.svg";
    set icon_z17;
}
node[leisure=miniature_golf] {
    icon-image: "presets/sport/miniature_golf.svg";
    set icon_z17;
}
node[leisure=dog_park] {
    icon-image: "presets/leisure/dogpark.svg";
    set icon_z17;
}
node[leisure=ice_rink] {
    icon-image: "presets/sport/ice_hockey.svg";
    set icon_z17;
}
node[leisure=sauna] {
    icon-image: "presets/leisure/sauna.svg";
    set icon_z17;
}
node[leisure=golf_course] {
    icon-image: "presets/sport/golf/golf.svg";
    set icon_z17;
}

/*************/
/* Golf Tags */
/*************/

area[golf=tee] {
    fill-color: golf#c7f1a3;
}
node[golf=tee] {
    icon-image: "presets/sport/golf/tee.svg";
    set icon_z17;
}
way[golf=hole] {
    width: 1;
    dashes: 10,10;
    color: golf_hole#808080;
}
node[golf=pin] {
    icon-image: "presets/sport/golf/pin.svg";
    set icon_z17;
}
area[golf=bunker] {
    fill-color: golf_bunker#ffab00;
}
area[golf=water_hazard],
area[golf=lateral_water_hazard] {
    fill-color: golf_water_hazard#0000ff;
}
area[golf=green] {
    fill-color: golf_green#00e700;
}
area[golf=fairway] {
    fill-color: golf_fairway#009a00;
}
area[golf=rough] {
    fill-color: golf_rough#006700;
}
area[golf=driving_range] {
    fill-color: golf_driving_range#c7f1a3;
}
node[golf=driving_range] {
    icon-image: "presets/sport/golf/driving_range.svg";
    set icon_z17;
}
/********************/
/* Advertising Tags */
/********************/

node[advertising=column] {
    icon-image: "presets/leisure/advertising_column.svg";
    set icon_z17;
}
area[advertising=column] {
    fill-color: advertising#880000;
}
node[advertising=billboard] {
    icon-image: "presets/leisure/billboard.svg";
    set icon_z17;
}
way[advertising=billboard] {
  width: 2;
  color: advertising#880000;
}

/*************/
/* Shop Tags */
/*************/

area[shop=supermarket],
area[shop=convenience],
area[shop=bakery],
area[shop=butcher],
area[shop=bicycle],
area[shop=doityourself],
area[shop=dry_cleaning],
area[shop=laundry],
area[shop=outdoor],
area[shop=kiosk],
area[shop=alcohol],
area[shop=beverages],
area[shop=books],
area[shop=boutique],
area[shop=car],
area[shop=car_repair],
area[shop=tyres],
area[shop=chemist],
area[shop=tobacco],
area[shop=e-cigarette],
area[shop=clothes],
area[shop=computer],
area[shop=confectionery],
area[shop=pastry],
area[shop=copyshop],
area[shop=curtain],
area[shop=cycle_repair],
area[shop=department_store],
area[shop=deli],
area[shop=electronics],
area[shop=doors],
area[shop=erotic],
area[shop=furniture],
area[shop=fabric],
area[shop=florist],
area[shop=frame],
area[shop=gas],
area[shop=gift],
area[shop=greengrocer],
area[shop=garden_centre],
area[shop=hairdresser],
area[shop=hardware],
area[shop=hearing_aids],
area[shop=hifi],
area[shop=houseware],
area[shop=jewelry],
area[shop=kitchen],
area[shop=mall],
area[shop=massage],
area[shop=mobile_phone],
area[shop=watches],
area[shop=motorcycle],
area[shop=musical_instrument],
area[shop=newsagent],
area[shop=optician],
area[shop=medical_supply],
area[shop=paint],
area[shop=party],
area[shop=pawnbroker],
area[shop=seafood],
area[shop=dairy],
area[shop=cheese],
area[shop=shoes],
area[shop=sports],
area[shop=stationery],
area[shop=tailor],
area[shop=travel_agency],
area[shop=scuba_diving],
area[shop=toys],
area[shop=vacuum_cleaner],
area[shop=variety_store],
area[shop=charity],
area[shop=video],
area[shop=bookmaker],
area[shop=lottery],
area[shop=shopping_centre],
area[shop=pet],
area[shop=pet_grooming],
area[shop=photo],
area[shop=ticket],
area[shop=carpet],
area[shop=interior_decoration],
area[shop=car_parts],
area[shop=video_games],
area[shop=bed],
area[shop=beauty],
area[shop=cosmetics],
area[shop=perfumery],
area[shop=tea],
area[shop=coffee],
area[shop=antiques],
area[shop=music],
area[shop=weapons],
area[shop=funeral_directors],
area[shop=wine],
area[shop=farm],
area[shop=tattoo],
area[shop=art],
area[shop=bag] {
    fill-color: shop#00005f;
}
node[shop=supermarket] {
    icon-image: "presets/shop/supermarket.svg";
    set icon_z17;
}
node[shop=convenience] {
    icon-image: "presets/shop/convenience.svg";
    set icon_z17;
}
node[shop=bakery] {
    icon-image: "presets/shop/groceries/bakery.svg";
    set icon_z17;
}
node[shop=butcher] {
    icon-image: "presets/shop/groceries/butcher.svg";
    set icon_z17;
}
node[shop=bicycle] {
    icon-image: "presets/shop/bicycle.svg";
    set icon_z17;
}
node[shop=doityourself] {
    icon-image: "presets/shop/diy_store.svg";
    set icon_z17;
}
node[shop=dry_cleaning],
node[shop=laundry] {
    icon-image: "presets/shop/laundry.svg";
    set icon_z17;
}
node[shop=outdoor] {
    icon-image: "presets/shop/outdoor.svg";
    set icon_z17;
}
node[shop=kiosk] {
    icon-image: "presets/shop/kiosk.svg";
    set icon_z17;
}
node[shop=beverages] {
    icon-image: "presets/shop/beverages.svg";
    set icon_z17;
}
node[shop=alcohol] {
    icon-image: "presets/shop/alcohol.svg";
    set icon_z17;
}
node[shop=books] {
    icon-image: "presets/shop/book.svg";
    set icon_z17;
}
node[shop=boutique] {
    icon-image: "presets/shop/boutique.svg";
    set icon_z17;
}
node[shop=car] {
    icon-image: "presets/shop/vehicle.svg";
    set icon_z17;
}
node[shop=car_repair] {
    icon-image: "presets/vehicle/repair_shop.svg";
    set icon_z17;
}
node[shop=tyres] {
    icon-image: "presets/vehicle/tyres.svg";
    set icon_z17;
}
node[shop=chemist] {
    icon-image: "presets/shop/chemist.svg";
    set icon_z17;
}
node[shop=e-cigarette] {
    icon-image: "presets/shop/e-cigarette.svg";
    set icon_z17;
}
node[shop=clothes] {
    icon-image: "presets/shop/clothes.svg";
    set icon_z17;
}
node[shop=tobacco] {
    icon-image: "presets/shop/tobacco.svg";
    set icon_z17;
}
node[shop=computer] {
    icon-image: "presets/shop/computer.svg";
    set icon_z17;
}
node[shop=confectionery] {
    icon-image: "presets/shop/groceries/confectionery.svg";
    set icon_z17;
}
node[shop=pastry] {
    icon-image: "presets/shop/groceries/pastry.svg";
    set icon_z17;
}
node[shop=copyshop] {
    icon-image: "presets/shop/copyshop.svg";
    set icon_z17;
}
node[shop=curtain] {
    icon-image: "presets/shop/curtain.svg";
    set icon_z17;
}
node[shop=cycle_repair] {
    icon-image: "presets/sport/bicycle.svg";
    set icon_z17;
}
node[shop=department_store] {
    icon-image: "presets/shop/mall.svg";
    set icon_z17;
}
node[shop=deli] {
    icon-image: "presets/shop/groceries/deli.svg";
    set icon_z17;
}
node[shop=doors] {
    icon-image: "presets/shop/doors.svg";
    set icon_z17;
}
node[shop=electronics] {
    icon-image: "presets/shop/electronics.svg";
    set icon_z17;
}
node[shop=erotic] {
    icon-image: "presets/shop/erotic.svg";
    set icon_z17;
}
node[shop=furniture] {
    icon-image: "presets/shop/furniture.svg";
    set icon_z17;
}
node[shop=fabric] {
    icon-image: "presets/shop/fabric.svg";
    set icon_z17;
}
node[shop=florist] {
    icon-image: "presets/shop/florist.svg";
    set icon_z17;
}
node[shop=frame] {
    icon-image: "presets/shop/frame.svg";
    set icon_z17;
}
node[shop=gas] {
  icon-image: "presets/shop/gas.svg";
  set icon_z17;
}
node[shop=gift] {
    icon-image: "presets/shop/present.svg";
    set icon_z17;
}
node[shop=greengrocer] {
    icon-image: "presets/shop/groceries/greengrocer.svg";
    set icon_z17;
}
node[shop=garden_centre] {
    icon-image: "presets/shop/garden_centre.svg";
    set icon_z17;
}
node[shop=hairdresser] {
    icon-image: "presets/shop/hairdresser.svg";
    set icon_z17;
}
node[shop=hardware] {
    icon-image: "presets/shop/hardware.svg";
    set icon_z17;
}
node[shop=hearing_aids] {
    icon-image: "presets/shop/hearing_aids.svg";
    set icon_z17;
}
node[shop=hifi] {
    icon-image: "presets/shop/hifi.svg";
    set icon_z17;
}
node[shop=houseware] {
    icon-image: "presets/shop/houseware.svg";
    set icon_z17;
}
node[shop=jewelry] {
    icon-image: "presets/shop/jewelry.svg";
    set icon_z17;
}
node[shop=kitchen] {
    icon-image: "presets/shop/kitchen.svg";
    set icon_z17;
}
node[shop=mall] {
    icon-image: "presets/shop/mall.svg";
    set icon_z17;
}
node[shop=massage] {
    icon-image: "presets/shop/massage.svg";
    set icon_z17
}
node[shop=mobile_phone] {
    icon-image: "presets/shop/mobile_phone.svg";
    set icon_z17;
}
node[shop=watches] {
    icon-image: "presets/shop/watches.svg";
    set icon_z17;
}
node[shop=motorcycle] {
    icon-image: "presets/vehicle/motorbike.svg";
    set icon_z17;
}
node[shop=musical_instrument] {
    icon-image: "presets/shop/musical_instrument.svg";
    set icon_z17;
}
node[shop=newsagent] {
    icon-image: "presets/shop/news.svg";
    set icon_z17;
}
node[shop=optician] {
    icon-image: "presets/shop/optician.svg";
    set icon_z17;
}
node[shop=medical_supply] {
    icon-image: "presets/shop/medical_supply.svg";
    set icon_z17;
}
node[shop=paint] {
    icon-image: "presets/shop/paint.svg";
    set icon_z17;
}
node[shop=party] {
    icon-image: "presets/shop/party.svg";
    set icon_z17;
}
node[shop=pawnbroker] {
    icon-image: "presets/shop/pawnbroker.svg";
    set icon_z17;
}
node[shop=seafood] {
    icon-image: "presets/shop/groceries/seafood.svg";
    set icon_z17;
}
node[shop=dairy] {
    icon-image: "presets/shop/groceries/dairy.svg";
    set icon_z17;
}
node[shop=cheese] {
    icon-image: "presets/shop/groceries/cheese.svg";
    set icon_z17;
}
node[shop=shoes] {
    icon-image: "presets/shop/shoes.svg";
    set icon_z17;
}
node[shop=sports] {
    icon-image: "presets/sport/multi.svg";
    set icon_z17;
}
node[shop=stationery] {
    icon-image: "presets/shop/stationery.svg";
    set icon_z17;
}
node[shop=tailor] {
    icon-image: "presets/shop/tailor.svg";
    set icon_z17;
}
node[shop=travel_agency] {
    icon-image: "presets/shop/travel_agency.svg";
    set icon_z17;
}
node[shop=scuba_diving] {
    icon-image: "presets/shop/scuba_diving.svg";
    set icon_z17;
}
node[shop=toys] {
    icon-image: "presets/shop/toys.svg";
    set icon_z17;
}
node[shop=vacuum_cleaner] {
    icon-image: "presets/shop/vacuum_cleaner.svg";
    set icon_z17;
}
node[shop=variety_store] {
    icon-image: "presets/shop/variety_store.svg";
    set icon_z17;
}
node[shop=charity] {
    icon-image: "presets/shop/charity.svg";
    set icon_z17;
}
node[shop=video] {
    icon-image: "presets/shop/video.svg";
    set icon_z17;
}
node[shop=bookmaker] {
    icon-image: "presets/shop/lottery.svg";
    set icon_z17;
}
node[shop=lottery] {
    icon-image: "presets/shop/lottery.svg";
    set icon_z17;
}
node[shop=shopping_centre] {
    icon-image: "presets/shop/mall.svg";
    set icon_z17;
}
node[shop=pet] {
    icon-image: "presets/shop/pet.svg";
    set icon_z17;
}
node[shop=pet_grooming] {
    icon-image: "presets/shop/pet_grooming.svg";
    set icon_z17;
}
node[shop=photo] {
    icon-image: "presets/shop/photo.svg";
    set icon_z17;
}
node[shop=ticket] {
    icon-image: "presets/shop/ticket.svg";
    set icon_z17;
}
node[shop=carpet] {
    icon-image: "presets/shop/carpet.svg";
    set icon_z17;
}
node[shop=interior_decoration] {
    icon-image: "presets/shop/interior_decoration.svg";
    set icon_z17;
}
node[shop=car_parts] {
    icon-image: "presets/vehicle/car_parts.svg";
    set icon_z17;
}
node[shop=video_games] {
    icon-image: "presets/shop/video_games.svg";
    set icon_z17;
}
node[shop=bed] {
    icon-image: "presets/shop/bed.svg";
    set icon_z17;
}
node[shop=beauty] {
    icon-image: "presets/shop/beauty.svg";
    set icon_z17;
}
node[shop=cosmetics] {
    icon-image: "presets/shop/cosmetics.svg";
    set icon_z17;
}
node[shop=perfumery] {
    icon-image: "presets/shop/perfumery.svg";
    set icon_z17;
}
node[shop=tea] {
    icon-image: "presets/shop/groceries/tea.svg";
    set icon_z17;
}
node[shop=coffee] {
    icon-image: "presets/shop/groceries/coffee.svg";
    set icon_z17;
}
node[shop=antiques] {
    icon-image: "presets/shop/antique.svg";
    set icon_z17;
}
node[shop=music] {
    icon-image: "presets/shop/music.svg";
    set icon_z17;
}
node[shop=weapons] {
    icon-image: "presets/shop/weapons.svg";
    set icon_z17;
}
node[shop=funeral_directors] {
    icon-image: "presets/shop/funeral_directors.svg";
    set icon_z17;
}
node[shop=wine] {
    icon-image: "presets/shop/wine.svg";
    set icon_z17;
}
node[shop=farm] {
    icon-image: "presets/shop/groceries/farm.svg";
    set icon_z17;
}
node[shop=tattoo] {
    icon-image: "presets/shop/tattoo.svg";
    set icon_z17;
}
node[shop=art] {
    icon-image: "presets/shop/art.svg";
    set icon_z17;
}
node[shop=bag] {
    icon-image: "presets/shop/bag.svg";
    set icon_z17;
}

/******************/
/* Emergency Tags */
/******************/

area[emergency=ambulance_station],
area[emergency=water_tank] {
    fill-color: emergency#eeeeee;
}
node[emergency=ambulance_station] {
    icon-image: "presets/emergency/ambulance_station.svg";
    set icon_z17;
}
node[emergency=water_tank] {
    icon-image: "presets/emergency/water_tank.svg";
    set icon_z17;
}
node[emergency=emergency_ward_entrance] {
    icon-image: "presets/emergency/emergency_ward_entrance.svg";
    set icon_z17;
}
node[emergency=phone] {
    icon-image: "presets/vehicle/emergency_phone.svg";
    set icon_z17;
}
node[emergency=defibrillator] {
    icon-image: "presets/emergency/aed.svg";
    set icon_z17;
}
node[emergency=fire_hydrant] {
    icon-image: "presets/service/fire_hydrant.svg";
    set icon_z17;
}
node[emergency=fire_extinguisher] {
    icon-image: "presets/emergency/fire_extinguisher.svg";
    set icon_z17;
}
node[emergency=fire_hose] {
    icon-image: "presets/emergency/fire_hose.svg";
    set icon_z17;
}
node[emergency=assembly_point] {
    icon-image: "presets/emergency/assembly_point.svg";
    set icon_z17;
}
node[emergency=siren] {
    icon-image: "presets/emergency/siren.svg";
    set icon_z17;
}

/***************/
/* Police Tags */
/***************/

area[police=barracks],
area[police=car_pound],
area[police=checkpoint],
area[police=detention],
area[police=naval_base],
area[police=offices],
area[police=range],
area[police=storage],
area[police=training_area],
area[police=yes] {
    fill-color: police#ecba52;
}
node[police=barracks],
node[police=car_pound],
node[police=checkpoint],
node[police=detention],
node[police=naval_base],
node[police=offices],
node[police=range],
node[police=storage],
node[police=training_node],
node[police=yes] {
    icon-image: "presets/service/police_non_public.svg";
    set icon_z17;
}


/****************/
/* Amenity Tags */
/****************/

area[amenity=pub],
area[amenity=biergarten],
area[amenity=nightclub],
area[amenity=stripclub],
area[amenity=casino],
area[amenity=brothel],
area[amenity=cafe],
area[amenity=restaurant],
area[amenity=food_court],
area[amenity=fast_food],
area[amenity=bar],
area[amenity=ice_cream] {
    fill-color: amenity#ecba52;
}
node[amenity=pub] {
    icon-image: "presets/food/pub.svg";
    set icon_z17;
}
node[amenity=biergarten] {
    icon-image: "presets/food/biergarten.svg";
    set icon_z17;
}
node[amenity=nightclub] {
    icon-image: "presets/leisure/nightclub.svg";
    set icon_z17;
}
node[amenity=stripclub] {
    icon-image: "presets/leisure/stripclub.svg";
    set icon_z17;
}
node[amenity=casino] {
    icon-image: "presets/leisure/casino.svg";
    set icon_z17;
}
node[amenity=brothel] {
    icon-image: "presets/leisure/brothel.svg";
    set icon_z17;
}
node[amenity=cafe] {
    icon-image: "presets/food/cafe.svg";
    set icon_z17;
}
node[amenity=restaurant] {
    icon-image: "presets/food/restaurant.svg";
    set icon_z17;
}
node[amenity=food_court] {
    icon-image: "presets/food/food_court.svg";
    set icon_z17;
}
node[amenity=fast_food] {
    icon-image: "presets/food/fast_food.svg";
    set icon_z17;
}
node[amenity=bar] {
    icon-image: "presets/food/bar.svg";
    set icon_z17;
}
node[amenity=ice_cream] {
    icon-image: "presets/food/ice_cream.svg";
    set icon_z17;
}
area[amenity=bicycle_parking]:closed {
    fill-color: amenity_traffic#f7efb7;
}
way[amenity=bicycle_parking] {
    width: 2;
    color: amenity_traffic#f7efb7;
}
area[amenity=parking_space] {
    fill-color: parking_space#f7efb8;
}
area[amenity=parking],
area[amenity=motorcycle_parking],
area[amenity=bicycle_rental],
area[amenity=bicycle_repair_station],
area[amenity=car_rental],
area[amenity=car_pooling],
area[amenity=car_sharing],
area[amenity=car_wash],
area[amenity=taxi],
area[amenity=fuel] {
    fill-color: amenity_traffic#f7efb7;
}
node[amenity=parking_space] {
    icon-image: "presets/vehicle/parking/parking_space.svg";
    set icon_z17;
}
node[amenity=parking] {
    icon-image: "presets/vehicle/parking/parking.svg";
    set icon_z17;
}
node[amenity=parking_entrance] {
    icon-image: "presets/vehicle/parking/parking.svg";
    set icon_z17;
}
node[amenity=parking_entrance][parking=multi-storey],
node[amenity=parking][parking=multi-storey] {
    icon-image: "presets/vehicle/parking/multi-storey.svg";
    set icon_z17;
}
node[amenity=parking_entrance][parking=underground],
node[amenity=parking][parking=underground] {
    icon-image: "presets/vehicle/parking/underground.svg";
    set icon_z17;
}
node[amenity=motorcycle_parking] {
    icon-image: "presets/vehicle/parking/motorbike.svg";
    set icon_z17;
}
node[amenity=bicycle_parking] {
    icon-image: "presets/vehicle/parking/bicycle.svg";
    set icon_z17;
}
node[park_ride][park_ride!=no] {
    icon-image: "presets/vehicle/parking/park_ride.svg";
    set icon_z17;
}
node[amenity=parking_space][wheelchair?] {
    icon-image: "presets/vehicle/parking/handicapped.svg";
    set icon_z17;
}
node[amenity=bicycle_rental] {
    icon-image: "presets/vehicle/bicycle_rental.svg";
    set icon_z17;
}
node[amenity=bicycle_repair_station] {
    icon-image: "presets/vehicle/bicycle_repair_station.svg";
    set icon_z17;
}
node[amenity=car_rental] {
    icon-image: "presets/vehicle/car_rental.svg";
    set icon_z17;
}
node[amenity=car_pooling] {
    icon-image: "presets/vehicle/car_pooling.svg";
    set icon_z17;
}
node[amenity=car_sharing] {
    icon-image: "presets/vehicle/car_sharing.svg";
    set icon_z17;
}
node[amenity=car_wash] {
    icon-image: "presets/vehicle/car_wash.svg";
    set icon_z17;
}
node[amenity=taxi] {
    icon-image: "presets/transport/taxi.svg";
    set icon_z17;
}
node[amenity=fuel] {
    icon-image: "presets/vehicle/fuel.svg";
    set icon_z17;
}
node[amenity=charging_station] {
    icon-image: "presets/vehicle/charging_station.svg";
    set icon_z17;
}
node[amenity=grit_bin] {
    icon-image: "presets/misc/grit_bin.svg";
    set icon_z17;
}
node[amenity=telephone] {
    icon-image: "presets/service/telephone.svg";
    set icon_z17;
}
node[amenity=clock] {
    icon-image: "presets/service/clock.svg";
    set icon_z17;
}
node[amenity=photo_booth] {
    icon-image: "presets/service/photo_booth.svg";
    set icon_z17; 
}
area[amenity=toilets],
area[amenity=shower],
area[amenity=internet_cafe],
area[amenity=recycling],
area[amenity=sanitary_dump_station] {
    fill-color: amenity_light#f7efb7;
}
node[amenity=toilets] {
    icon-image: "presets/service/toilets.svg";
    set icon_z17;
}
node[amenity=shower] { 
    icon-image: "presets/service/shower.svg";
    set icon_z17;
}
node[amenity=internet_cafe] {
    icon-image: "presets/service/internet_cafe.svg";
    set icon_z17;
}
node[amenity=recycling] {
    icon-image: "presets/service/recycling/recycling.svg";
    set icon_z17;
}
node[amenity=recycling][recycling_type=container] {
    icon-image: "presets/service/recycling/recycling_container.svg";
    set icon_z17;
}
node[amenity=recycling][recycling_type=centre] {
    icon-image: "presets/service/recycling/recycling_centre.svg";
    set icon_z17;
}
node[amenity=waste_basket] {
    icon-image: "presets/service/recycling/waste_basket.svg";
    set icon_z17;
}
node[amenity=waste_disposal] {
    icon-image: "presets/service/recycling/waste_disposal.svg";
    set icon_z17;
}
node[amenity=sanitary_dump_station] {
    icon-image: "presets/service/recycling/sanitary_dump_station.svg";
    set icon_z17;
}
area[amenity=townhall],
area[amenity=embassy],
area[amenity=community_centre] {
    fill-color: amenity_light#f7efb7;
}
node[amenity=townhall] {
    icon-image: "presets/service/townhall.svg";
    set icon_z17;
}
node[amenity=embassy] {
    icon-image: "presets/service/embassy.svg";
    set icon_z17;
}
node[amenity=community_centre] {
    icon-image: "presets/service/community_centre.svg";
    set icon_z17;
}
area[amenity=water_point],
area[amenity=fountain] {
    fill-color: light_water#00005f;
}
node[amenity=drinking_water] {
    icon-image: "presets/food/drinking_water.svg";
    set icon_z17;
}
node[amenity=water_point] {
    icon-image: "presets/accommodation/water.svg";
    set icon_z17;
}
node[amenity=fountain] {
    icon-image: "presets/misc/fountain.svg";
    set icon_z17;
}
area[amenity=place_of_worship],
area[amenity=grave_yard],
area[amenity=crematorium],
area[amenity=post_office],
area[amenity=studio],
area[amenity=school],
area[amenity=university],
area[amenity=college],
area[amenity=kindergarten],
area[amenity=driving_school] {
    fill-color: amenity_light#f7efb7;
}
node[amenity=place_of_worship] {
    icon-image: "presets/religion/religion.svg";
    set icon_z17;
}
node[amenity=place_of_worship][religion=bahai] {
    icon-image: "presets/religion/bahai.svg";
    set icon_z17;
}
node[amenity=place_of_worship][religion=buddhist] {
    icon-image: "presets/religion/buddhism.svg";
    set icon_z17;
}
node[amenity=place_of_worship][religion=caodaism][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17
}
node[amenity=place_of_worship][religion=christian] {
    icon-image: "presets/religion/church.svg";
    set icon_z17;
}
node[amenity=place_of_worship][religion=confucian] {
    icon-image: "presets/religion/confucian.svg";
    set icon_z17
}
node[amenity=place_of_worship][religion=hindu] {
    icon-image: "presets/religion/hinduism.svg";
    set icon_z17;
}
node[amenity=place_of_worship][religion=jain] {
    icon-image: "presets/religion/jainism.svg";
    set icon_z17;
}
node[amenity=place_of_worship][religion=jewish] {
    icon-image: "presets/religion/jewish.svg";
    set icon_z17;
}
node[amenity=place_of_worship][religion=muslim] {
    icon-image: "presets/religion/muslim.svg";
    set icon_z17;
}
node[amenity=place_of_worship][religion=shinto] {
    icon-image: "presets/religion/shinto.svg";
    set icon_z17;
}
node[amenity=place_of_worship][religion=sikh] {
    icon-image: "presets/religion/sikhism.svg";
    set icon_z17;
}
node[amenity=place_of_worship][religion=spiritualist][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[amenity=place_of_worship][religion=taoist] {
    icon-image: "presets/religion/taoism.svg";
    set icon_z17;
}
node[amenity=place_of_worship][religion=tenrikyo] {
    icon-image: "presets/religion/tenrikyo.svg";
    set icon_z17
}
node[amenity=place_of_worship][religion=unitarian_universalist][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[amenity=place_of_worship][religion=zoroastrian][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[amenity=grave_yard] {
    icon-image: "presets/landuse/graveyard.svg";
    set icon_z17;
}
node[amenity=crematorium][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[amenity=post_office] {
    icon-image: "presets/service/post_office.svg";
    set icon_z17;
}
node[amenity=post_box] {
    icon-image: "presets/service/post_box.svg";
    set icon_z17;
}
node[amenity=studio] {
    icon-image: "presets/service/studio.svg";
    set icon_z17;
}
node[amenity=school] {
    icon-image: "presets/education/school.svg";
    set icon_z17;
}
node[amenity=university] {
    icon-image: "presets/education/university.svg";
    set icon_z17;
}
node[amenity=college] {
    icon-image: "presets/education/college.svg";
    set icon_z17;
}
node[amenity=kindergarten] {
    icon-image: "presets/education/kindergarten.svg";
    set icon_z17;
}
node[amenity=driving_school] {
    icon-image: "presets/education/driving_school.svg";
    set icon_z17;
}
area[amenity=pharmacy],
area[amenity=hospital],
area[amenity=clinic],
area[amenity=nursing_home],
area[amenity=social_facility],
area[amenity=baby_hatch],
area[amenity=doctors],
area[amenity=dentist],
area[amenity=veterinary] {
    fill-color: health#eeeeee;
}
node[amenity=pharmacy] {
    icon-image: "presets/health/pharmacy.svg";
    set icon_z17;
}
node[amenity=hospital] {
    icon-image: "presets/health/hospital.svg";
    set icon_z17;
}
node[amenity=clinic] {
    icon-image: "presets/health/clinic.svg";
    set icon_z17;
}
node[amenity=social_facility][social_facility=nursing_home],
node[amenity=nursing_home] {
    icon-image: "presets/social_facility/nursing_home.svg";
    set icon_z17;
}
node[amenity=social_facility][social_facility=group_home] {
    icon-image: "presets/social_facility/group_home.svg";
    set icon_z17;
}
node[amenity=social_facility][social_facility=assisted_living] {
    icon-image: "presets/social_facility/assisted_living.svg";
    set icon_z17;
}
node[amenity=social_facility][social_facility=outreach] {
    icon-image: "presets/social_facility/outreach.svg";
    set icon_z17;
}
node[amenity=social_facility][social_facility=shelter] {
    icon-image: "presets/social_facility/shelter.svg";
    set icon_z17;
}
node[amenity=social_facility][social_facility=food_bank] {
    icon-image: "presets/social_facility/food_bank.svg";
    set icon_z17;
}
node[amenity=baby_hatch] {
    icon-image: "presets/health/baby_hatch.svg";
    set icon_z17;
}
node[amenity=doctors] {
    icon-image: "presets/health/doctors.svg";
    set icon_z17;
}
node[amenity=dentist] {
    icon-image: "presets/health/dentist.svg";
    set icon_z17;
}
node[amenity=veterinary] {
    icon-image: "presets/health/veterinary.svg";
    set icon_z17;
}
area[amenity=library],
area[amenity=police],
area[amenity=ranger_station],
area[amenity=fire_station],
area[amenity=bus_station],
area[amenity=ferry_terminal],
area[amenity=theatre],
area[amenity=cinema],
area[amenity=arts_centre],
area[amenity=courthouse],
area[amenity=prison],
area[amenity=bank],
area[amenity=bureau_de_change],
area[amenity=money_transfer],
area[amenity=bbq],
area[amenity=watering_place] {
    fill-color: amenity_light#f7efb7;
}
node[amenity=library] {
    icon-image: "presets/education/library.svg";
    set icon_z17;
}
node[amenity=police] {
    icon-image: "presets/service/police.svg";
    set icon_z17;
}
node[amenity=ranger_station] {
    icon-image: "presets/service/ranger_station.svg";
    set icon_z17;
}
node[amenity=fire_station] {
    icon-image: "presets/service/firebrigade.svg";
    set icon_z17;
}
node[amenity=bus_station] {
    icon-image: "presets/transport/bus_old.svg";
    set icon_z17;
}
node[amenity=ferry_terminal] {
    icon-image: "presets/nautical/ferry.svg";
    icon-width: 20;
    set icon_z17;
}
node[amenity=theatre] {
    icon-image: "presets/leisure/theater.svg";
    set icon_z17;
}
node[amenity=cinema] {
    icon-image: "presets/leisure/cinema.svg";
    set icon_z17;
}
node[amenity=arts_centre] {
    icon-image: "presets/sightseeing/arts_centre.svg";
    set icon_z17;
}
node[amenity=courthouse] {
    icon-image: "presets/service/courthouse.svg";
    set icon_z17;
}
node[amenity=prison] {
    icon-image: "presets/service/prison.svg";
    set icon_z17;
}
node[amenity=bank] {
    icon-image: "presets/money/bank.svg";
    set icon_z17;
}
node[amenity=bureau_de_change] {
    icon-image: "presets/money/exchange.svg";
    set icon_z17;
}
node[amenity=money_transfer] {
    icon-image: "presets/money/money_transfer.svg";
    set icon_z17;
}
node[amenity=watering_place] {
    icon-image: "presets/misc/watering_place.svg";
    set icon_z17;
}
node[amenity=atm] {
    icon-image: "presets/money/atm.svg";
    set icon_z17;
}
way[amenity=bench] {
    width: 2;
    color: amenity_light#f7efb7;
}
node[amenity=bench] {
    icon-image: "presets/leisure/bench.svg";
    set icon_z17;
}
node[amenity=bbq] {
    icon-image: "presets/leisure/bbq.svg";
    set icon_z17;
}
node[amenity=compressed_air] {
    icon-image: "presets/vehicle/compressed_air.svg";
    set icon_z17;
}
area[amenity=shelter],
area[amenity=marketplace],
area[amenity=wlan] {
    fill-color: amenity_light#f7efb7;
}
node[amenity=shelter] {
    icon-image: "presets/accommodation/shelter.svg";
    set icon_z17;
}
node[amenity=shelter][shelter_type=public_transport] {
    icon-image: "presets/accommodation/shelter_public_transport.svg";
    set icon_z17;
}
node[amenity=shelter][shelter_type=picnic_shelter] {
    icon-image: "presets/accommodation/shelter_picnic.svg";
    set icon_z17;
}
node[amenity=shelter][shelter_type=basic_hut] {
    icon-image: "presets/accommodation/basic_hut.svg";
    set icon_z17;
}
node[amenity=shelter][shelter_type=lean_to] {
    icon-image: "presets/accommodation/shelter_lean_to.svg";
    set icon_z17;
}
node[amenity=hunting_stand] {
    icon-image: "presets/landmark/hunting_stand.svg";
    set icon_z17;
}
node[amenity=marketplace] {
    icon-image: "presets/shop/marketplace.svg";
    set icon_z17;
}
node[amenity=wlan] {
    icon-image: "presets/misc/wlan.svg";
    set icon_z17;
}
node[amenity=vending_machine] {
    icon-image: "presets/transport/ticket-machine.svg";
    set icon_z17;
}
node[vending=excrement_bags] {
    icon-image: "presets/service/excrement_bags.svg";
    set icon_z17;
}

/**************/
/* Craft Tags */
/**************/

area[craft=carpenter],
area[craft=shoemaker],
area[craft=photographer],
area[craft=metal_construction],
area[craft=electrician],
area[craft=brewery],
area[craft=plumber],
area[craft=sawmill],
area[craft=gardener],
area[craft=winery],
area[craft=hvac],
area[craft=painter],
area[craft=stonemason],
area[craft=handicraft],
area[craft=pottery],
area[craft=key_cutter],
area[craft=caterer],
area[craft=roofer],
area[craft=beekeeper],
area[craft=blacksmith],
area[craft=locksmith],
area[craft=window_construction],
area[craft=upholsterer],
area[craft=tiler] {
    fill-color: craft#999900;
}

node[craft=carpenter] {
    icon-image: "presets/craft/carpenter.svg";
    set icon_z17;
}
node[craft=shoemaker][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[craft=photographer][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[craft=metal_construction] {
    icon-image: "presets/craft/metal_construction.svg";
    set icon_z17;
}
node[craft=electrician][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[craft=brewery][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[craft=plumber] {
    icon-image: "presets/craft/plumber.svg";
    set icon_z17;
}
node[craft=sawmill] {
    icon-image: "presets/craft/sawmill.svg";
    set icon_z17;
}
node[craft=gardener][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[craft=winery][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[craft=hvac] {
    icon-image: "presets/craft/hvac.svg";
    set icon_z17;
}
node[craft=painter] {
    icon-image: "presets/craft/painter.svg";
    set icon_z17;
}
node[craft=stonemason][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[craft=handicraft][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[craft=pottery] {
    icon-image: "presets/craft/pottery.svg";
    set icon_z17;
}
node[craft=key_cutter] {
    icon-image: "presets/craft/key_cutter.svg";
    set icon_z17;
}
node[craft=caterer][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[craft=roofer] {
    icon-image: "presets/craft/roofer.svg";
    set icon_z17;
}
node[craft=beekeeper] {
    icon-image: "presets/craft/beekeeper.svg";
    set icon_z17;
}
node[craft=blacksmith][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[craft=locksmith] {
    icon-image: "presets/craft/locksmith.svg";
    set icon_z17;
}
node[craft=window_construction] {
    icon-image: "presets/craft/window_construction.svg";
    set icon_z17;
}
node[craft=upholsterer][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[craft=tiler] {
    icon-image: "presets/craft/tiler.svg";
    set icon_z17;
}

/****************/
/* Tourism Tags */
/****************/

area[tourism=hotel],
area[tourism=motel],
area[tourism=guest_house],
area[tourism=apartment],
area[tourism=hostel],
area[tourism=chalet],
area[tourism=alpine_hut],
area[tourism=wilderness_hut],
area[tourism=camp_site],
area[tourism=caravan_site] {
    fill-color: hotel#FECED0;
}
node[tourism=hotel] {
    icon-image: "presets/accommodation/hotel.svg";
    set icon_z17;
}
node[tourism=motel] {
    icon-image: "presets/accommodation/motel.svg";
    set icon_z17;
}
node[tourism=guest_house] {
    icon-image: "presets/accommodation/guest_house.svg";
    set icon_z17;
}
node[tourism=apartment] {
    icon-image: "presets/accommodation/apartment.svg";
    set icon_z17;
}
node[tourism=hostel] {
    icon-image: "presets/accommodation/hostel.svg";
    set icon_z17;
}
node[tourism=chalet] {
    icon-image: "presets/accommodation/chalet.svg";
    set icon_z17;
}
node[tourism=alpine_hut] {
    icon-image: "presets/accommodation/alpine_hut.svg";
    set icon_z17;
}
node[tourism=wilderness_hut] {
    icon-image: "presets/accommodation/wilderness_hut.svg";
    set icon_z17;
}
node[tourism=camp_site] {
    icon-image: "presets/accommodation/camping.svg";
    set icon_z17;
}
node[tourism=caravan_site] {
    icon-image: "presets/accommodation/caravan.svg";
    set icon_z17;
}
area[tourism=attraction]:closed { 
    fill-color: tourism#e180a2; 
}
way[tourism=attraction] {
    width: 2;
    color: tourism#e180a2;
}
node[tourism=attraction] {
    icon-image: "presets/sightseeing/attraction.svg";
    set icon_z17;
}
area[tourism=picnic_site],
area[tourism=viewpoint],
area[tourism=theme_park],
area[tourism=zoo],
area[tourism=museum] {
    fill-color: tourism#e180a2;
}
node[tourism=picnic_site] {
    icon-image: "presets/leisure/picnic.svg";
    set icon_z17;
}
node[tourism=viewpoint] {
    icon-image: "presets/sightseeing/viewpoint.svg";
    set icon_z17;
}
node[tourism=theme_park] {
    icon-image: "presets/leisure/theme_park.svg";
    set icon_z17;
}
node[tourism=zoo] {
    icon-image: "presets/leisure/zoo.svg";
    set icon_z17;
}
area[tourism=artwork]:closed {
    fill-color: tourism#e180a2;
}
way[tourism=artwork] {
    width: 2;
    color: tourism#e180a2;
}
node[tourism=artwork] {
    icon-image: "presets/sightseeing/arts_centre.svg";
    set icon_z17;
}
node[tourism=museum] {
    icon-image: "presets/sightseeing/museum.svg";
    set icon_z17;
}

/*******************/
/* Attraction Tags */
/*******************/

area[attraction=animal] {
    fill-color: attraction#ffbfd3;
    color: attraction#ffbfd3;
}
node[attraction=animal] {
    icon-image: "presets/attraction/animal.svg";
    set icon_z17;
}
/********************/
/* Information Tags */
/********************/

area[tourism=information] {
    fill-color: tourism#e180a2;
}
node[tourism=information] {
    icon-image: "presets/misc/information/information.svg";
    set icon_z17;
}
node[tourism=information][information=guidepost] {
    icon-image: "presets/misc/information/guidepost.svg";
    set icon_z17;
}
area[tourism=information][information=office] {
    fill-color: tourism#e180a2;
}
node[tourism=information][information=office] {
    icon-image: "presets/misc/information/informationoffice.svg";
    set icon_z17;
}
node[tourism=information][information=map] {
    icon-image: "presets/misc/information/map.svg";
    set icon_z17;
}
node[tourism=information][information=board] {
    icon-image: "presets/misc/information/board.svg";
    set icon_z17;
}

/*****************/
/* Historic Tags */
/*****************/

area[historic=castle],
area[historic=monument],
area[historic=memorial],
area[historic=archaeological_site],
area[historic=ruins],
area[historic=battlefield],
area[geological=palaeontological_site],
area[historic=wayside_cross],
area[historic=wayside_shrine],
area[historic=boundary_stone],
area[cemetery=grave] {
    fill-color: historic#663300;
}
node[historic=castle] {
    icon-image: "presets/sightseeing/castle.svg";
    set icon_z17;
}
node[historic=monument] {
    icon-image: "presets/sightseeing/monument.svg";
    set icon_z17;
}
node[historic=memorial] {
    icon-image: "presets/sightseeing/memorial.svg";
    set icon_z17;
}
node[historic=archaeological_site] {
    icon-image: "presets/sightseeing/archaeological.svg";
    set icon_z17;
}
node[historic=ruins] {
    icon-image: "presets/sightseeing/ruins.svg";
    set icon_z17;
}
node[historic=battlefield] {
    icon-image: "presets/sightseeing/battlefield.svg";
    set icon_z17;
}
node[geological=palaeontological_site] {
    icon-image: "presets/historic/palaeontological_site.svg";
    set icon_z17;
}
node[historic=wayside_cross] {
    icon-image: "presets/religion/wayside_cross.svg";
    set icon_z17;
}
node[historic=wayside_shrine] {
    icon-image: "presets/religion/wayside_shrine.svg";
    set icon_z17;
}
node[historic=boundary_stone] {
    icon-image: "presets/landmark/boundary_stone.svg";
    set icon_z17;
}
node[cemetery=grave] {
    icon-image: "presets/misc/grave.svg";
    set icon_z17;
}
area[cemetery=sector] {
    fill-color: cemetery_sector#dbf8e6;
}
node[cemetery=sector] {
    icon-image: "presets/misc/cemetery_sector.svg";
    set icon_z17;
}
node[historic=tomb] {
    icon-image: "presets/misc/tomb.svg";
    set icon_z17;
}

/**************/
/* Piste Tags */
/**************/

way[route=ski]::core_piste {
    z-index: -1;
    modifier: false;
    width: 4;
    color: ski#6f778c;
    casing-width: .7;
    casing-color: white;
}
area[piste:difficulty=easy][!highway][area=yes]::core_piste {
    fill-color: piste_easy#54A73D;
}
way[piste:difficulty=easy]::core_piste {
    z-index: -1;
    modifier: false;
    width: 4;
    color: piste_easy#54A73D;
    casing-width: .7;
    casing-color: white;
}
area[piste:difficulty=intermediate][!highway][area=yes]::core_piste {
    fill-color: piste_intermediate#015597;
}
way[piste:difficulty=intermediate]::core_piste {
    z-index: -1;
    modifier: false;
    width: 4;
    color: piste_intermediate#015597;
    casing-width: .7;
    casing-color: white;
}
area[piste:difficulty=advanced][!highway][area=yes]::core_piste {
    fill-color: piste_advanced#606060;
}
way[piste:difficulty=advanced]::core_piste {
    z-index: -1;
    modifier: false;
    width: 4;
    color: piste_advanced#606060;
    casing-width: .7;
    casing-color: white;
}
area[piste:difficulty=expert][!highway][area=yes]::core_piste {
    fill-color: piste_expert#000000;
}
way[piste:difficulty=expert]::core_piste {
    z-index: -1;
    modifier: false;
    width: 4;
    color: piste_expert#000000;
    casing-width: .7;
    casing-color: white;
}
area[piste:difficulty=freeride][!highway][area=yes]::core_piste {
    fill-color: piste_freeride#ffff00;
}
way[piste:difficulty=freeride]::core_piste {
    z-index: -1;
    modifier: false;
    width: 4;
    color: piste_freeride#ffff00;
    casing-width: .7;
    casing-color: white;
}
area[piste:difficulty=novice][!highway][area=yes]::core_piste {
    fill-color: piste_novice#00ff00;
}
way[piste:difficulty=novice]::core_piste {
    z-index: -1;
    modifier: false;
    width: 4;
    color: piste_novice#00ff00;
    casing-width: .7;
    casing-color: white;
}
node[piste:type=downhill],
node[piste:type=nordic],
node[piste:type=skitour],
node[piste:type=sled],
node[piste:type=sleigh],
node[piste:type=snow_park] {
    icon-image: "presets/sport/skiing.svg";
    set icon_z17;
}

/**************/
/* Power Tags */
/**************/

node[power=portal] {
    icon-image: "presets/power/portal.svg";
    set icon_z17;
}
node[power=tower] {
    icon-image: "presets/power/tower.svg";
    set icon_z17;
}
node[power=pole] {
    icon-image: "presets/power/pole.svg";
    set icon_z17;
}
node[power=pole][switch] {
    icon-image: "presets/power/pole_switch.svg";
    set icon_z17;
}
node[power=pole][transformer=distribution] {
    icon-image: "presets/power/pole_transformer.svg";
    set icon_z17;
}
node[power=catenary_mast] {
    icon-image: "presets/power/catenary_mast.svg";
    set icon_z17;
}
node[power=insulator] {
    icon-image: "presets/power/insulator.svg";
    set icon_z17;
}
way[power=line],
way[power=minor_line] {
    width: 1;
    color: power#eeeeee;
}
way[power=cable] {
    width: 1;
    color: power#eeeeee;
    dashes: 9,9;
}
node[power=plant],
node[power=sub_station],
node[power=line],
node[power=cable],
node[power=minor_line] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}
area[power=plant],
area[power=substation],
area[power=compensator],
area[power=converter],
area[power=switchgear],
area[power=generator] {
    fill-color: power#eeeeee;
}
node[man_made=street_cabinet][street_cabinet=power] {
    icon-image: "presets/power/cable_distribution_cabinet.svg";
    set icon_z17;
}
node[power=generator] {
    icon-image: "presets/power/generator.svg";
    set icon_z17;
}
node[power=substation] {
    icon-image: "presets/power/substation.svg";
    set icon_z17;
}
node[power=transformer] {
    icon-image: "presets/power/transformer.svg";
    set icon_z17;
}
node[power=terminal] {
    icon-image: "presets/power/terminal.svg";
    set icon_z17;
}
node[power=switchgear] {
    icon-image: "presets/power/switchgear.svg";
    set icon_z17;
}
node[power=switch] {
    icon-image: "presets/power/switch.svg";
    set icon_z17;
}
node[power=converter] {
    icon-image: "presets/power/converter.svg";
    set icon_z17;
}
node[power=compensator] {
    icon-image: "presets/power/compensator.svg";
    set icon_z17;
}

/*************************/
/* Generator:source Tags */
/*************************/

area[generator:source=nuclear],
area[generator:source=wind],
area[generator:source=hydro],
area[generator:source=tidal],
area[generator:source=wave],
area[generator:source=osmotic],
area[generator:source=geothermal],
area[generator:source=solar],
area[generator:source=coal],
area[generator:source=gas],
area[generator:source=biomass],
area[generator:source=biofuel],
area[generator:source=biogas],
area[generator:source=oil],
area[generator:source=diesel],
area[generator:source=gasoline],
area[generator:source=waste] {
    fill-color: power#eeeeee;
}
node[generator:source=nuclear] {
    icon-image: "presets/power/power_source-nuclear.svg";
    set icon_z17;
}
node[generator:source=wind] {
    icon-image: "presets/power/power_source-wind.svg";
    set icon_z17;
}
node[generator:source=hydro],
node[generator:source=tidal],
node[generator:source=wave],
node[generator:source=osmotic] {
    icon-image: "presets/power/power_source-water.svg";
    set icon_z17;
}
node[generator:source=geothermal] {
    icon-image: "presets/power/power_source-geothermal.svg";
    set icon_z17;
}
node[generator:source=solar] {
    icon-image: "presets/power/power_source-sun.svg";
    set icon_z17;
}
node[generator:source=coal] {
    icon-image: "presets/power/power_source-coal.svg";
    set icon_z17;
}
node[generator:source=gas] {
    icon-image: "presets/power/power_source-gas.svg";
    set icon_z17;
}
node[generator:source=biomass],
node[generator:source=biofuel],
node[generator:source=biogas] {
    icon-image: "presets/power/power_source-biofuel.svg";
    set icon_z17;
}
node[generator:source=oil],
node[generator:source=diesel],
node[generator:source=gasoline] {
    icon-image: "presets/power/power_source-oil.svg";
    set icon_z17;
}
node[generator:source=waste] {
    icon-image: "presets/power/power_source-waste.svg";
    set icon_z17;
}
node[power_source] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}

/**************/
/* Sport Tags */
/**************/

area[sport="9pin"],
area[sport="10pin"],
area[sport=soccer],
area[sport=australian_football],
area[sport=american_football],
area[sport=canadian_football],
area[sport=gaelic_games],
area[sport=rugby_league],
area[sport=rugby_union] {
    fill-color: sport#bde3cb;
}
node[sport="9pin"] {
    icon-image: "presets/sport/9pin.svg";
    set icon_z17;
}
node[sport="10pin"] {
    icon-image: "presets/sport/10pin.svg";
    set icon_z17;
}
node[sport=soccer],
node[sport=gaelic_games] {
    icon-image: "presets/sport/soccer.svg";
    set icon_z17;
}
node[sport=australian_football],
node[sport=american_football],
node[sport=canadian_football],
node[sport=rugby_league],
node[sport=rugby_union] {
    icon-image: "presets/sport/football.svg";
    set icon_z17;
}
area[sport=baseball],
area[sport=basketball],
area[sport=boules],
area[sport=bowls],
area[sport=canoe],
area[sport=chess],
area[sport=climbing]:closed,
area[sport=cricket],
area[sport=croquet] {
    fill-color: sport#bde3cb;
}
node[sport=baseball] {
    icon-image: "presets/sport/baseball.svg";
    set icon_z17;
}
node[sport=basketball] {
    icon-image: "presets/sport/basketball.svg";
    set icon_z17;
}
node[sport=boules] {
    icon-image: "presets/sport/boule.svg";
    set icon_z17;
}
node[sport=bowls] {
    icon-image: "presets/sport/boule.svg";
    set icon_z17;
}
node[sport=canoe] {
    icon-image: "presets/sport/canoe.svg";
    set icon_z17;
}
node[sport=chess] {
    icon-image: "presets/sport/chess.svg";
    set icon_z17;
}
node[sport=climbing] {
    icon-image: "presets/sport/climbing.svg";
    set icon_z17;
}
node[sport=cricket] {
    icon-image: "presets/sport/cricket.svg";
    set icon_z17;
}
node[sport=croquet] {
    icon-image: "presets/sport/croquet.svg";
    set icon_z17;
}
area[sport=cycling],
area[sport=dog_racing],
area[sport=equestrian],
area[sport=golf],
area[sport=gymnastics],
area[sport=field_hockey],
area[sport=ice_hockey],
area[sport=horse_racing],
area[sport=karting][highway!=raceway],
area[sport=karting][highway=raceway][area=yes],
area[sport=motocross][highway!=raceway],
area[sport=motocross][highway=raceway][area=yes],
area[sport=motor][highway!=raceway],
area[sport=motor][highway=raceway][area=yes] {
    fill-color: sport#bde3cb;
}
node[sport=cycling] {
    icon-image: "presets/sport/cycling.svg";
    set icon_z17;
}
node[sport=dog_racing] {
    icon-image: "presets/sport/dog_racing.svg";
    set icon_z17;
}
node[sport=equestrian] {
    icon-image: "presets/sport/equestrian.svg";
    set icon_z17;
}
node[sport=golf] {
    icon-image: "presets/sport/golf.svg";
    set icon_z17;
}
node[sport=gymnastics] {
    icon-image: "presets/sport/gymnastics.svg";
    set icon_z17;
}
node[sport=field_hockey] {
    icon-image: "presets/sport/field_hockey.svg";
    set icon_z17;
}
node[sport=ice_hockey] {
    icon-image: "presets/sport/ice_hockey.svg";
    set icon_z17;
}
node[sport=horse_racing] {
    icon-image: "presets/sport/riding.svg";
    set icon_z17;
}
node[sport=karting] {
    icon-image: "presets/sport/karting.svg";
    set icon_z17;
}
node[sport=motocross] {
    icon-image: "presets/sport/motocross.svg";
    set icon_z17;
}
node[sport=motor] {
    icon-image: "presets/sport/motor.svg";
    set icon_z17;
}
area[sport=athletics] {
    fill-color: sport_athletics#cfebd7;
}
node[sport=athletics] {
    icon-image: "presets/sport/athletics.svg";
    set icon_z17;
}
area[sport=running] {
    fill-color: sport_running#cfebd8;
}
node[sport=running] {
    icon-image: "presets/sport/running.svg";
    set icon_z17;
}
area[sport=multi] {
    fill-color: sport_multi#cfebd9;
}
node[sport=multi] {
    icon-image: "presets/sport/multi.svg";
    set icon_z17;
}
area[sport=pelota],
area[sport=racquet],
area[sport=ice_skating],
area[sport=roller_skating],
area[sport=skateboard] {
    fill-color: sport#bde3cb;
}
node[sport=pelota] {
    icon-image: "presets/sport/pelota.svg";
    set icon_z17;
}
node[sport=racquet] {
    icon-image: "presets/sport/racquetball.svg";
    set icon_z17;
}
node[sport=ice_skating] {
    icon-image: "presets/sport/ice_skating.svg";
    set icon_z17;
}
node[sport=roller_skating] {
    icon-image: "presets/sport/roller_skating.svg";
    set icon_z17;
}
node[sport=skating] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}
node[sport=skateboard] {
    icon-image: "presets/sport/skateboard.svg";
    set icon_z17;
}
area[sport=swimming] {
    fill-color: swimming_pool#51c4ef;
}
node[sport=swimming] {
    icon-image: "presets/sport/swimming.svg";
    set icon_z17;
}
area[sport=table_tennis],
area[sport=tennis],
area[sport=paintball] {
    fill-color: sport#bde3cb;
}
node[sport=table_tennis] {
    icon-image: "presets/sport/table_tennis.svg";
    set icon_z17;
}
node[sport=tennis] {
    icon-image: "presets/sport/tennis.svg";
    set icon_z17;
}
node[sport=paintball][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
area[sport=squash],
area[sport=shooting],
area[sport=volleyball],
area[sport=beachvolleyball],
area[sport=billiards],
area[sport=bowling],
area[sport=handball],
area[sport=rowing],
area[sport=sailing],
area[sport=scuba_diving],
area[sport=badminton] {
    fill-color: sport#bde3cb;
}
node[sport=squash][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[sport=shooting] {
    icon-image: "presets/sport/range.svg";
    set icon_z17;
}
node[sport=volleyball] {
    icon-image: "presets/sport/volleyball.svg";
    set icon_z17;
}
node[sport=beachvolleyball] {
    icon-image: "presets/sport/beachvolleyball.svg";
    set icon_z17;
}
node[sport=billiards] {
    icon-image: "presets/sport/billiards.svg";
    set icon_z17;
}
node[sport=bowling] {
    icon-image: "presets/sport/9pin.svg";
    set icon_z17;
}
node[sport=handball] {
    icon-image: "presets/sport/handball.svg";
    set icon_z17;
}
node[sport=rowing] {
    icon-image: "presets/sport/rowing.svg";
    set icon_z17;
}
node[sport=sailing][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[sport=scuba_diving] {
    icon-image: "presets/sport/scuba_diving.svg";
    set icon_z17;
}
node[sport=badminton][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
area[sport=archery],
area[sport=fishing],
area[sport=model_aerodrome],
area[sport=rc_car] {
    fill-color: sport#bde3cb;
}
node[sport=archery] {
    icon-image: "presets/sport/archery.svg";
    set icon_z17;
}
node[sport=fishing] {
    icon-image: "presets/sport/fishing.svg";
    set icon_z17;
}
node[sport=model_aerodrome] {
    icon-image: "presets/transport/airport.svg";
    set icon_z17;
}
node[sport=rc_car] {
    icon-image: "presets/sport/rc_car.svg";
    set icon_z17;
}

/*---------------*\
      Natural
\*---------------*/

/****************/
/* Natural Tags */
/****************/

area[natural=spring] {
    fill-color: light_water#00005f;
}
node[natural=spring] {
    icon-image: "presets/landmark/spring.svg";
    set icon_z17;
}
node[natural=saddle] {
    icon-image: "presets/landmark/saddle.svg";
    set icon_z0;
    set text_z0;
}
node[natural=peak] {
    icon-image: "presets/landmark/peak.svg";
    set icon_z0;
    text: auto;
    set text_z0;
}
node[natural=peak][tourism=viewpoint] {
    icon-image: "presets/sightseeing/peak_viewpoint.svg";
    set icon_z0;
    set text_z0;
}
area[natural=glacier] {
    fill-color: glacier#ffffff;
}
node[natural=volcano] {
    icon-image: "presets/landmark/volcano.svg";
    set icon_z0;
    set text_z0;
}
area[natural=cliff]:closed {
    fill-color: natural#002f00;
}
way[natural=cliff] {
    repeat-image: "presets/misc/cliff_pattern.svg";
    repeat-image-align: top;
    width: 1;
    color: #b2b2b2;
}
node[natural=cliff] {
    icon-image: "presets/misc/cliff.svg";
    set icon_z17;
}
way[natural=ridge] {
    width: 1;
    color: natural#002f00;
}
way[natural=valley] {
    width: 1;
    color: natural#002f00;
}
area[natural=scree] {
    fill-color: scree#c3c3c3;
}
area[natural=shingle] {
    fill-color: shingle#c3c3c3;
}
area[natural=scrub] {
    fill-color: scrub#007000;
}
area[natural=fell] {
    fill-color: natural#002f00;
}
area[natural=heath] {
    fill-color: heath#ffffc0;
}
way[natural=tree_row] {
    width: 2;
    color: woodarea#008000;
}
area[natural=wood] {
    fill-color: woodarea#008000;
}
area[natural=grassland] {
    fill-color: green#b1e0c2;
}
area[natural=wetland] {
    fill-color: marsh#4f4ff3;
}
area[natural=water] {
    fill-color: water#0000ff;
}
area[natural=water][intermittent=yes] {
    width: 2;
    dashes: 15, 5;
}
way[natural=coastline] {
    width: 2;
    color: water#0000ff;
    right-casing-color: water#0000ff;
    right-casing-width: 15;
    right-casing-opacity: 0.35;
}
area[natural=mud] {
    fill-color: mud#cba762;
}
area[natural=beach] {
    fill-color: beach#f8dba2;
}
area[natural=sand] {
    fill-color: sand#f8dba2;
}
area[natural=bare_rock] {
    fill-color: bare_rock#f8f8c7;
}
area[natural=rock] {
    fill-color: stone#f8f8c7;
}
node[natural=rock] {
    icon-image: "presets/misc/rock.svg";
    set icon_z17;
}
area[natural=stone] {
    fill-color: stone#f8f8c7;
}
node[natural=stone] {
    icon-image: "presets/misc/stone.svg";
    set icon_z17;
}
area[natural=bay] {
    fill-color: natural#002f00;
}
way[natural=bay] {
    width: 2;
    color: natural#002f00;
}
node[natural=bay] {
    icon-image: "presets/nautical/bay.svg";
    set icon_z17;
}
area[natural=cave_entrance] {
    fill-color: natural#002f00;
}
node[natural=cave_entrance] {
    icon-image: "presets/landmark/cave_entrance.svg";
    set icon_z17;
}
node[natural=cape] {
    icon-image: "presets/nautical/cape.svg";
    set icon_z17;
}
area[natural=strait]:closed {
    fill-color: natural#002f00;
}
way[natural=strait] {
    width: 2;
    color: natural#002f00;
}
node[natural=strait] {
    icon-image: "presets/nautical/strait.svg";
    set icon_z17;
}
area[natural=reef] {
    fill-color: reef#80c9ff;
}
node[natural=reef]{
    icon-image: "presets/landmark/reef.svg";
    set icon_z17;
}
node[natural=tree] {
    icon-image: "presets/landmark/trees.svg";
    set icon_z17;
}
node[natural=tree][leaf_type=needleleaved] {
    icon-image: "presets/landmark/trees_conifer.svg";
    set icon_z17;
}
node[natural=tree][leaf_type=broadleaved] {
    icon-image: "presets/landmark/trees_broad_leaved.svg";
    set icon_z17;
}
node[natural=glacier],
node[natural=scree],
node[natural=shingle],
node[natural=scrub],
node[natural=fell],
node[natural=heath],
node[natural=tree_row],
node[natural=wood],
node[natural=grassland],
node[natural=wetland],
node[natural=water],
node[natural=coastline],
node[natural=mud],
node[natural=beach],
node[natural=sand],
node[natural=land],
node[natural=bare_rock],
node[natural=ridge],
node[natural=valley] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}

/*****************/
/* Waterway Tags */
/*****************/

way[waterway=river] {
    width: 2;
    color: water#0000ff;
}
area[waterway=riverbank] {
    fill-color: riverbank#0000cf;
    width: 1;
    color: riverbank#0000cf;
}
way[waterway=canal],
way[waterway=pressurised] {
    width: 2;
    color: water#0000ff;
}
way[waterway=river][lock=yes],
way[waterway=canal][lock=yes] {
    casing-width: 2;
    casing-color: lock#303030;
    casing-dashes: 5,20;
}
way[waterway=pressurised][tunnel] {
    casing-width: 1;
    casing-color: tunnel#964B00;
}
way[waterway=pressurised][man_made=pipeline] {
    casing-width: 1;
    casing-color: pipeline#660000;
}
way[waterway=stream] {
    width: 1;
    color: stream#6600cc;
}
way[waterway=ditch], 
way[waterway=drain] {
    width: 1;
    color: water#0000ff;
}
way[waterway=tidal_channel] {
    width: 1;
    color: tidal_channel#0000ff;
}
way[waterway=river][intermittent=yes],
area[waterway=riverbank][intermittent=yes],
way[waterway=canal][intermittent=yes],
way[waterway=stream][intermittent=yes],
way[waterway=ditch][intermittent=yes],
way[waterway=drain][intermittent=yes],
way[waterway=tidal_channel][intermittent=yes] {
    dashes: 15, 5;
}
area[waterway=dock] {
    fill-color: dock#0000cf;
}
node[waterway=dock] {
    icon-image: "presets/nautical/boatyard.svg";
    set icon_z17;
}
way[waterway=lock_gate] {
    width: 3;
    color: lock_gate#303030;
}
node[waterway=lock_gate] {
    icon-image: "presets/nautical/lock_gate.svg";
    set icon_z17;
}
node[waterway=turning_point] {
    icon-image: "presets/nautical/turning.svg";
    set icon_z17;
}
area[waterway=boatyard] {
    fill-color: manmade#d8d8d8;
}
node[waterway=boatyard] {
    icon-image: "presets/nautical/boatyard.svg";
    set icon_z17;
}
node[waterway=water_point],
node[waterway=waste_disposal],
node[waterway=mooring] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}
node[mooring] {
    icon-image: "presets/nautical/marina.svg";
    set icon_z17;
}
area[waterway=fuel] {
    fill-color: amenity_traffic#f7efb7;
}
node[waterway=fuel] {
    icon-image: "presets/nautical/marine_fuel.svg";
    set icon_z17;
}
way[waterway=weir] {
    width: 2;
    color: manmade#d8d8d8;
}
node[waterway=weir] {
    icon-image: "presets/nautical/weir.svg";
    set icon_z17;
}
area[waterway=dam]:closed {
    fill-color: manmade#d8d8d8;
}
way[waterway=dam] {
    width: 2;
    color: manmade#d8d8d8;
}
node[waterway=dam] {
    icon-image: "presets/nautical/dam.svg";
    set icon_z17;
}

way[waterway=waterfall] {
    width: 2;
    color: manmade#d8d8d8;
}
node[waterway=waterfall] {
    icon-image: "presets/nautical/waterfall.svg";
    set icon_z17;
}
node[waterway=river], node[waterway=riverbank],
node[waterway=canal], node[waterway=wadi],
node[waterway=stream],
node[waterway=ditch], node[waterway=drain] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}

/*******************/
/* Properties Tags */
/*******************/

node|z14-[mountain_pass?] {
    icon-image: "presets/landmark/mountain_pass.svg";
    set icon_z0;
    set text_z0;
}

/****************/
/* Landuse Tags */
/****************/


/* Big landuse labels setting */
area|z17-[landuse][setting("Show_Landuse_Labels_setting")],
area|z17-[leisure][setting("Show_Landuse_Labels_setting")],
area|z17-[amenity][setting("Show_Landuse_Labels_setting")],
area|z17-[place][setting("Show_Landuse_Labels_setting")],
area|z17-[natural][setting("Show_Landuse_Labels_setting")],
area|z17-[man_made][setting("Show_Landuse_Labels_setting")] {
    text: tag("landuse");
    font-weight: bold;
    font-size: 25;
}

area[landuse],
area[leisure],
area[amenity],
area[place],
area[natural],
area[man_made] {
    z-index: -2; 
}
area[landuse=farmland] {
    fill-color: farmland#b8e0b1;
}
area[landuse=meadow] {
    fill-color: meadow#b1e0b6;
}
area[landuse=vineyard],
area[landuse=orchard] {
    fill-color: green#b1e0c2;
}
area[landuse=quarry] {
    fill-color: quarry#888888;
}
area[landuse=landfill] {
    fill-color: landfill#663300;
}
area[landuse=basin],
area[landuse=reservoir] {
    fill-color: basin#0000bf;
}
area[landuse=forest] {
    fill-color: forest#b1efc8;
}
area[landuse=allotments] {
    fill-color: allotments#5dbf80;
}
area[landuse=greenhouse_horticulture],
area[landuse=plant_nursery] {
    fill-color: green#b1e0c2;
}
area[landuse=salt_pond] {
    fill-color: salt_pond#eeeeee;
}
area[landuse=aquaculture] {
    fill-color: aquaculture#189dff;
}
area[landuse=grass] {
    fill-color: grass#97ca96;
}
area[landuse=residential] {
    fill-color: residential#D594FF;
}
area[landuse=garages] {
    fill-color: garages#d6c8aa;
}
area[landuse=farmyard] {
    fill-color: farmyard#f0f0f0;
}
area[landuse=retail],
area[landuse=commercial] {
    fill-color: retail#ffc4ee;
}
area[landuse=industrial] {
    fill-color: industrial#ecd8ff;
}
area[landuse=brownfield] {
    fill-color: brownfield#ecba32;
}
area[landuse=greenfield] {
    fill-color: greenfield#b1ec5c;
}
area[landuse=railway] {
    fill-color: railland#888888;
}
area[landuse=construction] {
    fill-color: construction#ffff00;
}
way[landuse=construction] {
    width: 1;
    color: construction#ffff00;
    dashes: 9,9;
}
area[landuse=military] {
    fill-color: military#b62c2c;
}
area[landuse=religious] {
    fill-color: religious#ffd454;
}
area[landuse=cemetery] {
    fill-color: cemetery#b1efc8;
}
area[landuse=village_green] {
    fill-color: green#b1e0c2;
}
area[landuse=recreation_ground] {
    fill-color: green#b1e0c2;
}
node[landuse] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}
node|z14-[mountain_pass?] {
    icon-image: "presets/landmark/mountain_pass.svg";
    set icon_z0;
    set text_z0;
}

/*-----------------*\
      Transport
\*-----------------*/

/*************************/
/* Public_transport Tags */
/*************************/

/* Traffic Signs */

node[traffic_sign][access?!] {
    icon-image: "presets/vehicle/restriction/access.svg";
    set icon_z17;
}
node[traffic_sign][access=permissive][!is_prop_set(icon-image)],
node[traffic_sign][access=private][!is_prop_set(icon-image)],
node[traffic_sign][access=destination][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[traffic_sign][bicycle?!] {
    icon-image: "presets/vehicle/restriction/bicycle.svg";
    set icon_z17;
}
node[traffic_sign][bicycle=designated] {
    icon-image: "presets/vehicle/restriction/bicycle-designated.svg";
    set icon_z17;
}
node[traffic_sign][foot?!] {
    icon-image: "presets/vehicle/restriction/foot.svg";
    set icon_z17;
}
node[traffic_sign][foot=designated] {
    icon-image: "presets/vehicle/restriction/foot-designated.svg";
    set icon_z17;
}
node[traffic_sign][goods?!],
node[traffic_sign][hgv?!] {
    icon-image: "presets/vehicle/restriction/goods.svg";
    set icon_z17;
}
node[traffic_sign][horse?!] {
    icon-image: "presets/vehicle/restriction/horse.svg";
    set icon_z17;
}
node[traffic_sign][horse=designated] {
    icon-image: "presets/vehicle/restriction/horse-designated.svg";
    set icon_z17;
}
node[traffic_sign][motorcycle?!] {
    icon-image: "presets/vehicle/restriction/motorbike.svg";
    set icon_z17;
}
node[traffic_sign][motorcar?!] {
    icon-image: "presets/vehicle/restriction/motorcar.svg";
    set icon_z17;
}
node[traffic_sign][psv?!] {
    icon-image: "presets/vehicle/restriction/psv.svg";
    set icon_z17;
}
node[traffic_sign][motorboat?!][!is_prop_set(icon-image)],
node[traffic_sign][boat?!][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[noexit=yes] {
    icon-image: "presets/vehicle/restriction/dead_end.svg";
    set icon_z17;
}
node[traffic_sign][maxweight] {
    icon-image: "presets/vehicle/restriction/maxweight.svg";
    set icon_z17;
}
node[traffic_sign][maxheight] {
    icon-image: "presets/vehicle/restriction/maxheight.svg";
    set icon_z17;
}
node[traffic_sign][maxwidth] {
    icon-image: "presets/vehicle/restriction/maxwidth.svg";
    set icon_z17;
}
node[traffic_sign][maxlength] {
    icon-image: "presets/vehicle/restriction/maxlength.svg";
    set icon_z17;
}
node[traffic_sign][minspeed] {
    icon-image: "presets/vehicle/restriction/minspeed.svg";
    set icon_z17;
}
node[traffic_sign][maxstay][!is_prop_set(icon-image)],
node[traffic_sign][toll][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}

/************************************/
/* low rendering priority properties */
/*************************************/

area[changing_table=yes],
area[changing_table=limited] {
    fill-color: changing_table#f7efb7; 
}
node[changing_table=yes],
node[changing_table=limited] {
    icon-image: "presets/service/changing_table.svg";
    set icon_z17; 
}

/* Public transport */

node[highway=bus_stop] {
    icon-image: "presets/transport/bus_small.svg";
    set icon_z17;
}
node[public_transport=stop_position] {
    icon-image: "presets/transport/stop_position.svg";
    set icon_z17;
}
node[public_transport=stop_position][share_taxi=yes] {
    icon-image: "presets/transport/share_taxi.svg";
    set icon_z17;
}
node[public_transport=stop_position][bus=yes] {
    icon-image: "presets/transport/bus.svg";
    set icon_z17;
}
node[public_transport=stop_position][train=yes] {
    icon-image: "presets/transport/train.svg";
    set icon_z17;
}
node[public_transport=stop_position][tram=yes] {
    icon-image: "presets/transport/railway/tram.svg";
    set icon_z17;
}
node[public_transport=stop_position][light_rail=yes] {
    icon-image: "presets/transport/railway/light_rail.svg";
    set icon_z17;
}
node[public_transport=stop_position][subway=yes] {
    icon-image: "presets/transport/railway/subway.svg";
    set icon_z17;
}
node[public_transport=stop_position][monorail=yes] {
    icon-image: "presets/transport/railway/monorail.svg";
    set icon_z17;
}
node[public_transport=stop_position][trolleybus=yes] {
    icon-image: "presets/transport/trolleybus.svg";
    set icon_z17;
}
node[public_transport=stop_position][funicular=yes] {
    icon-image: "presets/transport/railway/funicular.svg";
    set icon_z17;
}
node[public_transport=stop_position][aerialway=yes] {
    icon-image: "presets/transport/aerialway/station.svg";
    set icon_z17;
}
node[public_transport=stop_position][ferry=yes] {
    icon-image: "presets/nautical/ferry.svg";
    set icon_z17;
}
area[public_transport=platform]:closed {
    fill-color: service#809bc0;
}
way[public_transport=platform]!:closed {
    width: 3;
    color: service#809bc0;
    dashes: 12,3;
}
node[public_transport=platform] {
    icon-image: "presets/transport/platform.svg";
    set icon_z17;
}
node[public_transport=platform][ferry=yes] {
    icon-image: "presets/nautical/ferry.svg";
    set icon_z17;
}
area[public_transport=station] {
    fill-color: railwaypoint#f7efb7;
}
node[public_transport=station] {
    icon-image: "presets/transport/station.svg";
    set icon_z17;
}

/****************/
/* Railway Tags */
/****************/

area[railway=station],
area[railway=tram_station],
area[railway=subway_entrance],
area[railway=station] {
    fill-color: railwaypoint#f7efb7;
}
node[railway=station] {
    icon-image: "presets/transport/railway_station.svg";
    set icon_z17;
}
node[railway=halt] {
    icon-image: "presets/transport/railway_halt.svg";
    icon-width: 16;
    set icon_z17;
}
node[railway=tram_stop] {
    icon-image: "presets/transport/tram.svg";
    set icon_z17;
}
node[railway=subway_entrance] {
    icon-image: "presets/transport/underground.svg";
    set icon_z17;
}
node[railway=crossing] {
    icon-image: "presets/transport/railway/crossing.svg";
    set icon_z17;
}
node[railway=level_crossing] {
    icon-image: "presets/transport/railway/level_crossing.svg";
    set icon_z17;
}
way[railway=rail] {
    width: 2;
    color: rail#404040;
    dashes: 9,9;
    dashes-background-color: raildashed#ffffff;
}
way[railway=rail][service=crossover],
way[railway=rail][service=siding] {
    width: 1;
}
way[railway=rail][service=yard],
way[railway=rail][service=spur] {
    width: 1;
    color: railyard#552200;
}

way[highway][railway=tram]::core_railway, 
way[!highway][railway=tram] {
    object-z-index: 1;
    modifier: false; 
    width: 1;
    color: railover#202020;
    dashes: 9,9;
    casing-width: 1;
    casing-color: otherrail#808080;
    casing-linecap: round;
    casing-dashes: 9,9;
}

way[highway][railway=tram][service=crossover]::core_railway,
way[!highway][railway=tram][service=crossover],
way[highway][railway=tram][service=siding]::core_railway,
way[!highway][railway=tram][service=siding],
way[highway][railway=tram][service=yard]::core_railway,
way[!highway][railway=tram][service=yard],
way[highway][railway=tram][service=spur]::core_railway,
way[!highway][railway=tram][service=spur] {
    dashes: 6,6;
    casing-dashes: 6,6;
}

way[railway=light_rail] {
    width: 2;
    color: otherrail#808080;
    dashes: 9,9;
}
way[railway=subway] {
    width: 1;
    color: subway#606060;
    dashes: 9,9;
}
way[railway=preserved] {
    width: 1;
    color: oldrail#404040;
    dashes: 9,9;
}

way[railway=light_rail][service=crossover],
way[railway=light_rail][service=siding],
way[railway=light_rail][service=yard],
way[railway=light_rail][service=spur],
way[railway=subway][service=crossover],
way[railway=subway][service=siding],
way[railway=subway][service=yard],
way[railway=subway][service=spur],
way[railway=preserved][service=crossover],
way[railway=preserved][service=siding],
way[railway=preserved][service=yard],
way[railway=preserved][service=spur] {
    dashes: 6,6;
}

way[railway=disused][highway]::core_railway,
way[railway=disused][!highway],
way[railway=abandoned][highway]::core_railway,
way[railway=abandoned][!highway] {
    width: 1;
    modifier: false;
    z-index: 1;
    color: oldrail#404040;
    dashes: 9,9;
}
way[railway=narrow_gauge],
way[railway=monorail] {
    width: 1;
    color: rail#404040;
    dashes: 9,9;
}
way[railway=narrow_gauge][service=crossover],
way[railway=narrow_gauge][service=siding],
way[railway=narrow_gauge][service=yard],
way[railway=narrow_gauge][service=spur],
way[railway=monorail][service=crossover],
way[railway=monorail][service=siding],
way[railway=monorail][service=yard],
way[railway=monorail][service=spur] {
    dashes: 6,6;
}
area[railway=turntable] {
    fill-color: rail#404040;
}
node[railway=turntable] {
    icon-image: "presets/transport/railway/turntable.svg";
    set icon_z17;
}
node[railway=buffer_stop] {
    icon-image: "presets/transport/railway/buffer_stop.svg";
    set icon_z17;
}
area[railway=platform]:closed {
    fill-color: rail#404040;
}
way[railway=platform] {
    width: 2;
    color: rail#404040;
}
way[railway=funicular] {
    width: 1;
    color: rail#404040;
    dashes: 9,9;
}
node[railway=switch] {
    icon-image: "presets/transport/railway/switch.svg";
    set icon_z17;
}
node[railway=railway_crossing] {
    icon-image: "presets/transport/railway/railway_crossing.svg";
    set icon_z17;
}
node[railway=signal] {
    icon-image: "presets/transport/railway/signal.svg";
    set icon_z17;
}
node[railway=milestone] {
    icon-image: "presets/transport/railway/milestone.svg";
    set icon_z17;
}
node[railway=rail], node[railway=tram], node[railway=light_rail],
node[railway=subway], node[railway=preserved],
node[railway=disused], node[railway=abandoned],
node[railway=narrow_gauge], node[railway=monorail],
node[railway=platform], node[railway=funicular],
node[service=yard], node[service=siding], node[service=spur] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}
way[railway=construction][!highway] {
    width: 1;
    color: construction#ffff00;
    dashes: 9,9;
}
way[railway=construction][construction=rail] {
    width: 2;
    color: rail#404040;
    dashes: 9,9;
    dashes-background-color: construction#ffff00;
}
way[railway=construction][construction=light_rail] {
    width: 2;
}
way[railway=construction][construction=tram][highway]::core_railway,
way[railway=construction][construction=tram][!highway] {
    z-index: 1;
    width: 1;
    color: railover#202020;
    dashes: 9,9;
    casing-width: 1;
    casing-color: construction#ffff00;
    casing-linecap: round;
    casing-dashes: 9,9;
}

/****************/
/* Aeroway Tags */
/****************/

area[aeroway=aerodrome] {
    color: aeroway#cc3300;
    fill-color: aeroway#7653bd;
    width: 2;
    dashes: 9,9;
}

node[aeroway=aerodrome][military!=airfield] {
    icon-image: "presets/transport/airport.svg";
    set icon_z17;
}
area[aeroway=terminal] {
    fill-color: terminal#cc3300;
}
node[aeroway=terminal] {
    icon-image: "presets/transport/airport/terminal.svg";
    set icon_z17;
}
area[aeroway=helipad] {
    fill-color: aeroway_dark#cc0000;
}
node[aeroway=helipad] {
    icon-image: "presets/transport/airport/helipad.svg";
    set icon_z17;
}
way[aeroway=taxiway] {
    width: 2;
    color: aeroway#ffa31a;
    dashes: 20,10;
    dashes-background-color: brown;
}
area[aeroway=taxiway]:closed {
    color: aeroway#ffa31a;
    fill-color: #e68a00;
}
relation[type=multipolygon][area:aeroway=taxiway] >[role=inner] way ,
relation[type=multipolygon][area:aeroway=taxiway] >[role=outer] way {
    width: 2;
    color: aeroway#ffa31a;
    dashes: 10,20;
}
way[aeroway=runway] {
    width: 3;
    color: aeroway#262626;
}
area[aeroway=runway]:closed {
    color: aeroway#262626;
    fill-color: #262626;
}
relation[type=multipolygon][area:aeroway=runway] >[role=inner] way ,
relation[type=multipolygon][area:aeroway=runway] >[role=outer] way {
    width: 3;
    color: aeroway#262626;
    dashes: 20,20;
    casing-width: 1;
    casing-color: #ffa31a;
    casing-dashes: 20,20;
    casing-linecap: round;
}
way[aeroway=parking_position] {
    width: 1;
    color: aeroway#e67300;
}
node[aeroway=parking_position] {
    icon-image: "presets/transport/airport/parking_position.svg";
    set icon_z17;
}
area[aeroway=apron],
area[aeroway=hangar] {
    fill-color: aeroway_light#ffcc80;
}
node[aeroway=apron],
node[aeroway=runway],
node[aeroway=taxiway] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}
node[aeroway=holding_position] {
    icon-image: "presets/transport/airport/holding_position.svg";
    set icon_z17; 
}
node[aeroway=hangar] {
    icon-image: "presets/transport/airport/hangar.svg";
    set icon_z17;
}
node[aeroway=gate] {
    icon-image: "presets/transport/airport/gate.svg";
    set icon_z17;
}
node[airmark=beacon] {
    icon-image: "presets/transport/airport/airmark_beacon.svg";
    set icon_z17;
}
node[aeroway=navigationaid] {
    icon-image: "presets/transport/airport/navigationaid.svg";
    set icon_z17;
}
node[aeroway=windsock] {
    icon-image: "presets/transport/airport/windsock.svg";
    set icon_z17;
}

/******************/
/* Aerialway Tags */
/******************/

way[aerialway=cable_car],
way[aerialway=gondola] {
    width: 1;
    color: aerialway#663300;
    dashes: 9,9;
}
way[aerialway=chair_lift] {
    width: 1;
    color: aerialway#663300;
    dashes: 6,6;
}
way[aerialway=mixed_lift] {
    width: 1;
    color: aerialway#663300;
    dashes: 6,6,9,6;
}
way[aerialway=j-bar],
way[aerialway=t-bar],
way[aerialway=platter],
way[aerialway=rope_tow],
way[aerialway=drag_lift] {
    width: 1;
    color: aerialway#663300;
    dashes: 3,3;
}
way[aerialway=magic_carpet] {
    width: 1;
    color: aerialway#663300;
    dashes: 3,3;
}
way[aerialway=goods] {
    width: 1;
    color: aerialway#663300;
    dashes: 2,2;
}
way[aerialway=zip_line] {
    width: 1;
    color: aerialway#663300;
    dashes: 3,3;
}
area[aerialway=station] {
    fill-color: aerialway#663300;
}
node[aerialway=station] {
    icon-image: "presets/transport/aerialway/station.svg";
    set icon_z17;
}
node[aerialway=pylon] {
    icon-image: "presets/transport/aerialway/pylon.svg";
    set icon_z17;
}
node[aerialway=cable_car],
node[aerialway=gondola],
node[aerialway=chair_lift],
node[aerialway=mixed_lift],
node[aerialway=drag_lift],
node[aerialway=t-bar],
node[aerialway=j-bar],
node[aerialway=platter],
node[aerialway=magic_carpet],
node[aerialway=rope_tow],
node[aerialway=goods],
node[aerialway=zip_line] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}

/**************/
/* Route Tags */
/**************/

way[route=ferry] {
    width: 2;
    color: ferry#809bc0;
    casing-width: 5;
    casing-color: blue;
    dashes: 9,9;
    casing-opacity: 0.3;
    casing-dashes: 3,3;
    text: eval(concat("Name = ", tag("name"), " | ", "Ref = ", tag("ref")));
    text-halo-radius: 1.2;
    text-halo-color: black;
    text-color: white;
    font-size: 15;
}

relation[type=route][route=ferry] > way { 
  width: 2; 
  color: ferry#809bc0; 
  casing-width: 5; 
  casing-color: eval(cond(tag("name"),#680BAB,lightblue)); 
  dashes: 9,9; 
  casing-opacity: 0.3; 
  casing-dashes: 3,3; 
  text: eval(cond( tag("name"), concat("Name(w) = ", tag("name"), " & ", "Ref(w) = ", tag("ref")," | ","Name(r) = ", parent_tag("name"), " & ", "Ref(r) = ", parent_tag("ref")),concat("Name = ", parent_tag("name"), " | ", "Ref = ", parent_tag("ref")) )); 
  text-halo-radius: 1.2; 
  text-halo-color: black; 
  text-color: white; 
  font-size: 15; 
}

node[route=bus],
node[route=ferry],
node[route=flight],
node[route=ncn],
node[route=subsea],
node[route=ski],
node[route=tour],
node[route=pub_crawl] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}

/******************/
/* Maxspeed Nodes */
/******************/

node[traffic_sign][maxspeed=none][!is_prop_set(icon-image)] {
    icon-image: "presets/vehicle/restriction/maxspeed_none.svg";
    set icon_z17;
}
node[traffic_sign][maxspeed=~/^[0-9]+$/][!is_prop_set(icon-image)] {
    maxspeedprop: tag(maxspeed);
    set maxspeedclass;
}
node[traffic_sign][maxspeed=signals][!is_prop_set(icon-image)] {
    maxspeedprop: " ?";
    set maxspeedclass;
}
node[traffic_sign][maxspeed=~/^[0-9]+ mph/][!is_prop_set(icon-image)] {
    maxspeedprop: get(split(" mph",tag(maxspeed)),0);
    set maxspeedclass;
}
node[traffic_sign][maxspeed=~/[0-9]+ km\/h/][!is_prop_set(icon-image)] {
    maxspeedprop: get(split(" km/h",tag(maxspeed)),0);
    set maxspeedclass;
}
node[traffic_sign][maxspeed=~/[0-9]+ knots/][!is_prop_set(icon-image)] {
    maxspeedprop: get(split(" knots",tag(maxspeed)),0);
    set maxspeedclass;
}
node[prop(maxspeedclass, default)][!is_prop_set(icon-image, default)]::core_maxnodebg {
    symbol-shape: circle;
    symbol-size: 17;
    symbol-fill-color: white;
    major-z-index: 4.2;
}
node[traffic_sign][maxspeed]["maxspeed:variable"]["maxspeed:variable"!="no"]::core_maxnodebg,
node[traffic_sign][maxspeed=signals]::core_maxnodebg {
    symbol-fill-color: black;
}
node[prop(maxspeedclass, default)]::core_maxnodefg {
    symbol-shape: circle;
    symbol-size: 15;
    symbol-stroke-color: crimson;
    symbol-stroke-width: 2;
    text: prop(maxspeedprop, default);
    font-size: 8;
    font-weight: bold;
    text-color: black;
    text-anchor-horizontal: center;
    text-anchor-vertical: center;
    text-offset-x: 0;
    text-offset-y: -1;
    major-z-index: 4.2;
}
node[traffic_sign][maxspeed]["maxspeed:variable"]["maxspeed:variable"!="no"]::core_maxnodefg,
node[traffic_sign][maxspeed=signals]::core_maxnodefg {
    text-color: white;
}
node|z-16[prop(maxspeedclass, default)][setting("hide_icons")]::core_maxnodebg {
    symbol-shape: none;
}
node|z-16[prop(maxspeedclass, default)][setting("hide_icons")]::core_maxnodefg {
    text: none;
    symbol-shape: none;
}

/*----------------------------------------------------------------------------------------------------------------------*\
                                                  Admin/Places/Territories
\*----------------------------------------------------------------------------------------------------------------------*/

/*****************/
/* Military Tags */
/*****************/

area[military=airfield],
area[military=bunker],
area[military=barracks],
area[military=danger_area],
area[military=range] {
    fill-color: military#b62c2c;
}
node[military=airfield] {
    icon-image: "presets/transport/airport/airfield.svg";
    set icon_z17;
}
node[military=bunker] {
    icon-image: "presets/landmark/bunker.svg";
    set icon_z17;
}
node[military=barracks][!is_prop_set(icon-image)] {
    icon-image: "presets/misc/no_icon.svg";
    set icon_z17;
}
node[military=danger_area] {
    icon-image: "presets/misc/danger.svg";
    set icon_z17;
}
node[military=range] {
    icon-image: "presets/landmark/range.svg";
    set icon_z17;
}

/*****************/
/* Boundary Tags */
/*****************/

relation[boundary] > way::core_boundary,
way[boundary]::core_boundary {
    z-index: 2;
    modifier: false;
    width: 1;
    color: boundary#7a7979;
    dashes: 9,9;
    casing-opacity: 0.5;
    dashes-background-color: white;
} 

relation[boundary=protected_area] > way::core_boundary,
relation[boundary=administrative] > way::core_boundary,
relation[boundary=postal_code] > way::core_boundary,
relation[boundary=political] > way::core_boundary,
relation[boundary=maritime] > way::core_boundary,
relation[boundary=national_park] > way::core_boundary,
way[boundary=protected_area]::core_boundary,
way[boundary=administrative]::core_boundary,
way[boundary=postal_code]::core_boundary,
way[boundary=political]::core_boundary,
way[boundary=maritime]::core_boundary,
way[boundary=national_park]::core_boundary {
    z-index: 2;
    modifier: false;
    width: 1;
    color: boundary#FF6600;
    dashes: 9,9;
    casing-opacity: 0.5;
    dashes-background-color: black;
}
way[admin_level=9]::core_boundary,
relation[admin_level=9] > way::core_boundary,
way[admin_level=10]::core_boundary,
relation[admin_level=10] > way::core_boundary {
    z-index: 2;
    modifier: false;
    width: 1;
    color: boundary#FF6600;
    dashes: 9,9;
    dashes-background-color: black;
}
way[admin_level=7]::core_boundary,
relation[admin_level=7] > way::core_boundary,
way[admin_level=8]::core_boundary,
relation[admin_level=8] > way::core_boundary {
    z-index: 2;
    modifier: false;
    width: 2;
    color: boundary#FF6600;
    dashes: 9,9;
    dashes-background-color: black;
}
way[admin_level=6]::core_boundary,
relation[admin_level=6] > way::core_boundary {
    z-index: 2;
    modifier: false;
    width: 3;
    color: boundary#FF6600;
    dashes: 9,9;
    dashes-background-color: black;
}
way[admin_level=5]::core_boundary,
relation[admin_level=5] > way::core_boundary {
    z-index: 2;
    modifier: false;
    width: 3;
    color: yellow;
    dashes: 9,9;
    dashes-background-color: black;
    casing-width: 2;
    casing-color: red;
}
way[admin_level=3]::core_boundary,
relation[admin_level=3] > way::core_boundary,
way[admin_level=4]::core_boundary,
relation[admin_level=4] > way::core_boundary {
    z-index: 2;
    modifier: false;
    width: 4;
    color: yellow;
    dashes: 13,20;
    dashes-background-color: black;
    casing-width: 3;
    casing-color: red;
}
way[admin_level=1]::core_boundary,
relation[admin_level=1] > way::core_boundary,
way[admin_level=2]::core_boundary,
relation[admin_level=2] > way::core_boundary {
    z-index: 2;
    modifier: false;
    width: 7;
    color: yellow;
    dashes: 25,15,15,25;
    dashes-background-color: black;
    casing-width: 5;
    casing-color: red;
    text: name;
    font-size: 12;
    text-offset: 10;
    font-weight: bold;
    text-color:black;
    text-halo-color: white;
    text-halo-radius: 1;
}
node[boundary=national],
node[boundary=administrative],
node[boundary=postal_code],
node[boundary=political],
node[boundary=national_park] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}

/***************************/
/* Small Territories Names */
/***************************/

node[place=continent],
node[place=country],
node[place=state],
node[place=region],
node[place=county],
node|z12-[place=city],
node|z12-[place=town],
node|z13-[place=suburb],
node|z13-[place=village],
node|z13-[place=neighbourhood],
node|z13-[place=hamlet],
node|z13-[place=isolated_dwelling],
node|z13-[place=farm],
node|z13-[place=island],
node|z13-[place=islet] {
    set icon_z0;
    set text_z0;
    font-weight: bold;
    text-color:black;
    text-halo-color: white;
    text-halo-radius: 1;
    set place;
}
node[place=continent],
node[place=country],
node[place=state],
node[place=region],
node[place=county] {
    icon-image: "presets/place/capital.svg";
    z-index: 2.9;
}
node|z11-[place=city] {
    icon-image: "presets/place/city.svg";
    z-index: 2.8;
}
node|z11-[place=town] {
    icon-image: "presets/place/town.svg";
    z-index: 2.7;
}
node|z11-[place=suburb] {
    icon-image: "presets/place/suburb.svg";
    z-index: 2.6;
}
node|z11-[place=village] {
    icon-image: "presets/place/village.svg";
    z-index: 2.5;
}
node|z11-[place=neighbourhood] {
    icon-image: "presets/place/neighbourhood.svg";
    z-index: 2.4;
}
node|z11-[place=hamlet] {
    icon-image: "presets/place/hamlet.svg";
    z-index: 2.3;
}
node|z11-[place=isolated_dwelling] {
    icon-image: "presets/place/isolated_dwelling.svg";
    z-index: 2.2;
}
node|z11-[place=farm] {
    icon-image: "presets/place/farm.svg";
    z-index: 2.1;
}
node|z11-[place=locality],
node|z-14[place=locality][!setting("hide_icons")] {
    icon-image: "presets/place/locality.svg";
    font-weight: bold;
    text-color:black;
    text-halo-color: white;
    text-halo-radius: 1;
}
node|z11-[place=island] {
    icon-image: "presets/place/island.svg";
}
node|z11-[place=islet] {
    icon-image: "presets/place/islet.svg";
}

/**************/
/* Place Tags */
/**************/

area[place=continent],
area[place=country],
area[place=state],
area[place=region],
area[place=county],
area[place=city],
area[place=town],
area[place=village],
area[place=hamlet],
area[place=farm],
area[place=isolated_dwelling],
area[place=neighbourhood],
area[place=suburb],
area[place=locality],
area[place=plot],
area[place=city_block] {
    fill-color: place#E6E6FA;
    color: #9370DB;
    width: 2;
}

area[place=island],
area[place=islet] {
  fill-color: place#8de3cb;
    color: darkorange;
    width: 2;
}

node[place=continent][setting("highway_labels")],
node[place=country][setting("highway_labels")],
node[place=state][setting("highway_labels")],
node[place=region][setting("highway_labels")],
node[place=county][setting("highway_labels")] {
    icon-image: "presets/place/capital.svg";
    set icon_z0;
    text: auto;
    set text_z0;
    font-size: 20;
    font-weight: bold;
    text-color: black;
    text-halo-color: white;
    text-halo-radius: 1.9;
    z-index: 2.9;
}
node|z12-[place=city][setting("highway_labels")] {
    set icon_z0;
    text: auto;
    set text_z0;
    font-size: 20;
    font-weight: bold;
    text-color: black;
    text-halo-color: white;
    text-halo-radius: 1.9;
    z-index: 2.8;
}
node|z9-[place=city][setting("highway_labels")] {
    icon-image: "presets/place/city.svg";
}

node|z12-[place=town][setting("highway_labels")] {
    set icon_z0;
    text: auto;
    set text_z0;
    font-size: 20;
    font-weight: bold;
    text-color: black;
    text-halo-color: white;
    text-halo-radius: 1.9;
    z-index: 2.7;
}
node|z9-[place=town][setting("highway_labels")] {
    icon-image: "presets/place/town.svg";
}


node|z13-[place=suburb][setting("highway_labels")] {
    set icon_z0;
    text: auto;
    set text_z0;
    font-size: 17;
    font-weight: bold;
    text-color: black;
    text-halo-color: white;
    text-halo-radius: 1.9;
    z-index: 2.6;
}
node|z10-[place=suburb][setting("highway_labels")] {
    icon-image: "presets/place/suburb.svg";
}

node|z13-[place=village][setting("highway_labels")] {
    set icon_z0;
    text: auto;
    set text_z0;
    font-size: 17;
    font-weight: bold;
    text-color: black;
    text-halo-color: white;
    text-halo-radius: 1.9;
    z-index: 2.5;
}
node|z10-[place=village][setting("highway_labels")] {
    icon-image: "presets/place/village.svg";
}

node|z13-[place=neighbourhood][setting("highway_labels")] {
    set icon_z0;
    text: auto;
    set text_z0;
    font-size: 15;
    font-weight: bold;
    text-color: black;
    text-halo-color: white;
    text-halo-radius: 1.3;
    z-index: 2.4;
}
node|z10-[place=neighbourhood][setting("highway_labels")] {
    icon-image: "presets/place/neighbourhood.svg";
}

node|z13-[place=quarter][setting("highway_labels")] {
    set icon_z0;
    text: auto;
    set text_z0;
    font-size: 15;
    font-weight: bold;
    text-color: black;
    text-halo-color: white;
    text-halo-radius: 1.3;
    z-index: 2.4;
}
node|z10-[place=quarter][setting("highway_labels")] {
    icon-image: "presets/place/quarter.svg";
}

node|z13-[place=hamlet][setting("highway_labels")] {
    set icon_z0;
    text: auto;
    set text_z0;
    font-size: 15;
    font-weight: bold;
    text-color: black;
    text-halo-color: white;
    text-halo-radius: 1.3;
    z-index: 2.3;
}
node|z10-[place=hamlet][setting("highway_labels")] {
    icon-image: "presets/place/hamlet.svg";
}

node|z13-[place=isolated_dwelling][setting("highway_labels")] {
    set icon_z0;
    text: auto;
    set text_z0;
    font-size: 13;
    font-weight: bold;
    text-color: black;
    text-halo-color: white;
    text-halo-radius: 1.1;
    z-index: 2.2;
}
node|z10-[place=isolated_dwelling][setting("highway_labels")] {
    icon-image: "presets/place/isolated_dwelling.svg";
}

node|z13-[place=farm][setting("highway_labels")] {
    set icon_z0;
    text: auto;
    set text_z0;
    font-size: 10;
    font-weight: bold;
    text-color: black;
    text-halo-color: white;
    text-halo-radius: 1.1;
    z-index: 2.1;
}
node|z10-[place=farm][setting("highway_labels")] {
    icon-image: "presets/place/farm.svg";
}

node|z13-[place=locality][setting("highway_labels")] {
    set icon_z0;
    text: auto;
    set text_z0;
    font-size: 17;
    font-weight: bold;
    text-color: black;
    text-halo-color: white;
    text-halo-radius: 1.9;
}
node|z10-[place=locality][setting("highway_labels")] {
    icon-image: "presets/place/locality.svg";
}

node|z13-[place=island][setting("highway_labels")] {
    set icon_z0;
    text: auto;
    set text_z0;
    font-size: 20;
    font-weight: bold;
    text-color: black;
    text-halo-color: white;
    text-halo-radius: 1.9;
}
node|z10-[place=island][setting("highway_labels")] {
    icon-image: "presets/place/island.svg";
}

node|z13-[place=islet][setting("highway_labels")] {
    set icon_z0;
    text: auto;
    set text_z0;
    font-size: 20;
    font-weight: bold;
    text-color: black;
    text-halo-color: white;
    text-halo-radius: 1.9;
}
node|z10-[place=islet][setting("highway_labels")] {
    icon-image: "presets/place/islet.svg";
}


node|z13-[place=plot][setting("highway_labels")] {
    set icon_z0;
    text: auto;
    set text_z0;
    font-size: 10;
    font-weight: bold;
    text-color: black;
    text-halo-color: white;
    text-halo-radius: 1.1;
}
node|z13-[place=city_block][setting("highway_labels")] {
    set icon_z0;
    text: auto;
    set text_z0;
    font-size: 10;
    font-weight: bold;
    text-color: black;
    text-halo-color: white;
    text-halo-radius: 1.1;
}


/*----------------------------------------------------------------------------------------------------------------------*\
                                                      Quality Checks
\*----------------------------------------------------------------------------------------------------------------------*/

/************************/
/* Fixme and Note Style
/************************/

node|z16-[fixme]::core_fixme,
node|z-15[fixme][!setting("hide_icons")]::core_fixme,
node|z16-[FIXME]::core_fixme,
node|z-15[FIXME][!setting("hide_icons")]::core_fixme {
    object-z-index: 20;
    icon-image: "presets/misc/fixme_annotation.svg";
}
node|z16-[note]::core_fixme,
node|z-15[note][!setting("hide_icons")]::core_fixme {
    object-z-index: 10;
    icon-image: "presets/misc/note_annotation.svg";
}


node|z16-[note][fixme]::core_fixme,
node|z-15[note][fixme][!setting("hide_icons")]::core_fixme,
node|z16-[note][FIXME]::core_fixme,
node|z-15[note][FIXME][!setting("hide_icons")]::core_fixme {
    icon-image: "presets/misc/note_fixme_annotation.svg";
}

/**************************/
/* Continuous Roads Style */
/**************************/

/* Continuous Road Nodes */

node:connection[setting("continuous_roads")] {
  symbol-size:9;
  symbol-shape: circle;
  symbol-stroke-color: #00ffff;
}

/* Set Continuous Road/Visible Node Styles */

way[highway][setting("continuous_roads")] {
    crc:  CRC32_checksum(eval(osm_id()))/429496.7296;
}


/********************************/
/* Missing and Incorrect Layers */
/********************************/


way[bridge=~/^(yes|aqueduct|cantilever|covered|low_water_crossing|trestle|boardwalk|viaduct|movable)$/][!railway][!layer],
way[bridge=~/^(yes|aqueduct|cantilever|covered|low_water_crossing|trestle|boardwalk|viaduct|movable)$/][!railway]["layer"=~/^(-9|-8|-7|-6|-5|-4|-3|-2|-1)$/],
way[embankment=yes][!railway]["layer"=~/^(-9|-8|-7|-6|-5|-4|-3|-2|-1)$/], 
way[tunnel=~/^(yes|culvert|avalanch_protector)$/][!railway][!layer],
way[tunnel=yes][!railway]["layer"=~/^(9|8|7|6|5|4|3|2|1)$/] {
    set .missl;
}

way.missl {  
    color: orange;
    dashes-background-color: red;
    dashes: 4,12;
    opacity: 1;
    width: 14;
    text: tr("Missing Layer/Wrong Value");
    text-color: #460096;
    font-size: 10;
    text-halo-color: white;
    text-halo-radius: 2;
    casing-width: 1;
    casing-color: #000000;
}

/******************************/
/* Missing Layer Value Checks */
/******************************/

/* This check flags for any layer= value that is not between -9 and 9 */

way["layer"=~/^(-9|-8|-7|-6|-5|-4|-3|-2|-1|0|1|2|3|4|5|6|7|8|9)$/] {
    set .layer;
}

way!.layer[layer] {
    color: orange;
    dashes-background-color: red;
    dashes: 4,12;
    opacity: 1;
    width: 14;
    text: tr("Incorrect Layer Value");
    text-color: #460096;
    font-size: 10;
    text-halo-color: white;
    text-halo-radius: 2;
    casing-width: 1;
    casing-color: #000000;
}

/**************************/
/* AssociatedStreet Style */
/**************************/

relation[type=associatedStreet][setting("associatedStreet_setting")] > way {
    text: none; 
}

relation[type=associatedStreet][setting("associatedStreet_setting")] > way[highway]::address {
    set .assocStreet;
}

way|z-18.assocStreet::address {
    text: none;
}

way|z19-24.assocStreet::address {
    text: join_list(" | ", parent_tags(name));
    text-halo-radius: 1.7;
    font-size: 17;
}

relation[type=associatedStreet][setting("associatedStreet_setting")] > way,
relation[type=associatedStreet][setting("associatedStreet_setting")] > area[building] {
    crc: CRC32_checksum(parent_tags(name))/429496.7296;
    set .associatedStreet_style;
}

/**************************/
/* Destination Tag Viewer */
/**************************/

/* Acquire Destination Names and Refs from Ways with Destination */

way|z17-[highway][destination][setting("destination_setting")] {
    text: concat(tag("destination:ref"), " | ", tag("destination"));
    text-halo-radius: 1.7;
    font-size:17;
}

way|z17-[highway][/^destination/][setting("destination_setting")]::destination {
    z-index: -10;
    casing-width: 10;
    casing-color: #44146f;
    casing-opacity: 0.5;
}

/* Acquire Destination Names from Destination Sign Relations */

relation[type=destination_sign][setting("destination_setting")] >[role=from] way|z17-::destination_from {
    text: concat("From: ", parent_tags("destination:ref"), " | ", parent_tags("destination"));
    text-halo-radius: 1.7;
    text-offset: 30;
    font-size: 17;
}

relation[type=destination_sign][setting("destination_setting")] >[role=from] way|z17-::destination_from {
    z-index: -11;
    casing-width: 14;
    casing-color: #885ead;
    casing-opacity: 0.3;
}

relation[type=destination_sign][setting("destination_setting")] >[role=to] way|z17-::destination_to {
    text: concat("To: ", parent_tags("destination:ref"), " | ", parent_tags("destination"));
    text-halo-radius: 1.7;
    text-offset: -30;
    font-size: 17;
}

relation[type=destination_sign][setting("destination_setting")] >[role=to] way|z17-::destination_to {
    z-index: -11;
    casing-width: 14;
    casing-color: #885ead;
    casing-opacity: 0.3;
}

relation[type=destination_sign][setting("destination_setting")] >[role=intersection] node|z17- {
    symbol-fill-color: black;
    symbol-size: 12;
    symbol-shape: circle;
    text: tr("Intersection");
    font-size: 15;
    text-color: white;
    text-halo-color: black;
    text-halo-radius: 2;
    text-position: center;
}


/*----------------------------------------------------------------------------------------------------------------------*\
                                                  General Display Properties
\*----------------------------------------------------------------------------------------------------------------------*/

/*******************/
/* Way Text Labels */
/*******************/

way|z15-[highway^=motorway][setting("highway_labels")], 
way|z15-[highway^=trunk][setting("highway_labels")] {
    text: auto;
    text-color: white;
    font-size: 15;
    font-weight: bold;
    text-position: line;
    text-halo-opacity: 1;
    text-halo-radius: 1.7;
    text-halo-color: black;
}

way|z16[highway^=motorway][setting("highway_labels")], way|z16[highway^=trunk][setting("highway_labels")] {
    font-size: 14;
}
way|z17[highway^=motorway][setting("highway_labels")], way|z17[highway^=trunk][setting("highway_labels")] {
    font-size: 14;
}
way|z18[highway^=motorway][setting("highway_labels")], way|z18[highway^=trunk][setting("highway_labels")] {
    font-size: 18;
}
way|z19[highway^=motorway][setting("highway_labels")], way|z19[highway^=trunk][setting("highway_labels")] {
    font-size: 20;
}
way|z20-[highway^=motorway][setting("highway_labels")], way|z20-[highway^=trunk][setting("highway_labels")] {
    font-size: 22;
}

way|z15-[highway^=primary][setting("highway_labels")], 
way|z15-[highway^=secondary][setting("highway_labels")], 
way|z15-[highway^=tertiary][setting("highway_labels")] {
    text: auto;
    text-color: white;
    font-size: 12;
    font-weight: bold;
    text-position: line;
    text-halo-opacity: 1;
    text-halo-radius: 1.7;
    text-halo-color: black;
}


way|z16[highway^=primary][setting("highway_labels")], 
way|z16[highway^=secondary][setting("highway_labels")], 
way|z16[highway^=tertiary][setting("highway_labels")] {
    font-size: 12;
}
way|z17[highway^=primary][setting("highway_labels")], 
way|z17[highway^=secondary][setting("highway_labels")], 
way|z17[highway^=tertiary][setting("highway_labels")] {
    font-size: 13;
}
way|z18[highway^=primary][setting("highway_labels")], 
way|z18[highway^=secondary][setting("highway_labels")], 
way|z18[highway^=tertiary][setting("highway_labels")] {
    font-size: 16;
}
way|z19[highway^=primary][setting("highway_labels")], 
way|z19[highway^=secondary][setting("highway_labels")], 
way|z19[highway^=tertiary][setting("highway_labels")] {
    font-size: 16;
}
way|z20[highway^=primary][setting("highway_labels")], 
way|z20[highway^=secondary][setting("highway_labels")], 
way|z20[highway^=tertiary][setting("highway_labels")] {
    font-size: 18;
}
way|z21-[highway^=primary][setting("highway_labels")], 
way|z21-[highway^=secondary][setting("highway_labels")], 
way|z21-[highway^=tertiary][setting("highway_labels")] {
    font-size: 18;
}

way|z16-[highway=unclassified][setting("highway_labels")],
way|z16-[highway=residential][setting("highway_labels")],
way|z16-[highway=living_street][setting("highway_labels")],
way|z16-[highway=pedestrian][!area?][setting("highway_labels")],
way|z16-[highway=service][setting("highway_labels")],
way|z16-[highway=track][setting("highway_labels")],
way|z16-[highway=footway][setting("highway_labels")],
way|z16-[highway=path][setting("highway_labels")],
way|z16-[highway=road][setting("highway_labels")],
way|z16-[highway=cycleway][setting("highway_labels")] {
    text: auto;
    text-color: white;
    font-size: 13;
    font-weight: bold;
    text-position: line;
    text-halo-opacity: 1;
    text-halo-radius: 1.7;
    text-halo-color: black;
}

way|z16[highway=unclassified][setting("highway_labels")],
way|z16[highway=residential][setting("highway_labels")],
way|z16[highway=living_street][setting("highway_labels")],
way|z16[highway=pedestrian][!area?][setting("highway_labels")],
way|z16[highway=service][setting("highway_labels")],
way|z16[highway=track][setting("highway_labels")],
way|z16[highway=footway][setting("highway_labels")],
way|z16[highway=path][setting("highway_labels")],
way|z16[highway=road][setting("highway_labels")],
way|z16[highway=cycleway][setting("highway_labels")] {
    font-size: 12;
}
way|z17[highway=unclassified][setting("highway_labels")],
way|z17[highway=residential][setting("highway_labels")],
way|z17[highway=living_street][setting("highway_labels")],
way|z17[highway=pedestrian][!area?][setting("highway_labels")],
way|z17[highway=service][setting("highway_labels")],
way|z17[highway=track][setting("highway_labels")],
way|z17[highway=footway][setting("highway_labels")],
way|z17[highway=path][setting("highway_labels")],
way|z17[highway=road][setting("highway_labels")],
way|z17[highway=cycleway][setting("highway_labels")] {
    font-size: 13;
}
way|z18[highway=unclassified][setting("highway_labels")],
way|z18[highway=residential][setting("highway_labels")],
way|z18[highway=living_street][setting("highway_labels")],
way|z18[highway=pedestrian][!area?][setting("highway_labels")],
way|z18[highway=service][setting("highway_labels")],
way|z18[highway=track][setting("highway_labels")],
way|z18[highway=footway][setting("highway_labels")],
way|z18[highway=path][setting("highway_labels")],
way|z18[highway=road][setting("highway_labels")],
way|z18[highway=cycleway][setting("highway_labels")] {
    font-size: 15;
}
way|z19[highway=unclassified][setting("highway_labels")],
way|z19[highway=residential][setting("highway_labels")],
way|z19[highway=living_street][setting("highway_labels")],
way|z19[highway=pedestrian][!area?][setting("highway_labels")],
way|z19[highway=service][setting("highway_labels")],
way|z19[highway=track][setting("highway_labels")],
way|z19[highway=footway][setting("highway_labels")],
way|z19[highway=path][setting("highway_labels")],
way|z19[highway=road][setting("highway_labels")], 
way|z19[highway=cycleway][setting("highway_labels")] {
    font-size: 16;
}
way|z20[highway=unclassified][setting("highway_labels")],
way|z20[highway=residential][setting("highway_labels")],
way|z20[highway=living_street][setting("highway_labels")],
way|z20[highway=pedestrian][!area?][setting("highway_labels")],
way|z20[highway=service][setting("highway_labels")],
way|z20[highway=track][setting("highway_labels")],
way|z20[highway=footway][setting("highway_labels")],
way|z20[highway=path][setting("highway_labels")],
way|z20[highway=road][setting("highway_labels")], 
way|z20[highway=cycleway][setting("highway_labels")] {
    font-size: 18;
}
way|z21-[highway=unclassified][setting("highway_labels")],
way|z21-[highway=residential][setting("highway_labels")],
way|z21-[highway=living_street][setting("highway_labels")],
way|z21-[highway=pedestrian][!area?][setting("highway_labels")],
way|z21-[highway=service][setting("highway_labels")],
way|z21-[highway=track][setting("highway_labels")],
way|z21-[highway=footway][setting("highway_labels")],
way|z21-[highway=path][setting("highway_labels")],
way|z21-[highway=road][setting("highway_labels")],
way|z21-[highway=cycleway][setting("highway_labels")] {
    font-size: 18;
}

/***************************************************/
/* Create Check Sums for Street Names and Ref Tags */
/***************************************************/

/* Create reference styles for highways with ref tags */

way["highway"=~/^(motorway|trunk|primary|secondary|motorway_link|trunk_link|primary_link|secondary_link|tertiary|tertiary_link|unclassified|residential|service|living_street|track)$/]["ref"][setting("check_ref")] {
    crc: CRC32_checksum(tag("ref"))/429496.7296;
    set .checkme3;
}

way|z-17.checkme3 {
  text: none;
}

way|z18-24.checkme3 {
    text: eval(concat("Ref = ", tag("ref"), " | ", "Int_Ref = ", tag("int_ref")));
}

way[highway=motorway].checkme3 {
    width: 12;
}

way[highway=trunk].checkme3 {
    width: 10;
}

way[highway=primary].checkme3 {
    width: 8;
}

way[highway=secondary].checkme3 {
    width: 6;
}

way[highway=tertiary].checkme3 {
    width: 4;
}

way[highway=unclassified].checkme3 {
    width: 2;
}

way[highway=residential].checkme3 {
    width: 1;
}

way[highway=service].checkme3 {
    width: 1;
}

way[highway=track].checkme3 {
    width: 0.5;
}

way[highway=living_street].checkme3 {
    width: 0.5;
}

/* Create reference styles for route relations with ref tags */

relation[type=route][route=road]["ref"][setting("check_ref")] > way["highway"=~/^(motorway|trunk|primary|secondary|motorway_link|trunk_link|primary_link|secondary_link|tertiary|tertiary_link|unclassified|residential|service|living_street|track)$/]  {
    crc: CRC32_checksum(parent_tags(ref))/429496.7296;
    set .checkme5;
}

way|z-17.checkme5 {
    text: none;
}

way|z18-24.checkme5  {
    text: eval(concat("Way Ref = ", tag(ref), " | ", "Int_Ref = ", tag("int_ref"), " || ", "Relation = ", join_list(" | ", parent_tags(ref)), " | ", parent_tags("int_ref")));
    text-halo-radius: 0.9;
    font-size: 15;
}

way[highway=motorway].checkme5 {
    width: 12;
}

way[highway=trunk].checkme5 {
    width: 10;
}

way[highway=primary].checkme5 {
    width: 8;
}

way[highway=secondary].checkme5 {
    width: 6;
}

way[highway=tertiary].checkme5 {
    width: 4;
}

way[highway=unclassified].checkme5 {
    width: 2;
}

way[highway=residential].checkme5 {
    width: 1;
}

way[highway=service].checkme5 {
    width: 1;
}

way[highway=track].checkme5 {
    width: 0.5;
}

way[highway=living_street].checkme5 {
    width: 0.5;
}

/* Create reference styles for highways with int_ref tags */

way["highway"=~/^(motorway|trunk|primary|secondary|motorway_link|trunk_link|primary_link|secondary_link|tertiary|tertiary_link|unclassified|residential|service|living_street|track)$/]["int_ref"][setting("check_ref2")] {
    crc: CRC32_checksum(tag("int_ref"))/429496.7296;
    set .checkme6;
}

way|z-17.checkme6 {
    text: none;
}
way|z18-24.checkme6 {
    text: eval(concat("Way Int_Ref = ", tag("int_ref")));
}

way[highway=motorway].checkme6 {
    width: 12;
}

way[highway=trunk].checkme6 {
    width: 10;
}

way[highway=primary].checkme6 {
    width: 8;
}

way[highway=secondary].checkme6 {
    width: 6;
}

way[highway=tertiary].checkme6 {
    width: 4;
}

way[highway=unclassified].checkme6 {
    width: 2;
}

way[highway=residential].checkme6 {
    width: 1;
}

way[highway=service].checkme6 {
    width: 1;
}

way[highway=track].checkme6 {
    width: 0.5;
}

way[highway=living_street].checkme6 {
    width: 0.5;
}

/* Create reference styles for relations with int_ref tags */

relation[type=route][route=road]["int_ref"][setting("check_ref2")] > way["highway"=~/^(motorway|trunk|primary|secondary|motorway_link|trunk_link|primary_link|secondary_link|tertiary|tertiary_link|unclassified|residential|service|living_street|track)$/]  {
    crc: CRC32_checksum(parent_tags("int_ref"))/429496.7296;
    set .checkme8;
}

way|z-17.checkme8 {
    text: none;
}

way|z18-24.checkme8 {
    text: eval(concat("Way  Int_Ref = ", tag("int_ref"), " || ", "Relation Int_Ref = ", parent_tags("int_ref")));
    text-halo-radius: 0.9;
    font-size: 15;
}

way[highway=motorway].checkme8 {
    width: 12;
}

way[highway=trunk].checkme8 {
    width: 10;
}

way[highway=primary].checkme8 {
    width: 8;
}

way[highway=secondary].checkme8 {
    width: 6;
}

way[highway=tertiary].checkme8 {
    width: 4;
}

way[highway=unclassified].checkme8 {
    width: 2;
}

way[highway=residential].checkme8 {
    width: 1;
}

way[highway=service].checkme8 {
    width: 1;
}

way[highway=track].checkme8 {
    width: 0.5;
}

way[highway=living_street].checkme8 {
    width: 0.5;
}

/* Hide highways tertiary and below */

way["highway"=~/^(tertiary|tertiary_link|unclassified|residential|service|track|living_street)$/][!ref][setting("check_ref")],
way["highway"=~/^(tertiary|tertiary_link|unclassified|residential|service|track|living_street)$/][!ref][setting("check_ref2")] {
    width: -10;
    casing-width: 1.5;
    set .low_classification;
}

way|z-17.low_classification {
    text: none;
}
way|z18-24.low_classification {
    text: eval(tag("highway"));
    font-size: 7;
}

/* Bus Route Updates */

relation[route=bus][setting("bus_setting")] > way[highway] {
    text: none;
    
}

relation[route=bus][setting("bus_setting")] > way[highway]::parent_ref {
    set .bus2;
}

way|z-19.bus2::parent_ref {
    text: none;
}


way|z20-24.bus2::parent_ref {
    text: concat("Relation Route Ref's = ", join_list(" | ", parent_tags(ref)));
    text-halo-radius: 1;
    text-offset-y:-30;
    font-size: 15;
}

relation[route=bus][setting("bus_setting")] > way[highway] {
    crc: CRC32_checksum(parent_tags(ref))/429496.7296;
    set .checkme7;
}


/***************/
/* Ref Display */
/***************/

/* Text styling */

way[highway][setting("ref_labels")] {
    font-size:16;
    font-weight: bold;
    text-halo-opacity: 1;
    text-halo-radius: 1.5;
    text-halo-color: black;
    set .reftext_default
}

relation[type=route][route=road][ref] > way[highway=~/^(track|service|pedestrian|living_street|residential|unclassified|tertiary|secondary|motorway|trunk|primary)$/][setting("ref_labels")] {
    font-size:16;
    font-weight: bold;
    text-halo-opacity: 0.4;
    text-halo-radius: 1;
    text-color: white;
    text-halo-color: #660066;
    set .relationreftext_default
}


/* Show refs at low zoom without bunching */

way|z7-.reftext_default[highway=~/^(motorway|trunk|primary)$/][setting("ref_labels")],
way|z11-.reftext_default[highway=~/^(tertiary|secondary)$/][setting("ref_labels")],
way|z15-.reftext_default[highway=~/^(track|service|pedestrian|living_street|residential|unclassified)$/][setting("ref_labels")] {
    text: eval(cond(waylength()>=18000,tag(ref),""));
}


/* Show refs at high zoom */

way|z10-.reftext_default[highway=~/^(motorway|trunk|primary)$/][setting("ref_labels")],
way|z13-.reftext_default[highway=~/^(tertiary|secondary)$/][setting("ref_labels")],
way|z15-.reftext_default[highway=~/^(track|service|pedestrian|living_street|residential|unclassified)$/][setting("ref_labels")] {
    text: eval(cond(waylength()>=4000,tag(ref),""));
}


/* Show refs at higher zoom */

way|z13-.reftext_default[highway=~/^(motorway|trunk|primary|tertiary|secondary)$/][setting("ref_labels")],
way|z15-.reftext_default[highway=~/^(track|service|pedestrian|living_street|residential|unclassified)$/][setting("ref_labels")] {
    text: eval(cond(waylength()>=2000,tag(ref),""));
}


/* Show refs at even higher zoom */

way|z16-.reftext_default[highway=~/^(motorway|trunk|primary|tertiary|secondary|track|service|pedestrian|living_street|residential|unclassified|tertiary|secondary)$/][setting("ref_labels")] {
    text: eval(cond(waylength()>=600,tag(ref),""));
}
 

/* Increase size of highway labels at even higher zoom */

way|z18-.reftext_default[highway=~/^(motorway|trunk|primary|track|service|pedestrian|living_street|residential|unclassified|tertiary|secondary)$/][setting("ref_labels")] {
    text: cond(tag(ref),tag(ref),auto);
}


/* Show refs on relations at low zoom without bunching */

relation|z7-.relationreftext_default[type=route][route=road][ref] > way["highway"=~/^(motorway|trunk|primary)$/][setting("ref_labels")],
relation|z11-.relationreftext_default[type=route][route=road][ref] > way[highway=~/^(tertiary|secondary)$/][setting("ref_labels")],
relation|z15-.relationreftext_default[type=route][route=road][ref] > way[highway=~/^(track|service|pedestrian|living_street|residential|unclassified)$/][setting("ref_labels")] {
    text: eval(cond(waylength()>=18000,tag(ref),""));
}


/* Show refs on relations at high zoom without bunching */

relation|z10-.relationreftext_default[type=route][route=road][ref] > way["highway"=~/^(motorway|trunk|primary)$/][setting("ref_labels")],
relation|z13-.relationreftext_default[type=route][route=road][ref] > way[highway=~/^(tertiary|secondary)$/][setting("ref_labels")],
relation|z15-.relationreftext_default[type=route][route=road][ref] > way[highway=~/^(track|service|pedestrian|living_street|residential|unclassified)$/][setting("ref_labels")] {
    text: eval(cond(waylength()>=4000,tag(ref),""));
}


/* Show refs on relations at higher zoom without bunching */

relation|z13-.relationreftext_default[type=route][route=road][ref] > way[highway=~/^(motorway|trunk|primary|tertiary|secondary)$/][setting("ref_labels")],
relation|z15-.relationreftext_default[type=route][route=road][ref] > way[highway=~/^(track|service|pedestrian|living_street|residential|unclassified)$/][setting("ref_labels")] {
    text: eval(cond(waylength()>=2000,tag(ref),""));
}


/* Show refs on relations at even higher zoom without bunching */

relation|z16-.relationreftext_default[type=route][route=road][ref] > way[highway=~/^(motorway|trunk|primary|tertiary|secondary|track|service|pedestrian|living_street|residential|unclassified|tertiary|secondary)$/][setting("ref_labels")] {
  text: eval(cond(waylength()>=600,tag(ref),""));
}
 

/* Show refs on relations at close zoom */

relation|z18-.relationreftext_default[type=route][route=road][ref] > way[highway=~/^(motorway|trunk|primary|track|service|pedestrian|living_street|residential|unclassified|tertiary|secondary)$/][setting("ref_labels")] {
  text: parent_tag(ref);
}

/********************************/
/* Missing or Mismatching Refs */
/********************************/

/* Create register checks for roads without reference values */

relation[type=route][route=road][ref][setting("check_dup")] > way["highway"=~/^(motorway|trunk|primary|secondary|tertiary)$/] {
  set .double;
}


way["highway"=~/^(motorway|trunk|primary|secondary|tertiary)$/][!ref]!.double[setting("check_dup")]::core_motorroad {
  color: red;
  casing-color: darkred;
  casing-width: 3;
  casing-opacity: 0.2;
  width: 12;
  opacity: 0.2;
  z-index: -5;
}

way|z16-17["highway"=~/^(motorway|trunk|primary|secondary|tertiary)$/][!ref]!.double[setting("check_dup")] {
  text: tr("Major Road Missing a Ref Tag");
  font-size: 15;
  font-weight: bold;
  z-index: 5;
}

way["highway"=~/^(motorway|trunk|primary|secondary|tertiary)$/][!ref].double[setting("check_dup")] {
  color: auto;
  width: auto;
  text: auto;
  font-size: auto;
  text-offset: auto;
  casing-color: auto;
  casing-width: auto;
  opacity: auto;
  z-index: auto;
}

/* Mismatching Ref */

relation[type=route][route=road]["ref"][setting("check_dup")] > way|z15-19["highway"=~/^(motorway|trunk|primary|secondary|tertiary|motorway_link|trunk_link|primary_link|secondary_link|tertiary_link)$/] {
    text: eval(cond(tag("ref") != parent_tag("ref"),concat("[Ref Mismatch] Way Ref = ",tag("ref"), " | Relation Ref = ", parent_tag("ref")),concat("Way Ref = ", tag(ref), " | ", "Int_Ref = ", tag("int_ref"), " || ", "Relation = ", join_list(" | ", parent_tags(ref)), " | ", parent_tags("int_ref"))));
    font-size: 15;
    font-weight: bold;
}

relation[type=route][route=road]["ref"][setting("check_dup")] > way["highway"=~/^(motorway|trunk|primary|secondary|tertiary|motorway_link|trunk_link|primary_link|secondary_link|tertiary_link)$/]::layer_up  {
    color: eval(cond(tag("ref") != parent_tag("ref"),red,white));
    width: eval(cond(tag("ref") != parent_tag("ref"),20,0));
    z-index: eval(cond(tag("ref") != parent_tag("ref"),-10,0));
    opacity: eval(cond(tag("ref") != parent_tag("ref"),0.5,1));
}

/* Mismatching Int_Ref */

relation[type=route][route=road]["int_ref"][setting("check_dup")] > way|z15-19.checkme8 {
    text: eval(cond(tag("int_ref") != parent_tag("int_ref"),concat("[Int_Ref Mismatch] Way Ref = ",tag("int_ref"), " | Relation Ref = ", parent_tag("int_ref")),concat("Way  Int_Ref = ", tag("int_ref"), " || ", "Relation Int_Ref = ", parent_tags("int_ref"))));
    font-size: 15;
    font-weight: bold;
}

relation[type=route][route=road]["int_ref"][setting("check_dup")] > way["highway"=~/^(motorway|trunk|primary|secondary|tertiary|motorway_link|trunk_link|primary_link|secondary_link|tertiary_link)$/]::layer_up {
    color: eval(cond(tag("int_ref") != parent_tag("int_ref"),red,white));
    width: eval(cond(tag("int_ref") != parent_tag("int_ref"),20,0));
    z-index: eval(cond(tag("ref") != parent_tag("ref"),-10,0));
    opacity: eval(cond(tag("ref") != parent_tag("ref"),0.5,1));
}


/* Assign by Roles */

relation[route=bus] >[role=forward] way[highway][setting("bus_setting")]::relation_underlay {
    set .bus3;
    set .role_check1;
    set .checkbuses;
}


relation[route=bus] >[role=backward] way[highway][setting("bus_setting")]::relation_underlay {
    set .bus2;
    set .role_check2;
    set .checkbuses;
}

way|z-18.bus2::relation_underlay,
way|z-18.bus3::relation_underlay {
    text: none;
}

way|z19-24.bus3::relation_underlay {
    text-halo-radius: 1;
    text: tr("Role: Forward");
    text-halo-color: green;
    font-size: 15;
    text-offset-y: 30;
}

way|z19-24.bus2::relation_underlay {
    text-halo-radius: 1;
    text: tr("Role: Backward");
    text-halo-color: blue;
    font-size: 15;
    text-offset-y: 30;
}

/* For routes with both roles set */

relation[route=bus] >[role=forward/backward] way[highway][setting("bus_setting")]::relation_underlay {
    set .bus4;
    set .checkbuses;
}


way|z-18.bus4::relation_underlay {
    text:none;
}


way|z19-24.bus4::relation_underlay {
    text-halo-color: teal;
    text-halo-radius: 1;
    font-size: 15;
    text: tr("Forward & Backward Role");
    text-offset-y: 30;
}



relation|z19-24.role_check1.role_check2[setting("bus_setting")] > way[highway][setting("bus_setting")]::relation_underlay {
    set .bus5;
    set .checkbuses;
}


way|z-18.bus5::relation_underlay {
    text: none;
}


way|z19-24.bus5::relation_underlay  {
    text-halo-color: teal;
    text-halo-radius: 1;
    font-size: 15;
    text: tr("Forward & Backward Role(s)");
    text-offset-y: 30;
}

/* Create checks for roads without role values */

relation[route=bus] >[!role] way[highway]!.checkbuses[setting("bus_setting")]::relation_underlay {
    set .role_missing1;
}


way|z-18.role_missing1::relation_underlay {
    text: none;
}


way|z19-24.role_missing1::relation_underlay {
    text: tr("Role(s) Missing");
    text-halo-color: brown;
    text-halo-radius: 1;
    font-size: 15;
    text-offset-y: 20;
}

relation[route=bus] >["role"="route"] way[highway]!.checkbuses[setting("bus_setting")]::relation_underlay {
    set .role_missing2;
}

way|z-18.role_missing2::relation_underlay {
    text: none;
}

way|z19-24.role_missing2::relation_underlay {
    text: tr("Role: Incorrect");
    text-halo-color: brown;
    text-halo-radius: 1;
    font-size: 15;
    text-offset-y: 20;
}

/*****************/
/* Z-Index Check */
/*****************/

/* Visible Bridges and Tunnels */

way[bridge=yes]::core_bridge {
    major-z-index: 2;
    object-z-index: -1;
    width: 4;
    casing-width: 4;
    dashes: 2,4;
    casing-color: #26d4d4;
    color: black;
    opacity: 1;
}

way[bridge=aqueduct]::core_bridge,
way[bridge=cantilever]::core_bridge,
way[bridge=covered]::core_bridge,
way[bridge=low_water_crossing]::core_bridge,
way[bridge=trestle]::core_bridge,
way[bridge=viaduct]::core_bridge,
way[bridge=boardwalk]::core_bridge,
way[bridge=movable]::core_bridge {
    major-z-index: 2;
    object-z-index: -1;
    width: 12;
    casing-width: .5;
    casing-color: #FFB573;
    casing-dashes: 2,3;
    color: #26d4d4;
    opacity: 1;
}

way[tunnel=yes]::core_tunnel,
way[tunnel=culvert]::core_tunnel,
way[tunnel=flooded]::core_tunnel,
way[tunnel=avalanche_protector]::core_tunnel {
    major-z-index: 2;
    object-z-index: -1;
    width: 4;
    casing-width: 4.5;
    casing-color: #a9f999;
    color: #919191;
    opacity: 1;
}

way[tunnel=building_passage]::core_tunnel {
    major-z-index: 2;
    object-z-index: -1;
    width: 4;
    casing-color: #a9f999;
    casing-dashes: 3,3;
    casing-width: 4.5;
}

way[tunnel=yes][railway=all]::core_tunnel {
major-z-index: 2;
    object-z-index: -1;
    width: .5;
    color: tunnel#a9f999;
    opacity: 1;
}

way[covered=yes]::core_covered {
    major-z-index: 2;
    object-z-index: -1;
    width: 4;
    casing-color: #a9f999;
    casing-dashes: 3,3;
    casing-width: 4.5;
}

node[oneway],
node[bridge],
node[tunnel?],
node[tunnel?!],
node[cutting?!],
node[embankment?!] {
    icon-image: "presets/misc/deprecated.svg";
    set icon_z17;
}

/* Style for various Layers */

way["layer"=~/^(-9|-8|-7|-6|-5)$/][setting("Z_Index_Check")]::layer {
    set layer;
    z-index: -5;
    color: layer_minus5#ff0000;
}
way["layer"="-4"][setting("Z_Index_Check")]::layer {
    set layer;
    z-index: -4;
    color: layer_minus4#A64B00;
}
way["layer"="-3"][setting("Z_Index_Check")]::layer {
    set layer;
    z-index: -3;
    color: layer_minus3#EA69A6;
}
way["layer"="-2"][setting("Z_Index_Check")]::layer {
    set layer;
    z-index: -2;
    color: layer_minus2#ff7519;
}
way["layer"="-1"][setting("Z_Index_Check")]::layer {
    set layer;
    z-index: -1;
    color: layer_minus1#ffBA00;
}
way["layer"="0"][setting("see_layer_0")]::layer {
    set layer;
    z-index: 0;
    color: layer_0#b8b8b8;
}
way["layer"="1"][setting("Z_Index_Check")]::layer {
    set layer;
    z-index: 1;
    color: layer_1#8319f2;
}
way["layer"="2"][setting("Z_Index_Check")]::layer {
    set layer;
    z-index: 2;
    color: layer_2#6c8356;
}
way["layer"="3"][setting("Z_Index_Check")]::layer {
    set layer;
    z-index: 3;
    color: layer_3#FF6EF1;
}
way["layer"="4"][setting("Z_Index_Check")]::layer {
    set layer;
    z-index: 4;
    color: layer_4#98ED00;
}
way["layer"=~/^(9|8|7|6|5)$/][setting("Z_Index_Check")]::layer {
    set layer;
    z-index: 5;
    color: layer_5#FE77FF;
}

way.layer[setting("Z_Index_Check")]::layer {
    opacity: 0.9;
    width: 30;
    major-z-index: 1.9; 
}


/*********************/
/* Partial Area Fill */
/*********************/

/* Small extent for unclosed area (see below for closed)*/

area[setting("partial_fill")] {
    fill-extent: 15;
}

/* Switches from partial fill to full fill when partial fill covers 100% */

area|z-13[setting("partial_fill")] {
    fill-extent-threshold: 1.0;
}

/* Larger extent for closed areas
 *Turn partial fill off when it covers more than about 50% of the area. This
 *avoids areas with small, unfilled patches in center */

area[setting("partial_fill")]:closed2 {
    fill-extent: 25;
    fill-extent-threshold: JOSM_pref("draw.area.extent_threshold", 0.5);
}


/******************/
/* One-Way Styles */
/******************/


way[highway][oneway=yes][setting("one_2")], way[oneway=-1][setting("one_2")] {
    color: #00A67C;
    casing-color: #00A67C;
}
way[highway][!oneway][setting("one_2")] {
    width: 1;
    casing-width: 0.2;
    casing-color: gray;
}
way[highway][oneway=no][setting("one_2")] {
    color: purple;
    casing-color: purple;
    text: tr("Oneway = No");
}


/**************************************/
/* Color Stylings Based on Check Sums */
/**************************************/
area[!highway][building].associatedStreet_style[prop(crc)<303] {
    color: #8B864E;
    fill-color: #8B864E;
}

way[highway][prop(crc)<303],
way.checkme5[prop(crc)<303], 
way.checkme3[prop(crc)<303],
way.checkme6[prop(crc)<303],
way.checkme7[prop(crc)<303],
way.checkme8[prop(crc)<303],
way.associatedStreet_style[prop(crc)<303] {
    casing-width: 1.5;
    casing-color: black;
    color: #8B864E
}

area[!highway][building].associatedStreet_style[prop(crc)>=303][prop(crc)<606] {
    color: #b88142;
    fill-color: #b88142;
}

way[highway][prop(crc)>=303][prop(crc)<606],
way.checkme5[prop(crc)>=303][prop(crc)<606], 
way.checkme3[prop(crc)>=303][prop(crc)<606],
way.checkme6[prop(crc)>=303][prop(crc)<606],
way.checkme7[prop(crc)>=303][prop(crc)<606],
way.checkme8[prop(crc)>=303][prop(crc)<606],
way.associatedStreet_style[prop(crc)>=303][prop(crc)<606] {
    casing-width: 1.5;
    casing-color: black;
    color: #b88142;
}

area[!highway][building].associatedStreet_style[prop(crc)>=606][prop(crc)<909] {
    color: #a3fe8f;
    fill-color: #a3fe8f;
}

way[highway][prop(crc)>=606][prop(crc)<909],
way.checkme5[prop(crc)>=606][prop(crc)<909], 
way.checkme3[prop(crc)>=606][prop(crc)<909],
way.checkme6[prop(crc)>=606][prop(crc)<909],
way.checkme7[prop(crc)>=606][prop(crc)<909],
way.checkme8[prop(crc)>=606][prop(crc)<909],
way.associatedStreet_style[prop(crc)>=606][prop(crc)<909] {
    casing-width: 1.5;
    casing-color: black;
    color: #a3fe8f;
}

area[!highway][building].associatedStreet_style[prop(crc)>=909][prop(crc)<1212] {
    color: #b8674c;
    fill-color: #b8674c;
}

way[highway][prop(crc)>=909][prop(crc)<1212],
way.checkme5[prop(crc)>=909][prop(crc)<1212], 
way.checkme3[prop(crc)>=909][prop(crc)<1212],
way.checkme6[prop(crc)>=909][prop(crc)<1212], 
way.checkme7[prop(crc)>=909][prop(crc)<1212],
way.checkme8[prop(crc)>=909][prop(crc)<1212],
way.associatedStreet_style[prop(crc)>=909][prop(crc)<1212] {
    casing-width: 1.5;
    casing-color: black;
    color: #b8674c;
}

area[!highway][building].associatedStreet_style[prop(crc)>=1212][prop(crc)<1515] {
    color: #f4ff6b;
    fill-color: #f4ff6b;
}

way[highway][prop(crc)>=1212][prop(crc)<1515],
way.checkme5[prop(crc)>=1212][prop(crc)<1515], 
way.checkme3[prop(crc)>=1212][prop(crc)<1515],
way.checkme6[prop(crc)>=1212][prop(crc)<1515], 
way.checkme7[prop(crc)>=1212][prop(crc)<1515],
way.checkme8[prop(crc)>=1212][prop(crc)<1515],
way.associatedStreet_style[prop(crc)>=1212][prop(crc)<1515] {
    casing-width: 1.5;
    casing-color: black;
    color: #f4ff6b;
}

area[!highway][building].associatedStreet_style[prop(crc)>=1515][prop(crc)<1818] {
    color: #81c0ff;
    fill-color: #81c0ff;
}

way[highway][prop(crc)>=1515][prop(crc)<1818],
way.checkme5[prop(crc)>=1515][prop(crc)<1818], 
way.checkme3[prop(crc)>=1515][prop(crc)<1818],
way.checkme6[prop(crc)>=1515][prop(crc)<1818],
way.checkme7[prop(crc)>=1515][prop(crc)<1818],
way.checkme8[prop(crc)>=1515][prop(crc)<1818],
way.associatedStreet_style[prop(crc)>=1515][prop(crc)<1818] {
    casing-width: 1.5;
    casing-color: black;
    color: #81c0ff;
}

area[!highway][building].associatedStreet_style[prop(crc)>=1818][prop(crc)<2121] {
    color: #6b8e23;
    fill-color: #6b8e23;
}

way[highway][prop(crc)>=1818][prop(crc)<2121],
way.checkme5[prop(crc)>=1818][prop(crc)<2121], 
way.checkme3[prop(crc)>=1818][prop(crc)<2121],
way.checkme6[prop(crc)>=1818][prop(crc)<2121],
way.checkme7[prop(crc)>=1818][prop(crc)<2121],
way.checkme8[prop(crc)>=1818][prop(crc)<2121],
way.associatedStreet_style[prop(crc)>=1818][prop(crc)<2121] {
    casing-width: 1.5;
    casing-color: black;
    color: #6b8e23;
}

area[!highway][building].associatedStreet_style[prop(crc)>=2121][prop(crc)<2424] {
    color: #e1bd6a;
    fill-color: #e1bd6a;
}

way[highway][prop(crc)>=2121][prop(crc)<2424],
way.checkme5[prop(crc)>=2121][prop(crc)<2424], 
way.checkme3[prop(crc)>=2121][prop(crc)<2424],
way.checkme6[prop(crc)>=2121][prop(crc)<2424],
way.checkme7[prop(crc)>=2121][prop(crc)<2424],
way.checkme8[prop(crc)>=2121][prop(crc)<2424],
way.associatedStreet_style[prop(crc)>=2121][prop(crc)<2424] {
    casing-width: 1.5;
    casing-color: black;
    color: #e1bd6a;
}

area[!highway][building].associatedStreet_style[prop(crc)>=2424][prop(crc)<2727] {
    color: #7fffd4;
    fill-color: #7fffd4;
}

way[highway][prop(crc)>=2424][prop(crc)<2727],
way.checkme5[prop(crc)>=2424][prop(crc)<2727], 
way.checkme3[prop(crc)>=2424][prop(crc)<2727],
way.checkme6[prop(crc)>=2424][prop(crc)<2727],
way.checkme7[prop(crc)>=2424][prop(crc)<2727],
way.checkme8[prop(crc)>=2424][prop(crc)<2727],
way.associatedStreet_style[prop(crc)>=2424][prop(crc)<2727] {
    casing-width: 1.5;
    casing-color: black;
    color: #7fffd4;
}

area[!highway][building].associatedStreet_style[prop(crc)>=2727][prop(crc)<3030] {
    color: #8a2be2;
    fill-color: #8a2be2;
}

way[highway][prop(crc)>=2727][prop(crc)<3030],
way.checkme5[prop(crc)>=2727][prop(crc)<3030], 
way.checkme3[prop(crc)>=2727][prop(crc)<3030],
way.checkme6[prop(crc)>=2727][prop(crc)<3030],
way.checkme7[prop(crc)>=2727][prop(crc)<3030],
way.checkme8[prop(crc)>=2727][prop(crc)<3030],
way.associatedStreet_style[prop(crc)>=2424][prop(crc)<2727] {
    casing-width: 1.5;
    casing-color: black;
    color: #8a2be2;
}

area[!highway][building].associatedStreet_style[prop(crc)>=3030][prop(crc)<3333] {
    color: #a52a2a;
    fill-color: #a52a2a;
}

way[highway][prop(crc)>=3030][prop(crc)<3333],
way.checkme5[prop(crc)>=3030][prop(crc)<3333], 
way.checkme3[prop(crc)>=3030][prop(crc)<3333],
way.checkme6[prop(crc)>=3030][prop(crc)<3333],
way.checkme7[prop(crc)>=3030][prop(crc)<3333],
way.checkme8[prop(crc)>=3030][prop(crc)<3333],
way.associatedStreet_style[prop(crc)>=3030][prop(crc)<3333] {
    casing-width: 1.5;
    casing-color: black;
    color: #a52a2a;
}

area[!highway][building].associatedStreet_style[prop(crc)>=3333][prop(crc)<3636] {
    color: #f0b9a6;
    fill-color: #f0b9a6;
}

way[highway][prop(crc)>=3333][prop(crc)<3636],
way.checkme5[prop(crc)>=3333][prop(crc)<3636], 
way.checkme3[prop(crc)>=3333][prop(crc)<3636],
way.checkme6[prop(crc)>=3333][prop(crc)<3636],
way.checkme7[prop(crc)>=3333][prop(crc)<3636],
way.checkme8[prop(crc)>=3333][prop(crc)<3636],
way.associatedStreet_style[prop(crc)>=3333][prop(crc)<3636] {
    casing-width: 1.5;
    casing-color: black;
    color: #f0b9a6;
}

area[!highway][building].associatedStreet_style[prop(crc)>=3636][prop(crc)<3939] {
    color: #8fbc8f;
    fill-color: #8fbc8f;
}

way[highway][prop(crc)>=3636][prop(crc)<3939],
way.checkme5[prop(crc)>=3636][prop(crc)<3939],
way.checkme3[prop(crc)>=3636][prop(crc)<3939],
way.checkme6[prop(crc)>=3636][prop(crc)<3939],
way.checkme7[prop(crc)>=3636][prop(crc)<3939],
way.checkme8[prop(crc)>=3636][prop(crc)<3939],
way.associatedStreet_style[prop(crc)>=3636][prop(crc)<3939] {
    casing-width: 1.5;
    casing-color: black;
    color: #8fbc8f;
}

area[!highway][building].associatedStreet_style[prop(crc)>=3939][prop(crc)<4242] {
    color: #1b7777;
    fill-color: #1b7777;
}

way[highway][prop(crc)>=3939][prop(crc)<4242],
way.checkme5[prop(crc)>=3939][prop(crc)<4242], 
way.checkme3[prop(crc)>=3939][prop(crc)<4242],
way.checkme6[prop(crc)>=3939][prop(crc)<4242],
way.checkme7[prop(crc)>=3939][prop(crc)<4242],
way.checkme8[prop(crc)>=3939][prop(crc)<4242],
way.associatedStreet_style[prop(crc)>=3939][prop(crc)<4242] {
    casing-width: 1.5;
    casing-color: black;
    color: #1b7777;
}

area[!highway][building].associatedStreet_style[prop(crc)>=4242][prop(crc)<4545] {
    color: #ff1493;
    fill-color: #ff1493;
}

way[highway][prop(crc)>=4242][prop(crc)<4545],
way.checkme5[prop(crc)>=4242][prop(crc)<4545], 
way.checkme3[prop(crc)>=4242][prop(crc)<4545],
way.checkme6[prop(crc)>=4242][prop(crc)<4545],
way.checkme7[prop(crc)>=4242][prop(crc)<4545],
way.checkme8[prop(crc)>=4242][prop(crc)<4545],
way.associatedStreet_style[prop(crc)>=4242][prop(crc)<4545] {
    casing-width: 1.5;
    casing-color: black;
    color: #ff1493;
}

area[!highway][building].associatedStreet_style[prop(crc)>=4545][prop(crc)<4848] {
    color: #0072e2;
    fill-color: #0072e2;
}

way[highway][prop(crc)>=4545][prop(crc)<4848],
way.checkme5[prop(crc)>=4545][prop(crc)<4848], 
way.checkme3[prop(crc)>=4545][prop(crc)<4848],
way.checkme6[prop(crc)>=4545][prop(crc)<4848],
way.checkme7[prop(crc)>=4545][prop(crc)<4848],
way.checkme8[prop(crc)>=4545][prop(crc)<4848],
way.associatedStreet_style[prop(crc)>=4545][prop(crc)<4848] {
    casing-width: 1.5;
    casing-color: black;
    color: #0072e2;
}

area[!highway][building].associatedStreet_style[prop(crc)>=4848][prop(crc)<5151] {
    color: #008f00;
    fill-color: #008f00;
}

way[highway][prop(crc)>=4848][prop(crc)<5151],
way.checkme5[prop(crc)>=4848][prop(crc)<5151], 
way.checkme3[prop(crc)>=4848][prop(crc)<5151],
way.checkme6[prop(crc)>=4848][prop(crc)<5151],
way.checkme7[prop(crc)>=4848][prop(crc)<5151],
way.checkme8[prop(crc)>=4848][prop(crc)<5151],
way.associatedStreet_style[prop(crc)>=4848][prop(crc)<5151] {
    casing-width: 1.5;
    casing-color: black;
    color: #008f00;
}

area[!highway][building].associatedStreet_style[prop(crc)>=5151][prop(crc)<5454] {
    color: #ffcc00;
    fill-color: #ffcc00;
}

way[highway][prop(crc)>=5151][prop(crc)<5454],
way.checkme5[prop(crc)>=5151][prop(crc)<5454], 
way.checkme3[prop(crc)>=5151][prop(crc)<5454],
way.checkme6[prop(crc)>=5151][prop(crc)<5454],
way.checkme7[prop(crc)>=5151][prop(crc)<5454],
way.checkme8[prop(crc)>=5151][prop(crc)<5454],
way.associatedStreet_style[prop(crc)>=5151][prop(crc)<5454] {
    casing-width: 1.5;
    casing-color: black;
    color: #ffcc00;
}

area[!highway][building].associatedStreet_style[prop(crc)>=5454][prop(crc)<5757] {
    color: #BF9017;
    fill-color: #BF9017;
}

way[highway][prop(crc)>=5454][prop(crc)<5757],
way.checkme5[prop(crc)>=5454][prop(crc)<5757], 
way.checkme3[prop(crc)>=5454][prop(crc)<5757],
way.checkme6[prop(crc)>=5454][prop(crc)<5757],
way.checkme7[prop(crc)>=5454][prop(crc)<5757],
way.checkme8[prop(crc)>=5454][prop(crc)<5757],
way.associatedStreet_style[prop(crc)>=5454][prop(crc)<5757] {
    casing-width: 1.5;
    casing-color: black;
    color: #BF9017;
}

area[!highway][building].associatedStreet_style[prop(crc)>=5757][prop(crc)<6060] {
    color: #adff2f;
    fill-color: #adff2f;
}

way[highway][prop(crc)>=5757][prop(crc)<6060],
way.checkme5[prop(crc)>=5757][prop(crc)<6060], 
way.checkme3[prop(crc)>=5757][prop(crc)<6060],
way.checkme6[prop(crc)>=5757][prop(crc)<6060],
way.checkme7[prop(crc)>=5757][prop(crc)<6060],
way.checkme8[prop(crc)>=5757][prop(crc)<6060],
way.associatedStreet_style[prop(crc)>=5757][prop(crc)<6060] {
    casing-width: 1.5;
    casing-color: black;
    color: #adff2f;
}

area[!highway][building].associatedStreet_style[prop(crc)>=6060][prop(crc)<6363] {
    color: #ff69b4;
    fill-color: #ff69b4;
}

way[highway][prop(crc)>=6060][prop(crc)<6363],
way.checkme5[prop(crc)>=6060][prop(crc)<6363], 
way.checkme3[prop(crc)>=6060][prop(crc)<6363],
way.checkme6[prop(crc)>=6060][prop(crc)<6363],
way.checkme7[prop(crc)>=6060][prop(crc)<6363],
way.checkme8[prop(crc)>=6060][prop(crc)<6363],
way.associatedStreet_style[prop(crc)>=6060][prop(crc)<6363] {
    casing-width: 1.5;
    casing-color: black;
    color: #ff69b4;
}

area[!highway][building].associatedStreet_style[prop(crc)>=6363][prop(crc)<6666] {
    color: #cd5c5c;
    fill-color: #cd5c5c;
}

way[highway][prop(crc)>=6363][prop(crc)<6666],
way.checkme5[prop(crc)>=6363][prop(crc)<6666], 
way.checkme3[prop(crc)>=6363][prop(crc)<6666],
way.checkme6[prop(crc)>=6363][prop(crc)<6666],
way.checkme7[prop(crc)>=6363][prop(crc)<6666],
way.checkme8[prop(crc)>=6363][prop(crc)<6666],
way.associatedStreet_style[prop(crc)>=6363][prop(crc)<6666] {
    casing-width: 1.5;
    casing-color: black;
    color: #cd5c5c;
}

area[!highway][building].associatedStreet_style[prop(crc)>=6666][prop(crc)<6969] {
    color: #7d5a07;
    fill-color: #7d5a07;
}

way[highway][prop(crc)>=6666][prop(crc)<6969],
way.checkme5[prop(crc)>=6666][prop(crc)<6969], 
way.checkme3[prop(crc)>=6666][prop(crc)<6969],
way.checkme6[prop(crc)>=6666][prop(crc)<6969],
way.checkme7[prop(crc)>=6666][prop(crc)<6969],
way.checkme8[prop(crc)>=6666][prop(crc)<6969],
way.associatedStreet_style[prop(crc)>=6666][prop(crc)<6969] {
    casing-width: 1.5;
    casing-color: black;
    color: #7d5a07;
}

area[!highway][building].associatedStreet_style[prop(crc)>=6969][prop(crc)<7272] {
    color: #824600;
    fill-color: #824600;
}

way[highway][prop(crc)>=6969][prop(crc)<7272],
way.checkme5[prop(crc)>=6969][prop(crc)<7272], 
way.checkme3[prop(crc)>=6969][prop(crc)<7272],
way.checkme6[prop(crc)>=6969][prop(crc)<7272],
way.checkme7[prop(crc)>=6969][prop(crc)<7272],
way.checkme8[prop(crc)>=6969][prop(crc)<7272],
way.associatedStreet_style[prop(crc)>=6969][prop(crc)<7272] {
    casing-width: 1.5;
    casing-color: black;
    color: #824600;
}

area[!highway][building].associatedStreet_style[prop(crc)>=7272][prop(crc)<7575] {
    color: #f08080;
    fill-color: #f08080;
}

way[highway][prop(crc)>=7272][prop(crc)<7575],
way.checkme5[prop(crc)>=7272][prop(crc)<7575], 
way.checkme3[prop(crc)>=7272][prop(crc)<7575],
way.checkme6[prop(crc)>=7272][prop(crc)<7575],
way.checkme7[prop(crc)>=7272][prop(crc)<7575],
way.checkme8[prop(crc)>=7272][prop(crc)<7575],
way.associatedStreet_style[prop(crc)>=7272][prop(crc)<7575] {
    casing-width: 1.5;
    casing-color: black;
    color: #f08080;
}

area[!highway][building].associatedStreet_style[prop(crc)>=7575][prop(crc)<7878] {
    color: #F75617;
    fill-color: #F75617;
}

way[highway][prop(crc)>=7575][prop(crc)<7878],
way.checkme5[prop(crc)>=7575][prop(crc)<7878], 
way.checkme3[prop(crc)>=7575][prop(crc)<7878],
way.checkme6[prop(crc)>=7575][prop(crc)<7878],
way.checkme7[prop(crc)>=7575][prop(crc)<7878],
way.checkme8[prop(crc)>=7575][prop(crc)<7878],
way.associatedStreet_style[prop(crc)>=7575][prop(crc)<7878] {
    casing-width: 1.5;
    casing-color: black;
    color: #F75617;
}

area[!highway][building].associatedStreet_style[prop(crc)>=7878][prop(crc)<8181] {
    color: #54d954;
    fill-color: #54d954;
}

way[highway][prop(crc)>=7878][prop(crc)<8181],
way.checkme5[prop(crc)>=7878][prop(crc)<8181], 
way.checkme3[prop(crc)>=7878][prop(crc)<8181],
way.checkme6[prop(crc)>=7878][prop(crc)<8181],
way.checkme7[prop(crc)>=7878][prop(crc)<8181],
way.checkme8[prop(crc)>=7878][prop(crc)<8181],
way.associatedStreet_style[prop(crc)>=7878][prop(crc)<8181] {
    casing-width: 1.5;
    casing-color: black;
    color: #54d954;
}

area[!highway][building].associatedStreet_style[prop(crc)>=8181][prop(crc)<8484] {
    color: #ba55d3;
    fill-color: #ba55d3;
}

way[highway][prop(crc)>=8181][prop(crc)<8484],
way.checkme5[prop(crc)>=8181][prop(crc)<8484], 
way.checkme3[prop(crc)>=8181][prop(crc)<8484],
way.checkme6[prop(crc)>=8181][prop(crc)<8484],
way.checkme7[prop(crc)>=8181][prop(crc)<8484],
way.checkme8[prop(crc)>=8181][prop(crc)<8484],
way.associatedStreet_style[prop(crc)>=8181][prop(crc)<8484] {
    casing-width: 1.5;
    casing-color: black;
    color: #ba55d3;
}

area[!highway][building].associatedStreet_style[prop(crc)>=8484][prop(crc)<8787] {
    color: #9370db;
    fill-color: #9370db;
}

way[highway][prop(crc)>=8484][prop(crc)<8787],
way.checkme5[prop(crc)>=8484][prop(crc)<8787],
way.checkme3[prop(crc)>=8484][prop(crc)<8787],
way.checkme6[prop(crc)>=8484][prop(crc)<8787],
way.checkme7[prop(crc)>=8484][prop(crc)<8787],
way.checkme8[prop(crc)>=8484][prop(crc)<8787],
way.associatedStreet_style[prop(crc)>=8484][prop(crc)<8787] {
    casing-width: 1.5;
    casing-color: black;
    color: #9370db;
}

area[!highway][building].associatedStreet_style[prop(crc)>=8787][prop(crc)<9090] {
    color: #ff7c00;
    fill-color: #ff7c00;
}

way[highway][prop(crc)>=8787][prop(crc)<9090],
way.checkme5[prop(crc)>=8787][prop(crc)<9090],
way.checkme3[prop(crc)>=8787][prop(crc)<9090],
way.checkme6[prop(crc)>=8787][prop(crc)<9090],
way.checkme7[prop(crc)>=8787][prop(crc)<9090],
way.checkme8[prop(crc)>=8787][prop(crc)<9090],
way.associatedStreet_style[prop(crc)>=8787][prop(crc)<9090] {
    casing-width: 1.5;
    casing-color: black;
    color: #ff7c00;
}

area[!highway][building].associatedStreet_style[prop(crc)>=9090][prop(crc)<9393] {
    color: #3cb371;
    fill-color: #3cb371;
}

way[highway][prop(crc)>=9090][prop(crc)<9393],
way.checkme5[prop(crc)>=9090][prop(crc)<9393], 
way.checkme3[prop(crc)>=9090][prop(crc)<9393],
way.checkme6[prop(crc)>=9090][prop(crc)<9393],
way.checkme7[prop(crc)>=9090][prop(crc)<9393],
way.checkme8[prop(crc)>=9090][prop(crc)<9393],
way.associatedStreet_style[prop(crc)>=9090][prop(crc)<9393] {
    casing-width: 1.5;
    casing-color: black;
    color: #3cb371;
}

area[!highway][building].associatedStreet_style[prop(crc)>=9393][prop(crc)<9696] {
    color: #707000;
    fill-color: #707000;
}

way[highway][prop(crc)>=9393][prop(crc)<9696],
way.checkme5[prop(crc)>=9393][prop(crc)<9696], 
way.checkme3[prop(crc)>=9393][prop(crc)<9696],
way.checkme6[prop(crc)>=9393][prop(crc)<9696],
way.checkme7[prop(crc)>=9393][prop(crc)<9696],
way.checkme8[prop(crc)>=9393][prop(crc)<9696],
way.associatedStreet_style[prop(crc)>=9393][prop(crc)<9696] {
    casing-width: 1.5;
    casing-color: black;
    color: #707000;
}

area[!highway][building].associatedStreet_style[prop(crc)>=9696] {
    color: #ff4444;
    fill-color: #ff4444;        
}

way[highway][prop(crc)>=9696],
way.checkme5[prop(crc)>=9696], 
way.checkme3[prop(crc)>=9696],
way.checkme6[prop(crc)>=9696],
way.checkme7[prop(crc)>=9696],
way.checkme8[prop(crc)>=9696],
way.associatedStreet_style[prop(crc)>=9696] {
    casing-width: 1.5;
    casing-color: black;
    color: #ff4444;
}

/********************************/
/* Node Zoom Levels and Display */
/********************************/

/*
Summary of different zoom levels:
  (any zoom)    place=* and a few natural icons with their text is shown
  |z-14         tagged way nodes are hidden completely
  |z-15         untagged way nodes are hidden completely
  |z16-         fixme=* and note=* symbols
  |z17-         normal POI icons (without text),
                street name along highway=* ways
  |z18-         text for normal POI icons is shown
  
 * text size and node size is adapted according to zoom level (see style source below)
 * all these zoom features are modifiable via style settings
 * maxspeed icons should not be distinguishable from POIs with "icon-image" property
*/

node {
    text: auto;
}
node|z-16[setting("hide_icons")],
node|z17-[!is_prop_set("icon-image")][setting("hide_icons")]!.maxspeedclass,
node[!is_prop_set("icon-image")][!setting("hide_icons")]!.maxspeedclass {
    symbol-size: 2;
    symbol-shape: square;
    symbol-stroke-color: node_standard#ffff00;
    major-z-index: 4.95; 
}
way > node|z-15!:tagged {
    symbol-shape: none;
}
node:connection {
    symbol-stroke-color: node_connection#ffff00;
}
node:tagged {
    symbol-stroke-color: none;
    symbol-fill-color: node_tagged#00ffff;
}
way > node|z-14[setting("hide_tagged_waynodes")]:tagged { 
    symbol-shape: none; 
}
way > node|z16!:tagged {
    symbol-size: 1; 
}

node|z17 {
    symbol-size: 4;
}
way > node|z17 { 
    symbol-size: 2; 
}
node|z17:connection { 
    symbol-size: 4; 
}

node|z18 { 
  symbol-size: 4; 
}
way > node|z18 { 
    symbol-size: 3; 
}
node|z18:connection { 
    symbol-size: 5; 
}

node|z19- { 
    symbol-size: 4; 
}
way > node|z19- { 
    symbol-size: 4; 
}
node|z19-:connection { 
    symbol-size: 6; 
}


node:selected {
    symbol-shape: square;
    symbol-size: 6;
    symbol-fill-color: node_selected#FF0000;
    symbol-stroke-color: node_selected#FF0000;
}

node|z-16[setting("hide_icons")].icon_z17!.icon_z0,
relation|z-16[type=restriction][setting("hide_icons")] {
    icon-image: none;
}
node|z-17[setting("hide_icons")]!.text_z0 {
    text: none;
}


node|z19,area|z19[!setting("Show_Landuse_Labels_setting")] { 
    font-size: 9; 
}
node|z20-,area|z20-[!setting("Show_Landuse_Labels_setting")] { 
    font-size: 10; 
}

/*----------------------------------------------------------------------------------------------------------------------*\
                                                    Inline Validation Checks
\*----------------------------------------------------------------------------------------------------------------------*/

/********************/
/* Roundabout Check */
/********************/

way[highway^=motorway],
way[highway^=trunk],
way[highway^=primary],
way[highway^=secondary],
way[highway^=tertiary]{
    set .roundabout_missing;
}

way.roundabout_missing:closed[!junction][setting("val_checks")] {
    color: white;
    dashes-background-color: red;
    dashes: 4,12;
    opacity: 1;
    width: 6;
    text: tr("Junction tag?");
    text-color: #460096;
    font-size: 18;
    text-halo-color: white;
    text-halo-radius: 2;
    casing-width: 1;
    casing-color: #000000;
}

/**************************/
/* Motorway Oneway Checks */
/**************************/

way[highway=motorway][!oneway][setting("val_checks")], 
way[highway=motorway_link][!oneway][setting("val_checks")] {
    dashes-background-color: red;
    dashes: 4,9;
    opacity: 1;
    width: 16;
    text: tr("Missing Oneway on Motorway");
    text-color: #460096;
    font-size: 25;
    text-halo-color: white;
    text-halo-radius: 2;
    casing-width: 1;
    casing-color: yellow;
}

/*******************************/
/* Suspicious Roundabout Check */
/*******************************/

way[junction=roundabout][setting("val_checks")]:righthandtraffic:clockwise,
way[junction=roundabout][setting("val_checks")]!:righthandtraffic:anticlockwise {
    text: tr("Suspicious Roundabout Direction");
    casing-color: red;
}

/**********************************/
/* Large Building (area > 520000) */
/**********************************/

area:closed[building][building!=no][eval(areasize()) > 520000][setting("val_checks")] {
    text: tr("Large Building");
    font-size: 20;
    text-decoration-color: orange;
}

/******************************/
/* Building Crossing Building */
/******************************/

area:closed[building] ⧉ area:closed[building][setting("val_checks")] {
    text: tr("Overlapping Buildings");
    color: #FF0000;
    width: 1;
    text-position: center;
    font-weight: bold;
}

/******************************/
/* Strange Character in Key */
/******************************/

*[/(\+|\/|&|<|>|;|\'|\"|%|#|@|\\|,|\.|\{|\}|\?|\*|\^|\$)/][setting("val_checks")] {
    color: red;
    width: 5;
    font-size: 15;
    font-weight: bold;
    text-halo-color: black;
    text-halo-radius: 1;
    symbol-shape: circle;
    symbol-stroke-width: 5;
    symbol-size: 10;
    symbol-stroke-color: yellow;
    symbol-fill-color: red;
    set .strange_characters_key;
}

way|z16-.strange_characters_key {
    text: tr("Strange character in tag [key]!");
    text-position: line;
}

area|z15-.strange_characters_key:closed2 {
    text: tr("Strange character in tag [key]!");
    text-position: center;
}

node|z17-.strange_characters_key {
    text: tr("Strange character in tag [key]!");
}

/************************/
/* Floating Roads Check */
/************************/

node:connection < way[highway] {
    set .has_connection;
}

node!:in-downloaded-area <[index=1] way[highway],
node!:in-downloaded-area <[index=-1] way[highway]  {
    set .outside_area;
}

way["highway"=~/^(motorway|motorway_link|trunk|trunk_link|primary|primary_link|secondary|secondary_link|tertiary|tertiary_link|unclassified|residential|living_street|service)$/]!:new!.has_connection!.outside_area[setting("val_checks")] {
    color: #F20000;
    text: tr("Floating Highway");
    dashes: none;
    casing-dashes: none;
    casing-color: #F20000;
}

/********************/
/* Dead-End Oneways */
/********************/

way["highway"=~/^(motorway|motorway_link|trunk|trunk_link|primary|primary_link|secondary|secondary_link|tertiary|tertiary_link|unclassified|residential|living_street|service|track)$/]["oneway"=~/^(yes|-1)$/]!:closed!.outside_area >[index=1] node[!amenity]!:connection:in-downloaded-area[setting("val_checks")]::under,
way["highway"=~/^(motorway|motorway_link|trunk|trunk_link|primary|primary_link|secondary|secondary_link|tertiary|tertiary_link|unclassified|residential|living_street|service|track)$/]["oneway"=~/^(yes|-1)$/]!:closed!.outside_area >[index=-1] node[!amenity]!:connection:in-downloaded-area[setting("val_checks")]::under {
    symbol-stroke-color: orange;
    symbol-fill-color: red;
    symbol-shape: circle;
    symbol-size: 25;
    symbol-stroke-width: 2;
    text: tr("Dead-End Oneway");
    font-size: 15;
    font-weight: bold;
    z-index: -20;
}

/***********************/
/* Bad Building Values */
/***********************/

area["building"=~/^(fire_station|ger|stilt_house|slurry_tank|apartments|farm|hotel|house|detached|residential|dormitory|terrace|houseboat|bungalow|static_caravan|cabin|commercial|office|industrial|retail|supermarket|warehouse|kiosk|religious|cathedral|chapel|church|mosque|temple|synagogue|shrine|bakehouse|kindergarten|civic|government|hospital|school|stadium|train_station|transportation|university|grandstand|public|toilets|barn|bridge|bunker|carport|conservatory|construction|cowshed|digester|farm_auxiliary|garage|garages|garbage_shed|greenhouse|hangar|hut|pavilion|parking|riding_hall|roof|shed|sports_hall|stable|sty|transformer_tower|service|ruins|water_tower|yes)$/] {
    set .normal_building;
}

area[building]!.normal_building[setting("val_checks")] {
    fill-color: red;
    color: red;
    text: tr("Suspicious Building Value");
    text-position: center;
}

/*******************************/
/* Buildings as Water or Roads */
/*******************************/

area[building][highway][setting("val_checks")],
area[building][waterway][setting("val_checks")],
way[building][waterway]:closed[setting("val_checks")],
way[building][highway]:closed[setting("val_checks")] {
    fill-color: red;
    color: red;
    text: tr("Bad Tag Combination");
    text-position: center;
    font-weight: bold;
    text-halo-color: black;
    text-halo-radius: 1;
    font-size: 10;

}

/******************/
/* Water as Roads */
/******************/

way[waterway][highway][setting("val_checks")] {
    color: red;
    casing-color: red;
    text: tr("Highway with waterway tag");
    font-weight: bold;
    text-halo-color: black;
    text-halo-radius: 1;
    font-size: 10;
    width: 8;

}

/*************************/
/* Unconnected Way Icons */
/*************************/

way[highway]!:closed >[index=1] node|z15-!:connection!:tagged[setting("Unconnected_Nodes_setting")],
way[highway]!:closed >[index=-1] node|z15-!:connection!:tagged[setting("Unconnected_Nodes_setting")] { 
    icon-image: "presets/misc/es.svg";
    icon-height: 18;
    icon-offset: 8;
    z-index: -3;
}

/*************************************/
/* Building Intersecting Road Checks */
/*************************************/

/* Create highway class for highways that have a connection node */
way[highway][setting("val_checks")] > node:connection {
    set .wayintersect;
}

/* Create class in order to exclude these scenarios */

way["highway"=~/^(pedestrian|footway|steps|path|cycleway|bridleway)$/][setting("val_checks")] > node:connection,
way[highway]["covered"=~/^(yes|no|arcade|booth)$/][setting("val_checks")] > node:connection,
way[highway]["tunnel"=~/^(building_passage|culvert)$/][setting("val_checks")] > node:connection,
way["highway"=~/^(service|track)$/][setting("val_checks")] > node:connection[entrance] {
    set .wayexclude;
}

/* Buildings that are connected to highways (except for the excludes) are flagged */

way[building][setting("val_checks")]:closed > node|z17-:connection.wayintersect!.wayexclude {
    symbol-shape: triangle;
    symbol-size: 15;
    symbol-fill-color: red;
    symbol-fill-opacity: 0.8;
    symbol-stroke-color: yellow;
    symbol-stroke-width: 2;
    text: tr("Road Intersecting Building");
    font-size: 15;
    text-offset: 40;
}

/* Node Styles once Selected */

way[building][setting("val_checks")]:closed > node:connection {
    set .selectme;
}

node:selected.selectme {
    fill-opacity: 0.9;
    symbol-shape: triangle;
    symbol-fill-color: black;
    symbol-fill-opacity: 1;
    symbol-stroke-color: red;
    symbol-stroke-opacity: 1;
    symbol-stroke-width: 5;
}

/* Building inside of building Check */

*[building][building!~/no|entrance/][any(tag("layer"),"0") = any(parent_tag("layer"),"0")] ∈ *[building][building!~/no|entrance/][setting("val_checks")] {
    text: tr("Building Inside Building");
    font-size: 15;
    width: 2;
    casing-width: 5;
    casing-color: red;
    font-style: helvetica;
    font-weight: bold;
}

/* Water (ways only) snapped to roads and buildings */

way[natural=water] > node[!ford]:connection {
    set .water_1;
}

way[waterway=riverbank] > node[!ford]:connection {
    set .riverbank_1;
}

way[waterway] > node[!ford]:connection {
    set .waterway_1;
}

way[building] > node[!ford]:connection  {
    set .building_1;
}

way[railway] > node[!ford]:connection {
    set .railway_1;
}

way[highway] > node[!ford]:connection {
    set .highway_1;
}

node|z17-.building_1.water_1[setting("val_checks")],
node|z17-.building_1.riverbank_1[setting("val_checks")],
node|z17-.building_1.waterway_1[setting("val_checks")],
node|z17-.waterway_1.highway_1[setting("val_checks")],
node|z17-.water_1.highway_1[setting("val_checks")],
node|z17-.riverbank_1.highway_1[setting("val_checks")],
node|z17-.railway_1.waterway_1[setting("val_checks")],
node|z17-.railway_1.riverbank_1[setting("val_checks")],
node|z17-.railway_1.water_1[setting("val_checks")] {
    symbol-size:15;
    symbol-fill-color: red;
    symbol-shape: circle;
    symbol-stroke-width: 2;
}

/* Buildings within water */

area[natural=water] ∈ area[building][setting("val_checks")],
area[building] ∈ area[natural=water][setting("val_checks")],
area[building] ∈ area[waterway=riverbank][setting("val_checks")] {
    color: red;
    width: 10;
    text: tr("Building Inside Water");
    text-position: center;
    font-size: 20;
}

/* Waterways crossing with buildings */

area[natural=water] ⧉ area[building][setting("val_checks")] {
    color: red;
    width: 10;
    text: tr("Building Crossing Water");
    text-position: center;
    font-size: 20;
}

/*************************************/
/* Invalid Multipolygon Checks  */
/*************************************/

area:closed2[eval(JOSM_search("role:outer"))] ⧉ area:closed2[eval(JOSM_search("role:outer"))][setting("val_checks")] {
    text: tr("Outer members overlapping");
    font-size: 15;
    color: #FF0000;
    width: 1;
    text-position: center;
    font-weight: bold;
}

area:closed2[eval(JOSM_search("role:outer"))] ⧉ area:closed2[eval(JOSM_search("role:inner"))][setting("val_checks")]  {
    text: tr("Inner member intersects with an outer member");
    font-size: 15;
    color: #FF0000;
    width: 1;
    text-position: center;
    font-weight: bold;
}

area:closed2[eval(JOSM_search("role:inner"))] ⊇ area:closed2[eval(JOSM_search("role:outer"))][setting("val_checks")] {
  width: 10;
  color: red;
  text: tr("Outer member within an inner member");
    font-size: 15;
    color: #FF0000;
    width: 1;
    text-position: center;
    font-weight: bold;
}

/* Invalid Node Connection - This will flag when an inner member is connected to an
out member (which is invalid), however it may flag some false positives as this does
not evaluate the same relation, but all relations. False positives are more common with boundaries. */

area[eval(JOSM_search("role:inner"))] > node:connection {
    set .innernode;
}

area[eval(JOSM_search("role:outer"))] > node:connection {
    set .outernode;
}

node|z12-.innernode.outernode[setting("val_checks")] {
    symbol-size:8;
    symbol-fill-color: red;
    symbol-shape: circle;
    symbol-stroke-width: 1;
    text: tr("Possible error: Inner connected to Outer");
        font-size: 12;
        color: #FF0000;
        width: 2;
        text-position: center;
        font-weight: bold;
}

/* Visible Nodes Style */

node:connection[setting("visible_nodes")] {
  symbol-size: 9;
  symbol-shape: circle;
  symbol-stroke-color: #00ffff;
}

/**********************/
/* Address Definition */
/**********************/

node[addr:place] { 
    symbol-shape: circle; 
    symbol-size: 7; 
    symbol-fill-color: lime;
}

node[addr:street] { 
    symbol-shape: circle; 
    symbol-size: 6; 
    symbol-fill-color: green;
}

node[addr:housenumber] { 
    symbol-shape: circle; 
    symbol-size: 6; 
    symbol-fill-color: blue;
}

node[addr:housenumber][!addr:street] {  
    symbol-fill-color: #95002B;
}

relation[type=associatedStreet] > node {
    symbol-shape: circle; 
    symbol-size: 6; 
    symbol-fill-color: #FF9A40;
}

node[addr:housenumber]::hn_casing,
node[addr:place]::hn_casing,
node[addr:street]::hn_casing { 
    z-index: -100; 
    symbol-shape: circle; 
    symbol-size: 8; 
    symbol-fill-color: white; 
}

/* Text addressing based on tag */

node[addr:place][setting("Address_names")] { 
    text: tag("name");
    font-weight: bold;
    text-halo-color: black;
    text-halo-radius: 1;
}

node[addr:street][setting("Address_names")] {  
    text: tag("name");
    font-weight: bold;
    text-halo-color: black;
    text-halo-radius: 1;
}

node[addr:housenumber][setting("Address_names")] { 
    text: tag("addr:housenumber");
    font-weight: bold;
    text-halo-color: black;
    text-halo-radius: 1;
}

node[shop][setting("Address_names")] { 
    text: tag("name");
    font-weight: bold;
    text-halo-color: black;
    text-halo-radius: 1;
}

node[tourism][setting("Address_names")] { 
    text: tag("name");
    font-weight: bold;
    text-halo-color: black;
    text-halo-radius: 1;
}

node[amenity][setting("Address_names")] { 
    text: tag("name");
    font-weight: bold;
    text-halo-color: black;
    text-halo-radius: 1;
}

/* Text addressing without setting */

node[shop][!setting("Address_names")] { 
    text: none;
}

node[tourism][!setting("Address_names")] { 
    text: none;
}

node[amenity][!setting("Address_names")] { 
    text: none;
}

node[addr:place][!setting("Address_names")] { 
    text: none;
}

node[addr:street][!setting("Address_names")] {  
    text: none;
}

node[addr:housenumber][!setting("Address_names")] { 
    text: none;
}

/* Scaling for Addr Nodes */

/* Create - Zoom 12-16 */

node|z-12[addr:place],
node|z-12[addr:street],
node|z-12[addr:housenumber],
node|z-12[shop],
node|z-12[tourism],
node|z-12[amenity] { 
    symbol-size: 0;
    symbol-shape: none;
    text: none;
    symbol-fill-color: none;
}

node|z-12[addr:place]::hn_casing,
node|z-12[addr:street]::hn_casing,
node|z-12[addr:housenumber]::hn_casing {
    symbol-size: 0;
    symbol-shape: none;
    text: none;
    symbol-fill-color: none;
}

node|z13-15[addr:place],
node|z13-15[addr:street],
node|z13-15[addr:housenumber],
node|z13-15[shop],
node|z13-15[tourism],
node|z13-15[amenity] { 
    symbol-size: 4;
    text: none;
}


node|z13-15[addr:place]::hn_casing,
node|z13-15[addr:street]::hn_casing,
node|z13-15[addr:housenumber]::hn_casing { 
    symbol-size: 6;
}

/* Zoom 16 */

node|z16[addr:place],
node|z16[addr:street],
node|z16[addr:housenumber],
node|z16[shop],
node|z16[tourism],
node|z16[amenity] { 
    symbol-size: 5;
    text: none;
}


node|z16[addr:place]::hn_casing,
node|z16[addr:street]::hn_casing,
node|z16[addr:housenumber]::hn_casing {
    symbol-size: 7; 
}

/* Zoom 17 */

node|z17[addr:place],
node|z17[addr:street],
node|z17[addr:housenumber] { 
    symbol-size: 6;
    font-size: 8; 
}

node|z17[shop],
node|z17[tourism],
node|z17[amenity] { 
    symbol-size: 6;
    text: none; 
}

node|z17[addr:place]::hn_casing,
node|z17[addr:street]::hn_casing,
node|z17[addr:housenumber]::hn_casing {
    symbol-size: 8; 
}

/* Zoom 18-19 */

node|z18-19[addr:place],
node|z18-19[addr:street],
node|z18-19[addr:housenumber],
node|z18-19[shop],
node|z18-19[tourism],
node|z18-19[amenity] { 
    symbol-size: 7;
    font-size: 10;
}

node|z18-19[addr:place]::hn_casing,
node|z18-19[addr:street]::hn_casing,
node|z18-19[addr:housenumber]::hn_casing { 
    symbol-size: 9; 
}

/* Zoom 20-24 */

node|z20-24[addr:place],
node|z20-24[addr:street],
node|z20-24[addr:housenumber],
node|z20-24[shop],
node|z20-24[tourism],
node|z20-24[amenity] {
    symbol-size: 9;
    font-size: 14; 
}

node|z20-24[addr:place]::hn_casing,
node|z20-24[addr:street]::hn_casing,
node|z20-24[addr:housenumber]::hn_casing {
    symbol-size: 11; 
}


/*----------------------------------------------------------------------------------------------------------------------*\
                                                      Sensitive Features
\*----------------------------------------------------------------------------------------------------------------------*/


/****************** Admin ******************/

/* AREAS */

/* Yellow */

area:closed[admin_level=~/^(10|9|8|7)$/]:modified[setting("sensitive")],
node:modified < area:closed[admin_level=~/^(10|9|8|7)$/][setting("sensitive")] {
    width: 10;
    color: yellow;
    opacity: 0.6;
    z-index: -5;
}

/* Red */

area:closed[admin_level=~/^(1|2|3|4|5|6)$/]:modified[setting("sensitive")],
node:modified < area:closed[admin_level=~/^(1|2|3|4|5|6)$/][setting("sensitive")] {
    width: 15;
    color: red;
    opacity: 0.7;
    z-index: -5;
}

/* WAYS */

/* Yellow */

way[admin_level=~/^(10|9|8|7)$/]:modified[setting("sensitive")]::admin_underlay,
node:modified < way[admin_level=~/^(10|9|8|7)$/][setting("sensitive")]::admin_underlay {
    width: 10;
    color: yellow;
    opacity: 0.4;
    z-index: -5;
}

/* Red */

way[admin_level=~/^(1|2|3|4|5|6)$/]:modified[setting("sensitive")]::admin_underlay,
node:modified < way[admin_level=~/^(1|2|3|4|5|6)$/][setting("sensitive")]::admin_underlay {
    width: 15;
    color: orange;
    opacity: 0.4;
    z-index: -5;
}


/* RELATIONS */

/* Yellow */

relation[admin_level=~/^(10|9|8|7)$/] > way:modified[setting("sensitive")]::admin_underlay {
    width: 15;
    color: orange;
    opacity: 0.4;
    z-index: -5;
}

/* Red */

relation[admin_level=~/^(1|2|3|4|5|6)$/] > way:modified[setting("sensitive")]::admin_underlay {
    width: 15;
    color: orange;
    opacity: 0.4;
    z-index: -5;
}

/* Places */

node[place]:modified::modified_layer {
    symbol-shape: circle;
    symbol-size: 30;
    symbol-stroke-color: #FFA500;
    symbol-stroke-width: 2;
    symbol-fill-color: #801515;
    symbol-fill-opacity: .7;
    z-index: -5;
}


/*************************/
/* Military Base Styling */
/*************************/

area[military][setting("sensitive")],
area[boundary=military][setting("sensitive")], 
area[landuse=military][setting("sensitive")] {
    text:tr("WARNING");
    text-position: center;
    font-size: 20;
    color: #FFA500;
    width: 3;
}

area[military][setting("sensitive")]::military,
area[boundary=military][setting("sensitive")]::military, 
area[landuse=military][setting("sensitive")]::military {
    fill-color: #801515;
    fill-opacity: .5;
    fill-extent: none;
    text-opacity: 0;
}

area[military][building][setting("sensitive")] {
    fill-color: #801515;
    color: building#cb9999;
    width: 2;
    text: none;
}


/*----------------------------------------------------------------------------------------------------------------------*\
                                                      Admin Casing
\*----------------------------------------------------------------------------------------------------------------------*/

/********* First display class Admin 5-1 *************/

way[highway][admin_level=5][setting("sensitive")]::adminHighwayP1,
relation[admin_level=5] > way[highway][setting("sensitive")]::adminHighwayP1,
way[highway][admin_level=4][setting("sensitive")]::adminHighwayP1,
relation[admin_level=4] > way[highway][setting("sensitive")]::adminHighwayP1,
way[highway][admin_level=3][setting("sensitive")]::adminHighwayP1,
relation[admin_level=3] > way[highway][setting("sensitive")]::adminHighwayP1,
way[highway][admin_level=2][setting("sensitive")]::adminHighwayP1,
relation[admin_level=2] > way[highway][setting("sensitive")]::adminHighwayP1,
way[highway][admin_level=1][setting("sensitive")]::adminHighwayP1,
relation[admin_level=1] > way[highway][setting("sensitive")]::adminHighwayP1 {
    z-index: -2;
    casing-offset: 12;
    casing-width: 2;
    casing-color: yellow;
    casing-dashes: 9,9;
    casing-dashes-background-color: black;
}


way[highway][admin_level=5][setting("sensitive")]::adminHighwayP2,
relation[admin_level=5] > way[highway][setting("sensitive")]::adminHighwayP2,
way[highway][admin_level=4][setting("sensitive")]::adminHighwayP2,
relation[admin_level=4] > way[highway][setting("sensitive")]::adminHighwayP2,
way[highway][admin_level=3][setting("sensitive")]::adminHighwayP2,
relation[admin_level=3] > way[highway][setting("sensitive")]::adminHighwayP2,
way[highway][admin_level=2][setting("sensitive")]::adminHighwayP2,
relation[admin_level=2] > way[highway][setting("sensitive")]::adminHighwayP2,
way[highway][admin_level=1][setting("sensitive")]::adminHighwayP2,
relation[admin_level=1] > way[highway][setting("sensitive")]::adminHighwayP2 {
    z-index: -2;
    casing-offset: -12;
    casing-width: 2;
    casing-color: yellow;
    casing-dashes: 9,9 ;
    casing-dashes-background-color: black;
}

/********* Second display class Admin 6-10 **********/

way[highway][admin_level=10][setting("sensitive")]::adminHighwayP3,
relation[admin_level=10] > way[highway][setting("sensitive")]::adminHighwayP3,
way[highway][admin_level=9][setting("sensitive")]::adminHighwayP3,
relation[admin_level=9] > way[highway][setting("sensitive")]::adminHighwayP3,
way[highway][admin_level=8][setting("sensitive")]::adminHighwayP3,
relation[admin_level=8] > way[highway][setting("sensitive")]::adminHighwayP3,
way[highway][admin_level=7][setting("sensitive")]::adminHighwayP3,
relation[admin_level=7] > way[highway][setting("sensitive")]::adminHighwayP3,
way[highway][admin_level=6][setting("sensitive")]::adminHighwayP3,
relation[admin_level=6] > way[highway][setting("sensitive")]::adminHighwayP3 {
    z-index: -2;
    casing-offset: 12;
    casing-width: 1.6;
    casing-color: boundary#FF6600;
    casing-dashes: 9,9;
    casing-dashes-background-color: black;
}
way[highway][admin_level=10][setting("sensitive")]::adminHighwayP4,
relation[admin_level=10] > way[highway][setting("sensitive")]::adminHighwayP4,
way[highway][admin_level=9][setting("sensitive")]::adminHighwayP4,
relation[admin_level=9] > way[highway][setting("sensitive")]::adminHighwayP4,
way[highway][admin_level=8][setting("sensitive")]::adminHighwayP4,
relation[admin_level=8] > way[highway][setting("sensitive")]::adminHighwayP4,
way[highway][admin_level=7][setting("sensitive")]::adminHighwayP4,
relation[admin_level=7] > way[highway][setting("sensitive")]::adminHighwayP4,
way[highway][admin_level=6][setting("sensitive")]::adminHighwayP4,
relation[admin_level=6] > way[highway][setting("sensitive")]::adminHighwayP4 {
    z-index: -2;
    casing-offset: -12;
    casing-width: 1.6;
    casing-color: boundary#FF6600;
    casing-dashes: 9,9;
    casing-dashes-background-color: black;
}


/* Remove operator from rendering */

way[highway][operator] {
  text: none;
}

way[highway][operator][/^name/],
way[highway][operator][/name$/],
way[highway][operator][/^ref/],
way[highway][operator][/ref$/] {
  text: auto;
}

/* Remove street names from ways */

way[highway][setting("remove_names")] {
    text: none;
}
node[setting("remove_names")] {
    text: none;
}
